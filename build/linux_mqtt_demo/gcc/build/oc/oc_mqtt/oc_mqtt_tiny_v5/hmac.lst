GAS LISTING /tmp/cctUR8tl.s 			page 1


   1              		.file	"hmac.c"
   2              		.text
   3              	.Ltext0:
   4              		.section	.rodata
   5              		.align 8
   6              	.LC0:
   7 0000 5B25735D 		.string	"[%s][%u][%s] mbedtls_md_setup() returned -0x%04x\n\r\n"
   7      5B25755D 
   7      5B25735D 
   7      206D6265 
   7      64746C73 
   8              		.section	.text.mbedtls_hmac_calc,"ax",@progbits
   9              		.globl	mbedtls_hmac_calc
  11              	mbedtls_hmac_calc:
  12              	.LFB21:
  13              		.file 1 "/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c"
   1:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c **** /* ----------------------------------------------------------------------------
   2:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c ****  * Copyright (c) <2016-2018>, <Huawei Technologies Co., Ltd>
   3:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c ****  * All rights reserved.
   4:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c ****  * Redistribution and use in source and binary forms, with or without modification,
   5:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c ****  * are permitted provided that the following conditions are met:
   6:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c ****  * 1. Redistributions of source code must retain the above copyright notice, this list of
   7:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c ****  * conditions and the following disclaimer.
   8:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c ****  * 2. Redistributions in binary form must reproduce the above copyright notice, this list
   9:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c ****  * of conditions and the following disclaimer in the documentation and/or other materials
  10:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c ****  * provided with the distribution.
  11:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c ****  * 3. Neither the name of the copyright holder nor the names of its contributors may be used
  12:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c ****  * to endorse or promote products derived from this software without specific prior written
  13:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c ****  * permission.
  14:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c ****  * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
  15:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c ****  * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  16:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c ****  * THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  17:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c ****  * PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR
  18:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c ****  * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  19:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c ****  * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  20:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c ****  * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;
  21:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c ****  * OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
  22:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c ****  * WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR
  23:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c ****  * OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF
  24:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c ****  * ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  25:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c ****  * --------------------------------------------------------------------------- */
  26:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c **** /* ----------------------------------------------------------------------------
  27:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c ****  * Notice of Export Control Law
  28:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c ****  * ===============================================
  29:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c ****  * Huawei LiteOS may be subject to applicable export control laws and regulations, which might
  30:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c ****  * include those applicable to Huawei LiteOS of U.S. and the country in which you are located.
  31:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c ****  * Import, export and usage of Huawei LiteOS in any manner by you shall be in compliance with such
  32:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c ****  * applicable export control laws and regulations.
  33:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c ****  * --------------------------------------------------------------------------- */
  34:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c **** #include "hmac.h"
  35:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c **** 
  36:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c **** #include <string.h>
  37:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c **** #include "link_log.h"
  38:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c **** #include "mbedtls/md.h"
  39:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c **** #include "mbedtls/ssl.h"
  40:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c **** #include "mbedtls/entropy.h"
  41:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c **** #include "mbedtls/ctr_drbg.h"
GAS LISTING /tmp/cctUR8tl.s 			page 2


  42:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c **** #include "mbedtls/platform.h"
  43:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c **** #include "mbedtls/md_internal.h"
  44:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c **** #include "dtls_interface.h"
  45:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c **** 
  46:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c **** typedef struct _mbedtls_hmac_t {
  47:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c ****     const unsigned char *secret;
  48:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c ****     const unsigned char *input;
  49:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c ****     unsigned char *digest;
  50:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c ****     size_t secret_len;
  51:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c ****     size_t input_len;
  52:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c ****     size_t digest_len;
  53:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c ****     mbedtls_md_type_t hmac_type;
  54:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c **** } mbedtls_hmac_t;
  55:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c **** 
  56:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c **** int mbedtls_hmac_calc(mbedtls_hmac_t *hmac_info)
  57:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c **** {
  14              		.loc 1 57 1
  15              		.cfi_startproc
  16 0000 F30F1EFA 		endbr64
  17 0004 55       		pushq	%rbp
  18              	.LCFI0:
  19              		.cfi_def_cfa_offset 16
  20              		.cfi_offset 6, -16
  21 0005 4889E5   		movq	%rsp, %rbp
  22              	.LCFI1:
  23              		.cfi_def_cfa_register 6
  24 0008 4154     		pushq	%r12
  25 000a 53       		pushq	%rbx
  26 000b 4883EC40 		subq	$64, %rsp
  27              		.cfi_offset 12, -24
  28              		.cfi_offset 3, -32
  29 000f 48897DB8 		movq	%rdi, -72(%rbp)
  30              		.loc 1 57 1
  31 0013 64488B04 		movq	%fs:40, %rax
  31      25280000 
  31      00
  32 001c 488945E8 		movq	%rax, -24(%rbp)
  33 0020 31C0     		xorl	%eax, %eax
  58:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c ****     int ret;
  59:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c **** 
  60:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c ****     mbedtls_md_context_t mbedtls_md_ctx;
  61:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c ****     const mbedtls_md_info_t *md_info;
  62:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c **** 
  63:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c ****     if (hmac_info == NULL || hmac_info->secret == NULL || hmac_info->input == NULL || hmac_info->se
  34              		.loc 1 63 8
  35 0022 48837DB8 		cmpq	$0, -72(%rbp)
  35      00
  36 0027 7440     		je	.L2
  37              		.loc 1 63 39 discriminator 1
  38 0029 488B45B8 		movq	-72(%rbp), %rax
  39 002d 488B00   		movq	(%rax), %rax
  40              		.loc 1 63 27 discriminator 1
  41 0030 4885C0   		testq	%rax, %rax
  42 0033 7434     		je	.L2
  43              		.loc 1 63 68 discriminator 2
  44 0035 488B45B8 		movq	-72(%rbp), %rax
  45 0039 488B4008 		movq	8(%rax), %rax
GAS LISTING /tmp/cctUR8tl.s 			page 3


  46              		.loc 1 63 56 discriminator 2
  47 003d 4885C0   		testq	%rax, %rax
  48 0040 7427     		je	.L2
  49              		.loc 1 63 96 discriminator 3
  50 0042 488B45B8 		movq	-72(%rbp), %rax
  51 0046 488B4018 		movq	24(%rax), %rax
  52              		.loc 1 63 84 discriminator 3
  53 004a 4885C0   		testq	%rax, %rax
  54 004d 741A     		je	.L2
  64:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c ****         hmac_info->input_len == 0 || hmac_info->digest_len == 0) {
  55              		.loc 1 64 18 discriminator 4
  56 004f 488B45B8 		movq	-72(%rbp), %rax
  57 0053 488B4020 		movq	32(%rax), %rax
  63:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c ****         hmac_info->input_len == 0 || hmac_info->digest_len == 0) {
  58              		.loc 1 63 114 discriminator 4
  59 0057 4885C0   		testq	%rax, %rax
  60 005a 740D     		je	.L2
  61              		.loc 1 64 47
  62 005c 488B45B8 		movq	-72(%rbp), %rax
  63 0060 488B4028 		movq	40(%rax), %rax
  64              		.loc 1 64 35
  65 0064 4885C0   		testq	%rax, %rax
  66 0067 750A     		jne	.L3
  67              	.L2:
  65:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c ****         return MBEDTLS_ERR_MD_BAD_INPUT_DATA;
  68              		.loc 1 65 16
  69 0069 B800AFFF 		movl	$-20736, %eax
  69      FF
  70 006e E9430100 		jmp	.L10
  70      00
  71              	.L3:
  66:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c ****     }
  67:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c **** 
  68:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c ****     md_info = mbedtls_md_info_from_type(hmac_info->hmac_type);
  72              		.loc 1 68 15
  73 0073 488B45B8 		movq	-72(%rbp), %rax
  74 0077 8B4030   		movl	48(%rax), %eax
  75 007a 89C7     		movl	%eax, %edi
  76 007c E8000000 		call	mbedtls_md_info_from_type@PLT
  76      00
  77 0081 488945C8 		movq	%rax, -56(%rbp)
  69:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c ****     if (md_info == NULL || (size_t)md_info->size > hmac_info->digest_len) {
  78              		.loc 1 69 8
  79 0085 48837DC8 		cmpq	$0, -56(%rbp)
  79      00
  80 008a 7417     		je	.L5
  81              		.loc 1 69 43 discriminator 1
  82 008c 488B45C8 		movq	-56(%rbp), %rax
  83 0090 8B4010   		movl	16(%rax), %eax
  84              		.loc 1 69 28 discriminator 1
  85 0093 4863D0   		movslq	%eax, %rdx
  86              		.loc 1 69 61 discriminator 1
  87 0096 488B45B8 		movq	-72(%rbp), %rax
  88 009a 488B4028 		movq	40(%rax), %rax
  89              		.loc 1 69 25 discriminator 1
  90 009e 4839C2   		cmpq	%rax, %rdx
  91 00a1 760A     		jbe	.L6
GAS LISTING /tmp/cctUR8tl.s 			page 4


  92              	.L5:
  70:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c ****         return MBEDTLS_ERR_MD_BAD_INPUT_DATA;
  93              		.loc 1 70 16
  94 00a3 B800AFFF 		movl	$-20736, %eax
  94      FF
  95 00a8 E9090100 		jmp	.L10
  95      00
  96              	.L6:
  71:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c ****     }
  72:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c **** 
  73:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c ****     mbedtls_md_init(&mbedtls_md_ctx);
  97              		.loc 1 73 5
  98 00ad 488D45D0 		leaq	-48(%rbp), %rax
  99 00b1 4889C7   		movq	%rax, %rdi
 100 00b4 E8000000 		call	mbedtls_md_init@PLT
 100      00
  74:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c ****     (void)memset(hmac_info->digest, 0x00, hmac_info->digest_len);
 101              		.loc 1 74 11
 102 00b9 488B45B8 		movq	-72(%rbp), %rax
 103 00bd 488B5028 		movq	40(%rax), %rdx
 104              		.loc 1 74 27
 105 00c1 488B45B8 		movq	-72(%rbp), %rax
 106 00c5 488B4010 		movq	16(%rax), %rax
 107              		.loc 1 74 11
 108 00c9 BE000000 		movl	$0, %esi
 108      00
 109 00ce 4889C7   		movq	%rax, %rdi
 110 00d1 E8000000 		call	memset@PLT
 110      00
  75:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c **** 
  76:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c ****     ret = mbedtls_md_setup(&mbedtls_md_ctx, md_info, 1);
 111              		.loc 1 76 11
 112 00d6 488B4DC8 		movq	-56(%rbp), %rcx
 113 00da 488D45D0 		leaq	-48(%rbp), %rax
 114 00de BA010000 		movl	$1, %edx
 114      00
 115 00e3 4889CE   		movq	%rcx, %rsi
 116 00e6 4889C7   		movq	%rax, %rdi
 117 00e9 E8000000 		call	mbedtls_md_setup@PLT
 117      00
 118 00ee 8945C4   		movl	%eax, -60(%rbp)
  77:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c ****     if (ret != 0) {
 119              		.loc 1 77 8
 120 00f1 837DC400 		cmpl	$0, -60(%rbp)
 121 00f5 7459     		je	.L7
  78:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c ****         LINK_LOG_DEBUG("mbedtls_md_setup() returned -0x%04x\n", -ret);
 122              		.loc 1 78 9
 123 00f7 E8000000 		call	link_log_level_get@PLT
 123      00
 124 00fc 83F801   		cmpl	$1, %eax
 125 00ff 0F87A100 		ja	.L12
 125      0000
 126              		.loc 1 78 9 is_stmt 0 discriminator 1
 127 0105 8B45C4   		movl	-60(%rbp), %eax
 128 0108 F7D8     		negl	%eax
 129 010a 89C3     		movl	%eax, %ebx
 130 010c E8000000 		call	osal_sys_time@PLT
GAS LISTING /tmp/cctUR8tl.s 			page 5


 130      00
 131 0111 4189C4   		movl	%eax, %r12d
 132 0114 BF010000 		movl	$1, %edi
 132      00
 133 0119 E8000000 		call	link_log_level_name@PLT
 133      00
 134 011e 4189D8   		movl	%ebx, %r8d
 135 0121 488D0D00 		leaq	__FUNCTION__.5831(%rip), %rcx
 135      000000
 136 0128 4489E2   		movl	%r12d, %edx
 137 012b 4889C6   		movq	%rax, %rsi
 138 012e 488D3D00 		leaq	.LC0(%rip), %rdi
 138      000000
 139 0135 B8000000 		movl	$0, %eax
 139      00
 140 013a E8000000 		call	printf@PLT
 140      00
 141 013f 488B0500 		movq	stdout(%rip), %rax
 141      000000
 142 0146 4889C7   		movq	%rax, %rdi
 143 0149 E8000000 		call	fflush@PLT
 143      00
  79:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c ****         goto exit;
 144              		.loc 1 79 9 is_stmt 1 discriminator 1
 145 014e EB56     		jmp	.L12
 146              	.L7:
  80:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c ****     }
  81:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c **** 
  82:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c ****     (void)mbedtls_md_hmac_starts(&mbedtls_md_ctx, hmac_info->secret, hmac_info->secret_len);
 147              		.loc 1 82 11
 148 0150 488B45B8 		movq	-72(%rbp), %rax
 149 0154 488B5018 		movq	24(%rax), %rdx
 150 0158 488B45B8 		movq	-72(%rbp), %rax
 151 015c 488B08   		movq	(%rax), %rcx
 152 015f 488D45D0 		leaq	-48(%rbp), %rax
 153 0163 4889CE   		movq	%rcx, %rsi
 154 0166 4889C7   		movq	%rax, %rdi
 155 0169 E8000000 		call	mbedtls_md_hmac_starts@PLT
 155      00
  83:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c ****     (void)mbedtls_md_hmac_update(&mbedtls_md_ctx, hmac_info->input, hmac_info->input_len);
 156              		.loc 1 83 11
 157 016e 488B45B8 		movq	-72(%rbp), %rax
 158 0172 488B5020 		movq	32(%rax), %rdx
 159 0176 488B45B8 		movq	-72(%rbp), %rax
 160 017a 488B4808 		movq	8(%rax), %rcx
 161 017e 488D45D0 		leaq	-48(%rbp), %rax
 162 0182 4889CE   		movq	%rcx, %rsi
 163 0185 4889C7   		movq	%rax, %rdi
 164 0188 E8000000 		call	mbedtls_md_hmac_update@PLT
 164      00
  84:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c ****     (void)mbedtls_md_hmac_finish(&mbedtls_md_ctx, hmac_info->digest);
 165              		.loc 1 84 11
 166 018d 488B45B8 		movq	-72(%rbp), %rax
 167 0191 488B5010 		movq	16(%rax), %rdx
 168 0195 488D45D0 		leaq	-48(%rbp), %rax
 169 0199 4889D6   		movq	%rdx, %rsi
 170 019c 4889C7   		movq	%rax, %rdi
GAS LISTING /tmp/cctUR8tl.s 			page 6


 171 019f E8000000 		call	mbedtls_md_hmac_finish@PLT
 171      00
 172 01a4 EB01     		jmp	.L9
 173              	.L12:
  79:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c ****     }
 174              		.loc 1 79 9
 175 01a6 90       		nop
 176              	.L9:
  85:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c **** 
  86:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c **** exit:
  87:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c ****     mbedtls_md_free(&mbedtls_md_ctx);
 177              		.loc 1 87 5
 178 01a7 488D45D0 		leaq	-48(%rbp), %rax
 179 01ab 4889C7   		movq	%rax, %rdi
 180 01ae E8000000 		call	mbedtls_md_free@PLT
 180      00
  88:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c **** 
  89:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c ****     return ret;
 181              		.loc 1 89 12
 182 01b3 8B45C4   		movl	-60(%rbp), %eax
 183              	.L10:
  90:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c **** }
 184              		.loc 1 90 1 discriminator 1
 185 01b6 488B5DE8 		movq	-24(%rbp), %rbx
 186 01ba 6448331C 		xorq	%fs:40, %rbx
 186      25280000 
 186      00
 187 01c3 7405     		je	.L11
 188              		.loc 1 90 1 is_stmt 0
 189 01c5 E8000000 		call	__stack_chk_fail@PLT
 189      00
 190              	.L11:
 191 01ca 4883C440 		addq	$64, %rsp
 192 01ce 5B       		popq	%rbx
 193 01cf 415C     		popq	%r12
 194 01d1 5D       		popq	%rbp
 195              	.LCFI2:
 196              		.cfi_def_cfa 7, 8
 197 01d2 C3       		ret
 198              		.cfi_endproc
 199              	.LFE21:
 201              		.section	.text.hmac_generate_passwd,"ax",@progbits
 202              		.globl	hmac_generate_passwd
 204              	hmac_generate_passwd:
 205              	.LFB22:
  91:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c **** 
  92:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c **** int hmac_generate_passwd(char *content, int contentlen, char *key, int keylen, unsigned char *buf, 
  93:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c **** {
 206              		.loc 1 93 1 is_stmt 1
 207              		.cfi_startproc
 208 0000 F30F1EFA 		endbr64
 209 0004 55       		pushq	%rbp
 210              	.LCFI3:
 211              		.cfi_def_cfa_offset 16
 212              		.cfi_offset 6, -16
 213 0005 4889E5   		movq	%rsp, %rbp
 214              	.LCFI4:
GAS LISTING /tmp/cctUR8tl.s 			page 7


 215              		.cfi_def_cfa_register 6
 216 0008 4883C480 		addq	$-128, %rsp
 217 000c 48897DA8 		movq	%rdi, -88(%rbp)
 218 0010 8975A4   		movl	%esi, -92(%rbp)
 219 0013 48895598 		movq	%rdx, -104(%rbp)
 220 0017 894DA0   		movl	%ecx, -96(%rbp)
 221 001a 4C894590 		movq	%r8, -112(%rbp)
 222 001e 44894D8C 		movl	%r9d, -116(%rbp)
 223              		.loc 1 93 1
 224 0022 64488B04 		movq	%fs:40, %rax
 224      25280000 
 224      00
 225 002b 488945F8 		movq	%rax, -8(%rbp)
 226 002f 31C0     		xorl	%eax, %eax
  94:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c ****     int ret = -1;
 227              		.loc 1 94 9
 228 0031 C745BCFF 		movl	$-1, -68(%rbp)
 228      FFFFFF
  95:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c ****     mbedtls_hmac_t hmac;
  96:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c ****     hmac.secret = (uint8_t *)key;
 229              		.loc 1 96 17
 230 0038 488B4598 		movq	-104(%rbp), %rax
 231 003c 488945C0 		movq	%rax, -64(%rbp)
  97:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c ****     hmac.secret_len = keylen;
 232              		.loc 1 97 21
 233 0040 8B45A0   		movl	-96(%rbp), %eax
 234 0043 4898     		cltq
 235 0045 488945D8 		movq	%rax, -40(%rbp)
  98:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c ****     hmac.input = (unsigned char *)content;
 236              		.loc 1 98 16
 237 0049 488B45A8 		movq	-88(%rbp), %rax
 238 004d 488945C8 		movq	%rax, -56(%rbp)
  99:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c ****     hmac.input_len = contentlen;
 239              		.loc 1 99 20
 240 0051 8B45A4   		movl	-92(%rbp), %eax
 241 0054 4898     		cltq
 242 0056 488945E0 		movq	%rax, -32(%rbp)
 100:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c ****     hmac.digest = (unsigned char *)buf;
 243              		.loc 1 100 17
 244 005a 488B4590 		movq	-112(%rbp), %rax
 245 005e 488945D0 		movq	%rax, -48(%rbp)
 101:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c ****     hmac.digest_len = buflen;
 246              		.loc 1 101 21
 247 0062 8B458C   		movl	-116(%rbp), %eax
 248 0065 4898     		cltq
 249 0067 488945E8 		movq	%rax, -24(%rbp)
 102:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c ****     hmac.hmac_type = MBEDTLS_MD_SHA256;
 250              		.loc 1 102 20
 251 006b C745F006 		movl	$6, -16(%rbp)
 251      000000
 103:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c **** 
 104:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c ****     ret = mbedtls_hmac_calc(&hmac);
 252              		.loc 1 104 11
 253 0072 488D45C0 		leaq	-64(%rbp), %rax
 254 0076 4889C7   		movq	%rax, %rdi
 255 0079 E8000000 		call	mbedtls_hmac_calc
 255      00
GAS LISTING /tmp/cctUR8tl.s 			page 8


 256 007e 8945BC   		movl	%eax, -68(%rbp)
 105:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c **** 
 106:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c ****     return ret;
 257              		.loc 1 106 12
 258 0081 8B45BC   		movl	-68(%rbp), %eax
 107:/home/xingli/share/LiteOS_Lab/oc/oc_mqtt/oc_mqtt_tiny_v5/hmac.c **** }
 259              		.loc 1 107 1
 260 0084 488B55F8 		movq	-8(%rbp), %rdx
 261 0088 64483314 		xorq	%fs:40, %rdx
 261      25280000 
 261      00
 262 0091 7405     		je	.L15
 263 0093 E8000000 		call	__stack_chk_fail@PLT
 263      00
 264              	.L15:
 265 0098 C9       		leave
 266              	.LCFI5:
 267              		.cfi_def_cfa 7, 8
 268 0099 C3       		ret
 269              		.cfi_endproc
 270              	.LFE22:
 272              		.section	.rodata.__FUNCTION__.5831,"a"
 273              		.align 16
 276              	__FUNCTION__.5831:
 277 0000 6D626564 		.string	"mbedtls_hmac_calc"
 277      746C735F 
 277      686D6163 
 277      5F63616C 
 277      6300
 278              		.text
 279              	.Letext0:
 280              		.file 2 "/usr/lib/gcc/x86_64-linux-gnu/9/include/stddef.h"
 281              		.file 3 "/usr/include/x86_64-linux-gnu/bits/types.h"
 282              		.file 4 "/usr/include/x86_64-linux-gnu/bits/stdint-uintn.h"
 283              		.file 5 "/usr/include/x86_64-linux-gnu/bits/types/struct_FILE.h"
 284              		.file 6 "/usr/include/x86_64-linux-gnu/bits/types/FILE.h"
 285              		.file 7 "/usr/include/stdio.h"
 286              		.file 8 "/usr/include/x86_64-linux-gnu/bits/sys_errlist.h"
 287              		.file 9 "/home/xingli/share/LiteOS_Lab/inc/link_log.h"
 288              		.file 10 "/home/xingli/share/LiteOS_Lab/network/dtls/mbedtls/mbedtls-2.16.2/include/mbedtls/md.h"
 289              		.file 11 "/home/xingli/share/LiteOS_Lab/network/dtls/mbedtls/mbedtls-2.16.2/include/mbedtls/md_int
 290              		.file 12 "/home/xingli/share/LiteOS_Lab/network/dtls/mbedtls/mbedtls-2.16.2/include/mbedtls/x509_c
 291              		.file 13 "/usr/include/time.h"
 292              		.file 14 "/home/xingli/share/LiteOS_Lab/network/dtls/mbedtls/mbedtls-2.16.2/include/mbedtls/platfo
 293              		.file 15 "/home/xingli/share/LiteOS_Lab/network/dtls/mbedtls/mbedtls-2.16.2/include/mbedtls/timing
 2309              		.section	.note.gnu.property,"a"
 2310              		.align 8
 2311 0000 04000000 		.long	 1f - 0f
 2312 0004 10000000 		.long	 4f - 1f
 2313 0008 05000000 		.long	 5
 2314              	0:
 2315 000c 474E5500 		.string	 "GNU"
 2316              	1:
 2317              		.align 8
 2318 0010 020000C0 		.long	 0xc0000002
 2319 0014 04000000 		.long	 3f - 2f
 2320              	2:
GAS LISTING /tmp/cctUR8tl.s 			page 9


 2321 0018 03000000 		.long	 0x3
 2322              	3:
 2323 001c 00000000 		.align 8
 2324              	4:
GAS LISTING /tmp/cctUR8tl.s 			page 10


DEFINED SYMBOLS
                            *ABS*:0000000000000000 hmac.c
     /tmp/cctUR8tl.s:11     .text.mbedtls_hmac_calc:0000000000000000 mbedtls_hmac_calc
     /tmp/cctUR8tl.s:276    .rodata.__FUNCTION__.5831:0000000000000000 __FUNCTION__.5831
     /tmp/cctUR8tl.s:204    .text.hmac_generate_passwd:0000000000000000 hmac_generate_passwd

UNDEFINED SYMBOLS
_GLOBAL_OFFSET_TABLE_
mbedtls_md_info_from_type
mbedtls_md_init
memset
mbedtls_md_setup
link_log_level_get
osal_sys_time
link_log_level_name
printf
stdout
fflush
mbedtls_md_hmac_starts
mbedtls_md_hmac_update
mbedtls_md_hmac_finish
mbedtls_md_free
__stack_chk_fail
