GAS LISTING /tmp/cciludvW.s 			page 1


   1              		.file	"link_string.c"
   2              		.text
   3              	.Ltext0:
   4              		.section	.text.string_to_arg,"ax",@progbits
   5              		.globl	string_to_arg
   7              	string_to_arg:
   8              	.LFB0:
   9              		.file 1 "/home/xingli/share/LiteOS_Lab/link_misc/link_string.c"
   1:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c **** /* ----------------------------------------------------------------------------
   2:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****  * Copyright (c) <2018>, <Huawei Technologies Co., Ltd>
   3:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****  * All rights reserved.
   4:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****  * Redistribution and use in source and binary forms, with or without modification,
   5:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****  * are permitted provided that the following conditions are met:
   6:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****  * 1. Redistributions of source code must retain the above copyright notice, this list of
   7:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****  * conditions and the following disclaimer.
   8:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****  * 2. Redistributions in binary form must reproduce the above copyright notice, this list
   9:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****  * of conditions and the following disclaimer in the documentation and/or other materials
  10:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****  * provided with the distribution.
  11:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****  * 3. Neither the name of the copyright holder nor the names of its contributors may be used
  12:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****  * to endorse or promote products derived from this software without specific prior written
  13:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****  * permission.
  14:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****  * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
  15:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****  * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  16:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****  * THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  17:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****  * PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR
  18:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****  * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  19:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****  * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  20:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****  * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;
  21:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****  * OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
  22:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****  * WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR
  23:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****  * OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF
  24:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****  * ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  25:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****  * --------------------------------------------------------------------------- */
  26:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c **** /* ----------------------------------------------------------------------------
  27:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****  * Notice of Export Control Law
  28:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****  * ===============================================
  29:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****  * Huawei LiteOS may be subject to applicable export control laws and regulations, which might
  30:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****  * include those applicable to Huawei LiteOS of U.S. and the country in which you are located.
  31:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****  * Import, export and usage of Huawei LiteOS in any manner by you shall be in compliance with such
  32:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****  * applicable export control laws and regulations.
  33:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****  * --------------------------------------------------------------------------- */
  34:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c **** 
  35:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c **** #include <stdint.h>
  36:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c **** #include <stddef.h>
  37:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c **** #include <string.h>
  38:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c **** 
  39:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c **** #include "osal.h"
  40:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c **** 
  41:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c **** // this function is used to format the char string to the argc mode
  42:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c **** // this function will changed the original string, used it carefully
  43:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c **** // return how many arguments has been
  44:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c **** int string_to_arg(int *argc, const char *argv[], char *string)
  45:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c **** {
  10              		.loc 1 45 1
  11              		.cfi_startproc
  12 0000 F30F1EFA 		endbr64
  13 0004 55       		pushq	%rbp
GAS LISTING /tmp/cciludvW.s 			page 2


  14              	.LCFI0:
  15              		.cfi_def_cfa_offset 16
  16              		.cfi_offset 6, -16
  17 0005 4889E5   		movq	%rsp, %rbp
  18              	.LCFI1:
  19              		.cfi_def_cfa_register 6
  20 0008 4883EC40 		subq	$64, %rsp
  21 000c 48897DD8 		movq	%rdi, -40(%rbp)
  22 0010 488975D0 		movq	%rsi, -48(%rbp)
  23 0014 488955C8 		movq	%rdx, -56(%rbp)
  24              		.loc 1 45 1
  25 0018 64488B04 		movq	%fs:40, %rax
  25      25280000 
  25      00
  26 0021 488945F8 		movq	%rax, -8(%rbp)
  27 0025 31C0     		xorl	%eax, %eax
  46:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****     int argvlen = 0;
  28              		.loc 1 46 9
  29 0027 C745E800 		movl	$0, -24(%rbp)
  29      000000
  47:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****     int paramnum = 0;
  30              		.loc 1 47 9
  31 002e C745E400 		movl	$0, -28(%rbp)
  31      000000
  48:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****     char *tmp = NULL;
  32              		.loc 1 48 11
  33 0035 48C745F0 		movq	$0, -16(%rbp)
  33      00000000 
  49:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****     char bak;
  50:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****     int len;
  51:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c **** 
  52:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****     argvlen = *argc;
  34              		.loc 1 52 13
  35 003d 488B45D8 		movq	-40(%rbp), %rax
  36 0041 8B00     		movl	(%rax), %eax
  37 0043 8945E8   		movl	%eax, -24(%rbp)
  53:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****     *argc = paramnum;
  38              		.loc 1 53 11
  39 0046 488B45D8 		movq	-40(%rbp), %rax
  40 004a 8B55E4   		movl	-28(%rbp), %edx
  41 004d 8910     		movl	%edx, (%rax)
  54:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****     if (NULL == string) {
  42              		.loc 1 54 8
  43 004f 48837DC8 		cmpq	$0, -56(%rbp)
  43      00
  44 0054 7508     		jne	.L2
  55:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****         return paramnum;
  45              		.loc 1 55 16
  46 0056 8B45E4   		movl	-28(%rbp), %eax
  47 0059 E9B70000 		jmp	.L3
  47      00
  48              	.L2:
  56:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****     }
  57:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c **** 
  58:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****     // use the '\0' to replace the ' '
  59:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****     len = strlen(string);
  49              		.loc 1 59 11
GAS LISTING /tmp/cciludvW.s 			page 3


  50 005e 488B45C8 		movq	-56(%rbp), %rax
  51 0062 4889C7   		movq	%rax, %rdi
  52 0065 E8000000 		call	strlen@PLT
  52      00
  53              		.loc 1 59 9
  54 006a 8945EC   		movl	%eax, -20(%rbp)
  60:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****     tmp = string;
  55              		.loc 1 60 9
  56 006d 488B45C8 		movq	-56(%rbp), %rax
  57 0071 488945F0 		movq	%rax, -16(%rbp)
  61:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****     while (tmp < (string + len)) {
  58              		.loc 1 61 11
  59 0075 EB17     		jmp	.L4
  60              	.L6:
  62:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****         if (*tmp == ' ') {
  61              		.loc 1 62 13
  62 0077 488B45F0 		movq	-16(%rbp), %rax
  63 007b 0FB600   		movzbl	(%rax), %eax
  64              		.loc 1 62 12
  65 007e 3C20     		cmpb	$32, %al
  66 0080 7507     		jne	.L5
  63:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****             *tmp = '\0';
  67              		.loc 1 63 18
  68 0082 488B45F0 		movq	-16(%rbp), %rax
  69 0086 C60000   		movb	$0, (%rax)
  70              	.L5:
  64:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****         }
  65:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****         tmp++;
  71              		.loc 1 65 12
  72 0089 488345F0 		addq	$1, -16(%rbp)
  72      01
  73              	.L4:
  61:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****         if (*tmp == ' ') {
  74              		.loc 1 61 26
  75 008e 8B45EC   		movl	-20(%rbp), %eax
  76 0091 4863D0   		movslq	%eax, %rdx
  77 0094 488B45C8 		movq	-56(%rbp), %rax
  78 0098 4801D0   		addq	%rdx, %rax
  61:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****         if (*tmp == ' ') {
  79              		.loc 1 61 11
  80 009b 483945F0 		cmpq	%rax, -16(%rbp)
  81 009f 72D6     		jb	.L6
  66:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****     }
  67:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****     bak = '\0';
  82              		.loc 1 67 9
  83 00a1 C645E300 		movb	$0, -29(%rbp)
  68:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****     tmp = string;
  84              		.loc 1 68 9
  85 00a5 488B45C8 		movq	-56(%rbp), %rax
  86 00a9 488945F0 		movq	%rax, -16(%rbp)
  69:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****     while (tmp < (string + len)) {
  87              		.loc 1 69 11
  88 00ad EB47     		jmp	.L7
  89              	.L9:
  70:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****         if ((*tmp != '\0') && (bak == '\0')) {
  90              		.loc 1 70 14
  91 00af 488B45F0 		movq	-16(%rbp), %rax
GAS LISTING /tmp/cciludvW.s 			page 4


  92 00b3 0FB600   		movzbl	(%rax), %eax
  93              		.loc 1 70 12
  94 00b6 84C0     		testb	%al, %al
  95 00b8 742D     		je	.L8
  96              		.loc 1 70 28 discriminator 1
  97 00ba 807DE300 		cmpb	$0, -29(%rbp)
  98 00be 7527     		jne	.L8
  71:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****             if (paramnum < argvlen) {
  99              		.loc 1 71 16
 100 00c0 8B45E4   		movl	-28(%rbp), %eax
 101 00c3 3B45E8   		cmpl	-24(%rbp), %eax
 102 00c6 7D1F     		jge	.L8
  72:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****                 argv[paramnum] = tmp;
 103              		.loc 1 72 21
 104 00c8 8B45E4   		movl	-28(%rbp), %eax
 105 00cb 4898     		cltq
 106 00cd 488D14C5 		leaq	0(,%rax,8), %rdx
 106      00000000 
 107 00d5 488B45D0 		movq	-48(%rbp), %rax
 108 00d9 4801C2   		addq	%rax, %rdx
 109              		.loc 1 72 32
 110 00dc 488B45F0 		movq	-16(%rbp), %rax
 111 00e0 488902   		movq	%rax, (%rdx)
  73:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****                 paramnum++;
 112              		.loc 1 73 25
 113 00e3 8345E401 		addl	$1, -28(%rbp)
 114              	.L8:
  74:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****             }
  75:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****         }
  76:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****         bak = *tmp;
 115              		.loc 1 76 13
 116 00e7 488B45F0 		movq	-16(%rbp), %rax
 117 00eb 0FB600   		movzbl	(%rax), %eax
 118 00ee 8845E3   		movb	%al, -29(%rbp)
  77:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****         tmp++;
 119              		.loc 1 77 12
 120 00f1 488345F0 		addq	$1, -16(%rbp)
 120      01
 121              	.L7:
  69:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****         if ((*tmp != '\0') && (bak == '\0')) {
 122              		.loc 1 69 26
 123 00f6 8B45EC   		movl	-20(%rbp), %eax
 124 00f9 4863D0   		movslq	%eax, %rdx
 125 00fc 488B45C8 		movq	-56(%rbp), %rax
 126 0100 4801D0   		addq	%rdx, %rax
  69:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****         if ((*tmp != '\0') && (bak == '\0')) {
 127              		.loc 1 69 11
 128 0103 483945F0 		cmpq	%rax, -16(%rbp)
 129 0107 72A6     		jb	.L9
  78:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****     }
  79:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****     *argc = paramnum;
 130              		.loc 1 79 11
 131 0109 488B45D8 		movq	-40(%rbp), %rax
 132 010d 8B55E4   		movl	-28(%rbp), %edx
 133 0110 8910     		movl	%edx, (%rax)
  80:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c **** 
  81:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****     return paramnum;
GAS LISTING /tmp/cciludvW.s 			page 5


 134              		.loc 1 81 12
 135 0112 8B45E4   		movl	-28(%rbp), %eax
 136              	.L3:
  82:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c **** }
 137              		.loc 1 82 1
 138 0115 488B4DF8 		movq	-8(%rbp), %rcx
 139 0119 6448330C 		xorq	%fs:40, %rcx
 139      25280000 
 139      00
 140 0122 7405     		je	.L10
 141 0124 E8000000 		call	__stack_chk_fail@PLT
 141      00
 142              	.L10:
 143 0129 C9       		leave
 144              	.LCFI2:
 145              		.cfi_def_cfa 7, 8
 146 012a C3       		ret
 147              		.cfi_endproc
 148              	.LFE0:
 150              		.section	.text.osal_strdup,"ax",@progbits
 151              		.globl	osal_strdup
 153              	osal_strdup:
 154              	.LFB1:
  83:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c **** 
  84:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c **** char *osal_strdup(const char *ch)
  85:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c **** {
 155              		.loc 1 85 1
 156              		.cfi_startproc
 157 0000 F30F1EFA 		endbr64
 158 0004 55       		pushq	%rbp
 159              	.LCFI3:
 160              		.cfi_def_cfa_offset 16
 161              		.cfi_offset 6, -16
 162 0005 4889E5   		movq	%rsp, %rbp
 163              	.LCFI4:
 164              		.cfi_def_cfa_register 6
 165 0008 4883EC30 		subq	$48, %rsp
 166 000c 48897DD8 		movq	%rdi, -40(%rbp)
 167              		.loc 1 85 1
 168 0010 64488B04 		movq	%fs:40, %rax
 168      25280000 
 168      00
 169 0019 488945F8 		movq	%rax, -8(%rbp)
 170 001d 31C0     		xorl	%eax, %eax
  86:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****     char *copy;
  87:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****     size_t length;
  88:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c **** 
  89:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****     if (NULL == ch)
 171              		.loc 1 89 8
 172 001f 48837DD8 		cmpq	$0, -40(%rbp)
 172      00
 173 0024 7507     		jne	.L12
  90:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****         return NULL;
 174              		.loc 1 90 16
 175 0026 B8000000 		movl	$0, %eax
 175      00
 176 002b EB5B     		jmp	.L13
GAS LISTING /tmp/cciludvW.s 			page 6


 177              	.L12:
  91:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c **** 
  92:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****     length = strlen(ch);
 178              		.loc 1 92 14
 179 002d 488B45D8 		movq	-40(%rbp), %rax
 180 0031 4889C7   		movq	%rax, %rdi
 181 0034 E8000000 		call	strlen@PLT
 181      00
 182 0039 488945E8 		movq	%rax, -24(%rbp)
  93:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****     copy = (char *)osal_malloc(length + 1);
 183              		.loc 1 93 20
 184 003d 488B45E8 		movq	-24(%rbp), %rax
 185 0041 4883C001 		addq	$1, %rax
 186 0045 4889C7   		movq	%rax, %rdi
 187 0048 E8000000 		call	osal_malloc@PLT
 187      00
 188 004d 488945F0 		movq	%rax, -16(%rbp)
  94:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****     if (NULL == copy)
 189              		.loc 1 94 8
 190 0051 48837DF0 		cmpq	$0, -16(%rbp)
 190      00
 191 0056 7507     		jne	.L14
  95:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****         return NULL;
 192              		.loc 1 95 16
 193 0058 B8000000 		movl	$0, %eax
 193      00
 194 005d EB29     		jmp	.L13
 195              	.L14:
  96:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****     (void)strncpy(copy, ch, length);
 196              		.loc 1 96 11
 197 005f 488B55E8 		movq	-24(%rbp), %rdx
 198 0063 488B4DD8 		movq	-40(%rbp), %rcx
 199 0067 488B45F0 		movq	-16(%rbp), %rax
 200 006b 4889CE   		movq	%rcx, %rsi
 201 006e 4889C7   		movq	%rax, %rdi
 202 0071 E8000000 		call	strncpy@PLT
 202      00
  97:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****     copy[length] = '\0';
 203              		.loc 1 97 9
 204 0076 488B55F0 		movq	-16(%rbp), %rdx
 205 007a 488B45E8 		movq	-24(%rbp), %rax
 206 007e 4801D0   		addq	%rdx, %rax
 207              		.loc 1 97 18
 208 0081 C60000   		movb	$0, (%rax)
  98:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c **** 
  99:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****     return copy;
 209              		.loc 1 99 12
 210 0084 488B45F0 		movq	-16(%rbp), %rax
 211              	.L13:
 100:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c **** }
 212              		.loc 1 100 1
 213 0088 488B75F8 		movq	-8(%rbp), %rsi
 214 008c 64483334 		xorq	%fs:40, %rsi
 214      25280000 
 214      00
 215 0095 7405     		je	.L15
 216 0097 E8000000 		call	__stack_chk_fail@PLT
GAS LISTING /tmp/cciludvW.s 			page 7


 216      00
 217              	.L15:
 218 009c C9       		leave
 219              	.LCFI5:
 220              		.cfi_def_cfa 7, 8
 221 009d C3       		ret
 222              		.cfi_endproc
 223              	.LFE1:
 225              		.section	.text.osal_strcat,"ax",@progbits
 226              		.globl	osal_strcat
 228              	osal_strcat:
 229              	.LFB2:
 101:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c **** 
 102:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c **** char *osal_strcat(char *str[])
 103:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c **** {
 230              		.loc 1 103 1
 231              		.cfi_startproc
 232 0000 F30F1EFA 		endbr64
 233 0004 55       		pushq	%rbp
 234              	.LCFI6:
 235              		.cfi_def_cfa_offset 16
 236              		.cfi_offset 6, -16
 237 0005 4889E5   		movq	%rsp, %rbp
 238              	.LCFI7:
 239              		.cfi_def_cfa_register 6
 240 0008 4883EC30 		subq	$48, %rsp
 241 000c 48897DD8 		movq	%rdi, -40(%rbp)
 242              		.loc 1 103 1
 243 0010 64488B04 		movq	%fs:40, %rax
 243      25280000 
 243      00
 244 0019 488945F8 		movq	%rax, -8(%rbp)
 245 001d 31C0     		xorl	%eax, %eax
 104:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****     char *ret = NULL;
 246              		.loc 1 104 11
 247 001f 48C745F0 		movq	$0, -16(%rbp)
 247      00000000 
 105:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****     int str_tnum = 0;
 248              		.loc 1 105 9
 249 0027 C745E000 		movl	$0, -32(%rbp)
 249      000000
 106:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****     int str_tlen = 0;
 250              		.loc 1 106 9
 251 002e C745E400 		movl	$0, -28(%rbp)
 251      000000
 107:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****     int str_off = 0;
 252              		.loc 1 107 9
 253 0035 C745E800 		movl	$0, -24(%rbp)
 253      000000
 108:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****     int i = 0;
 254              		.loc 1 108 9
 255 003c C745EC00 		movl	$0, -20(%rbp)
 255      000000
 109:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c **** 
 110:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****     if (NULL == str) {
 256              		.loc 1 110 8
 257 0043 48837DD8 		cmpq	$0, -40(%rbp)
GAS LISTING /tmp/cciludvW.s 			page 8


 257      00
 258 0048 753A     		jne	.L19
 111:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****         return ret;
 259              		.loc 1 111 16
 260 004a 488B45F0 		movq	-16(%rbp), %rax
 261 004e E9100100 		jmp	.L18
 261      00
 262              	.L20:
 112:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****     }
 113:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c **** 
 114:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****     while (NULL != str[i]) {
 115:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****         str_tlen += strlen(str[i]);
 263              		.loc 1 115 31
 264 0053 8B45EC   		movl	-20(%rbp), %eax
 265 0056 4898     		cltq
 266 0058 488D14C5 		leaq	0(,%rax,8), %rdx
 266      00000000 
 267 0060 488B45D8 		movq	-40(%rbp), %rax
 268 0064 4801D0   		addq	%rdx, %rax
 269              		.loc 1 115 21
 270 0067 488B00   		movq	(%rax), %rax
 271 006a 4889C7   		movq	%rax, %rdi
 272 006d E8000000 		call	strlen@PLT
 272      00
 273              		.loc 1 115 18
 274 0072 89C2     		movl	%eax, %edx
 275 0074 8B45E4   		movl	-28(%rbp), %eax
 276 0077 01D0     		addl	%edx, %eax
 277 0079 8945E4   		movl	%eax, -28(%rbp)
 116:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****         str_tnum++;
 278              		.loc 1 116 17
 279 007c 8345E001 		addl	$1, -32(%rbp)
 117:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****         i++;
 280              		.loc 1 117 10
 281 0080 8345EC01 		addl	$1, -20(%rbp)
 282              	.L19:
 114:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****         str_tlen += strlen(str[i]);
 283              		.loc 1 114 23
 284 0084 8B45EC   		movl	-20(%rbp), %eax
 285 0087 4898     		cltq
 286 0089 488D14C5 		leaq	0(,%rax,8), %rdx
 286      00000000 
 287 0091 488B45D8 		movq	-40(%rbp), %rax
 288 0095 4801D0   		addq	%rdx, %rax
 289 0098 488B00   		movq	(%rax), %rax
 114:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****         str_tlen += strlen(str[i]);
 290              		.loc 1 114 11
 291 009b 4885C0   		testq	%rax, %rax
 292 009e 75B3     		jne	.L20
 118:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****     }
 119:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c **** 
 120:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****     ret = osal_malloc(str_tlen);
 293              		.loc 1 120 11
 294 00a0 8B45E4   		movl	-28(%rbp), %eax
 295 00a3 4898     		cltq
 296 00a5 4889C7   		movq	%rax, %rdi
 297 00a8 E8000000 		call	osal_malloc@PLT
GAS LISTING /tmp/cciludvW.s 			page 9


 297      00
 298 00ad 488945F0 		movq	%rax, -16(%rbp)
 121:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****     if (NULL != ret) {
 299              		.loc 1 121 8
 300 00b1 48837DF0 		cmpq	$0, -16(%rbp)
 300      00
 301 00b6 0F84A300 		je	.L21
 301      0000
 122:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****         for (i = 0; i < str_tnum; i++) {
 302              		.loc 1 122 16
 303 00bc C745EC00 		movl	$0, -20(%rbp)
 303      000000
 304              		.loc 1 122 9
 305 00c3 EB7E     		jmp	.L22
 306              	.L23:
 123:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****             (void)memcpy(ret + str_off, str[i], strlen(str[i]));
 307              		.loc 1 123 59 discriminator 3
 308 00c5 8B45EC   		movl	-20(%rbp), %eax
 309 00c8 4898     		cltq
 310 00ca 488D14C5 		leaq	0(,%rax,8), %rdx
 310      00000000 
 311 00d2 488B45D8 		movq	-40(%rbp), %rax
 312 00d6 4801D0   		addq	%rdx, %rax
 313              		.loc 1 123 19 discriminator 3
 314 00d9 488B00   		movq	(%rax), %rax
 315 00dc 4889C7   		movq	%rax, %rdi
 316 00df E8000000 		call	strlen@PLT
 316      00
 317 00e4 4889C2   		movq	%rax, %rdx
 318              		.loc 1 123 44 discriminator 3
 319 00e7 8B45EC   		movl	-20(%rbp), %eax
 320 00ea 4898     		cltq
 321 00ec 488D0CC5 		leaq	0(,%rax,8), %rcx
 321      00000000 
 322 00f4 488B45D8 		movq	-40(%rbp), %rax
 323 00f8 4801C8   		addq	%rcx, %rax
 324              		.loc 1 123 19 discriminator 3
 325 00fb 488B00   		movq	(%rax), %rax
 326 00fe 8B4DE8   		movl	-24(%rbp), %ecx
 327 0101 4863F1   		movslq	%ecx, %rsi
 328              		.loc 1 123 30 discriminator 3
 329 0104 488B4DF0 		movq	-16(%rbp), %rcx
 330 0108 4801F1   		addq	%rsi, %rcx
 331              		.loc 1 123 19 discriminator 3
 332 010b 4889C6   		movq	%rax, %rsi
 333 010e 4889CF   		movq	%rcx, %rdi
 334 0111 E8000000 		call	memcpy@PLT
 334      00
 124:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****             str_off += strlen(str[i]);
 335              		.loc 1 124 34 discriminator 3
 336 0116 8B45EC   		movl	-20(%rbp), %eax
 337 0119 4898     		cltq
 338 011b 488D14C5 		leaq	0(,%rax,8), %rdx
 338      00000000 
 339 0123 488B45D8 		movq	-40(%rbp), %rax
 340 0127 4801D0   		addq	%rdx, %rax
 341              		.loc 1 124 24 discriminator 3
GAS LISTING /tmp/cciludvW.s 			page 10


 342 012a 488B00   		movq	(%rax), %rax
 343 012d 4889C7   		movq	%rax, %rdi
 344 0130 E8000000 		call	strlen@PLT
 344      00
 345              		.loc 1 124 21 discriminator 3
 346 0135 89C2     		movl	%eax, %edx
 347 0137 8B45E8   		movl	-24(%rbp), %eax
 348 013a 01D0     		addl	%edx, %eax
 349 013c 8945E8   		movl	%eax, -24(%rbp)
 122:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****         for (i = 0; i < str_tnum; i++) {
 350              		.loc 1 122 36 discriminator 3
 351 013f 8345EC01 		addl	$1, -20(%rbp)
 352              	.L22:
 122:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****         for (i = 0; i < str_tnum; i++) {
 353              		.loc 1 122 9 discriminator 1
 354 0143 8B45EC   		movl	-20(%rbp), %eax
 355 0146 3B45E0   		cmpl	-32(%rbp), %eax
 356 0149 0F8C76FF 		jl	.L23
 356      FFFF
 125:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****         }
 126:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****         ret[str_off] = '\0';
 357              		.loc 1 126 12
 358 014f 8B45E8   		movl	-24(%rbp), %eax
 359 0152 4863D0   		movslq	%eax, %rdx
 360 0155 488B45F0 		movq	-16(%rbp), %rax
 361 0159 4801D0   		addq	%rdx, %rax
 362              		.loc 1 126 22
 363 015c C60000   		movb	$0, (%rax)
 364              	.L21:
 127:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****     }
 128:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c **** 
 129:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****     return ret;
 365              		.loc 1 129 12
 366 015f 488B45F0 		movq	-16(%rbp), %rax
 367              	.L18:
 130:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c **** }
 368              		.loc 1 130 1
 369 0163 488B75F8 		movq	-8(%rbp), %rsi
 370 0167 64483334 		xorq	%fs:40, %rsi
 370      25280000 
 370      00
 371 0170 7405     		je	.L24
 372 0172 E8000000 		call	__stack_chk_fail@PLT
 372      00
 373              	.L24:
 374 0177 C9       		leave
 375              	.LCFI8:
 376              		.cfi_def_cfa 7, 8
 377 0178 C3       		ret
 378              		.cfi_endproc
 379              	.LFE2:
 381              		.section	.text.hexstr2byte,"ax",@progbits
 382              		.globl	hexstr2byte
 384              	hexstr2byte:
 385              	.LFB3:
 131:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c **** 
 132:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c **** /*
GAS LISTING /tmp/cciludvW.s 			page 11


 133:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c **** int hexstr2byte(const char *bufin, int len, char *bufout)
 134:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c **** {
 135:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****     int i = 0;
 136:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****     unsigned char tmp2 = 0x0;
 137:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****     unsigned int tmp = 0;
 138:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****     char cc;
 139:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c **** 
 140:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****     if (NULL == bufin || len <= 0 || NULL == bufout)
 141:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****     {
 142:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****         return -1;
 143:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****     }
 144:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****     for(i = 0; i < len; i = i+2)
 145:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****     {
 146:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****         tmp2 =  (unsigned char )bufin[i];
 147:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****         tmp2 =  tmp2 <= '9'?(unsigned char)(unsigned int)(tmp2-0x30):(unsigned char)(unsigned int)(
 148:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****         cc = bufin[i+1];
 149:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****         tmp =  (unsigned int)(unsigned char)cc;
 150:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****         tmp =  tmp <= '9'?(unsigned int)(tmp-0x30):(unsigned int)(tmp-0x37);
 151:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****         bufout[i/2] =(tmp2<<4)|(tmp&0x0F);
 152:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****     }
 153:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****     return 0;
 154:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c **** }
 155:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c **** 
 156:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c **** */
 157:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c **** 
 158:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c **** int hexstr2byte(const char *buf, int len, char *bufout)
 159:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c **** {
 386              		.loc 1 159 1
 387              		.cfi_startproc
 388 0000 F30F1EFA 		endbr64
 389 0004 55       		pushq	%rbp
 390              	.LCFI9:
 391              		.cfi_def_cfa_offset 16
 392              		.cfi_offset 6, -16
 393 0005 4889E5   		movq	%rsp, %rbp
 394              	.LCFI10:
 395              		.cfi_def_cfa_register 6
 396 0008 4883EC40 		subq	$64, %rsp
 397 000c 48897DD8 		movq	%rdi, -40(%rbp)
 398 0010 8975D4   		movl	%esi, -44(%rbp)
 399 0013 488955C8 		movq	%rdx, -56(%rbp)
 400              		.loc 1 159 1
 401 0017 64488B04 		movq	%fs:40, %rax
 401      25280000 
 401      00
 402 0020 488945F8 		movq	%rax, -8(%rbp)
 403 0024 31C0     		xorl	%eax, %eax
 160:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****     int ret = -1;
 404              		.loc 1 160 9
 405 0026 C745F0FF 		movl	$-1, -16(%rbp)
 405      FFFFFF
 161:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****     int i = 0;
 406              		.loc 1 161 9
 407 002d C745F400 		movl	$0, -12(%rbp)
 407      000000
 162:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****     uint8_t low;
 163:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****     uint8_t high;
GAS LISTING /tmp/cciludvW.s 			page 12


 164:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c **** 
 165:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****     if (NULL == buf || len <= 0 || NULL == bufout) {
 408              		.loc 1 165 8
 409 0034 48837DD8 		cmpq	$0, -40(%rbp)
 409      00
 410 0039 740D     		je	.L26
 411              		.loc 1 165 21 discriminator 1
 412 003b 837DD400 		cmpl	$0, -44(%rbp)
 413 003f 7E07     		jle	.L26
 414              		.loc 1 165 33 discriminator 2
 415 0041 48837DC8 		cmpq	$0, -56(%rbp)
 415      00
 416 0046 7508     		jne	.L27
 417              	.L26:
 166:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****         return ret;
 418              		.loc 1 166 16
 419 0048 8B45F0   		movl	-16(%rbp), %eax
 420 004b E90A0200 		jmp	.L28
 420      00
 421              	.L27:
 167:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****     }
 168:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c **** 
 169:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****     ret = 0;
 422              		.loc 1 169 9
 423 0050 C745F000 		movl	$0, -16(%rbp)
 423      000000
 170:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****     for (i = 0; i < len; i = i + 2) {
 424              		.loc 1 170 12
 425 0057 C745F400 		movl	$0, -12(%rbp)
 425      000000
 426              		.loc 1 170 5
 427 005e E9E80100 		jmp	.L29
 427      00
 428              	.L39:
 171:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****         if (((buf[i]) >= '0') && (buf[i] <= '9')) {
 429              		.loc 1 171 18
 430 0063 8B45F4   		movl	-12(%rbp), %eax
 431 0066 4863D0   		movslq	%eax, %rdx
 432 0069 488B45D8 		movq	-40(%rbp), %rax
 433 006d 4801D0   		addq	%rdx, %rax
 434 0070 0FB600   		movzbl	(%rax), %eax
 435              		.loc 1 171 12
 436 0073 3C2F     		cmpb	$47, %al
 437 0075 7E2F     		jle	.L30
 438              		.loc 1 171 38 discriminator 1
 439 0077 8B45F4   		movl	-12(%rbp), %eax
 440 007a 4863D0   		movslq	%eax, %rdx
 441 007d 488B45D8 		movq	-40(%rbp), %rax
 442 0081 4801D0   		addq	%rdx, %rax
 443 0084 0FB600   		movzbl	(%rax), %eax
 444              		.loc 1 171 31 discriminator 1
 445 0087 3C39     		cmpb	$57, %al
 446 0089 7F1B     		jg	.L30
 172:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****             high = (uint8_t)(buf[i] - '0');
 447              		.loc 1 172 33
 448 008b 8B45F4   		movl	-12(%rbp), %eax
 449 008e 4863D0   		movslq	%eax, %rdx
GAS LISTING /tmp/cciludvW.s 			page 13


 450 0091 488B45D8 		movq	-40(%rbp), %rax
 451 0095 4801D0   		addq	%rdx, %rax
 452 0098 0FB600   		movzbl	(%rax), %eax
 453              		.loc 1 172 18
 454 009b 83E830   		subl	$48, %eax
 455 009e 8845EF   		movb	%al, -17(%rbp)
 456 00a1 E98C0000 		jmp	.L31
 456      00
 457              	.L30:
 173:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****         } else if ((buf[i] >= 'A') && (buf[i] <= 'F')) {
 458              		.loc 1 173 24
 459 00a6 8B45F4   		movl	-12(%rbp), %eax
 460 00a9 4863D0   		movslq	%eax, %rdx
 461 00ac 488B45D8 		movq	-40(%rbp), %rax
 462 00b0 4801D0   		addq	%rdx, %rax
 463 00b3 0FB600   		movzbl	(%rax), %eax
 464              		.loc 1 173 19
 465 00b6 3C40     		cmpb	$64, %al
 466 00b8 7E2C     		jle	.L32
 467              		.loc 1 173 43 discriminator 1
 468 00ba 8B45F4   		movl	-12(%rbp), %eax
 469 00bd 4863D0   		movslq	%eax, %rdx
 470 00c0 488B45D8 		movq	-40(%rbp), %rax
 471 00c4 4801D0   		addq	%rdx, %rax
 472 00c7 0FB600   		movzbl	(%rax), %eax
 473              		.loc 1 173 36 discriminator 1
 474 00ca 3C46     		cmpb	$70, %al
 475 00cc 7F18     		jg	.L32
 174:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****             high = (uint8_t)(buf[i] - 'A') + 10;
 476              		.loc 1 174 33
 477 00ce 8B45F4   		movl	-12(%rbp), %eax
 478 00d1 4863D0   		movslq	%eax, %rdx
 479 00d4 488B45D8 		movq	-40(%rbp), %rax
 480 00d8 4801D0   		addq	%rdx, %rax
 481 00db 0FB600   		movzbl	(%rax), %eax
 482              		.loc 1 174 18
 483 00de 83E837   		subl	$55, %eax
 484 00e1 8845EF   		movb	%al, -17(%rbp)
 485 00e4 EB4C     		jmp	.L31
 486              	.L32:
 175:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****         } else if ((buf[i] >= 'a') && (buf[i] <= 'f')) {
 487              		.loc 1 175 24
 488 00e6 8B45F4   		movl	-12(%rbp), %eax
 489 00e9 4863D0   		movslq	%eax, %rdx
 490 00ec 488B45D8 		movq	-40(%rbp), %rax
 491 00f0 4801D0   		addq	%rdx, %rax
 492 00f3 0FB600   		movzbl	(%rax), %eax
 493              		.loc 1 175 19
 494 00f6 3C60     		cmpb	$96, %al
 495 00f8 7E2C     		jle	.L33
 496              		.loc 1 175 43 discriminator 1
 497 00fa 8B45F4   		movl	-12(%rbp), %eax
 498 00fd 4863D0   		movslq	%eax, %rdx
 499 0100 488B45D8 		movq	-40(%rbp), %rax
 500 0104 4801D0   		addq	%rdx, %rax
 501 0107 0FB600   		movzbl	(%rax), %eax
 502              		.loc 1 175 36 discriminator 1
GAS LISTING /tmp/cciludvW.s 			page 14


 503 010a 3C66     		cmpb	$102, %al
 504 010c 7F18     		jg	.L33
 176:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****             high = (uint8_t)(buf[i] - 'a') + 10;
 505              		.loc 1 176 33
 506 010e 8B45F4   		movl	-12(%rbp), %eax
 507 0111 4863D0   		movslq	%eax, %rdx
 508 0114 488B45D8 		movq	-40(%rbp), %rax
 509 0118 4801D0   		addq	%rdx, %rax
 510 011b 0FB600   		movzbl	(%rax), %eax
 511              		.loc 1 176 18
 512 011e 83E857   		subl	$87, %eax
 513 0121 8845EF   		movb	%al, -17(%rbp)
 514 0124 EB0C     		jmp	.L31
 515              	.L33:
 177:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****         } else {
 178:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****             ret = -1;
 516              		.loc 1 178 17
 517 0126 C745F0FF 		movl	$-1, -16(%rbp)
 517      FFFFFF
 179:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****             break;
 518              		.loc 1 179 13
 519 012d E9250100 		jmp	.L34
 519      00
 520              	.L31:
 180:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****         }
 181:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c **** 
 182:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****         if (((buf[i + 1]) >= '0') && (buf[i + 1] <= '9')) {
 521              		.loc 1 182 18
 522 0132 8B45F4   		movl	-12(%rbp), %eax
 523 0135 4898     		cltq
 524 0137 488D5001 		leaq	1(%rax), %rdx
 525 013b 488B45D8 		movq	-40(%rbp), %rax
 526 013f 4801D0   		addq	%rdx, %rax
 527 0142 0FB600   		movzbl	(%rax), %eax
 528              		.loc 1 182 12
 529 0145 3C2F     		cmpb	$47, %al
 530 0147 7E35     		jle	.L35
 531              		.loc 1 182 42 discriminator 1
 532 0149 8B45F4   		movl	-12(%rbp), %eax
 533 014c 4898     		cltq
 534 014e 488D5001 		leaq	1(%rax), %rdx
 535 0152 488B45D8 		movq	-40(%rbp), %rax
 536 0156 4801D0   		addq	%rdx, %rax
 537 0159 0FB600   		movzbl	(%rax), %eax
 538              		.loc 1 182 35 discriminator 1
 539 015c 3C39     		cmpb	$57, %al
 540 015e 7F1E     		jg	.L35
 183:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****             low = (uint8_t)(buf[i + 1] - '0');
 541              		.loc 1 183 32
 542 0160 8B45F4   		movl	-12(%rbp), %eax
 543 0163 4898     		cltq
 544 0165 488D5001 		leaq	1(%rax), %rdx
 545 0169 488B45D8 		movq	-40(%rbp), %rax
 546 016d 4801D0   		addq	%rdx, %rax
 547 0170 0FB600   		movzbl	(%rax), %eax
 548              		.loc 1 183 17
 549 0173 83E830   		subl	$48, %eax
GAS LISTING /tmp/cciludvW.s 			page 15


 550 0176 8845EE   		movb	%al, -18(%rbp)
 551 0179 E99B0000 		jmp	.L36
 551      00
 552              	.L35:
 184:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****         } else if ((buf[i + 1] >= 'A') && (buf[i + 1] <= 'F')) {
 553              		.loc 1 184 24
 554 017e 8B45F4   		movl	-12(%rbp), %eax
 555 0181 4898     		cltq
 556 0183 488D5001 		leaq	1(%rax), %rdx
 557 0187 488B45D8 		movq	-40(%rbp), %rax
 558 018b 4801D0   		addq	%rdx, %rax
 559 018e 0FB600   		movzbl	(%rax), %eax
 560              		.loc 1 184 19
 561 0191 3C40     		cmpb	$64, %al
 562 0193 7E32     		jle	.L37
 563              		.loc 1 184 47 discriminator 1
 564 0195 8B45F4   		movl	-12(%rbp), %eax
 565 0198 4898     		cltq
 566 019a 488D5001 		leaq	1(%rax), %rdx
 567 019e 488B45D8 		movq	-40(%rbp), %rax
 568 01a2 4801D0   		addq	%rdx, %rax
 569 01a5 0FB600   		movzbl	(%rax), %eax
 570              		.loc 1 184 40 discriminator 1
 571 01a8 3C46     		cmpb	$70, %al
 572 01aa 7F1B     		jg	.L37
 185:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****             low = (uint8_t)(buf[i + 1] - 'A') + 10;
 573              		.loc 1 185 32
 574 01ac 8B45F4   		movl	-12(%rbp), %eax
 575 01af 4898     		cltq
 576 01b1 488D5001 		leaq	1(%rax), %rdx
 577 01b5 488B45D8 		movq	-40(%rbp), %rax
 578 01b9 4801D0   		addq	%rdx, %rax
 579 01bc 0FB600   		movzbl	(%rax), %eax
 580              		.loc 1 185 17
 581 01bf 83E837   		subl	$55, %eax
 582 01c2 8845EE   		movb	%al, -18(%rbp)
 583 01c5 EB52     		jmp	.L36
 584              	.L37:
 186:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****         } else if ((buf[i + 1] >= 'a') && (buf[i + 1] <= 'f')) {
 585              		.loc 1 186 24
 586 01c7 8B45F4   		movl	-12(%rbp), %eax
 587 01ca 4898     		cltq
 588 01cc 488D5001 		leaq	1(%rax), %rdx
 589 01d0 488B45D8 		movq	-40(%rbp), %rax
 590 01d4 4801D0   		addq	%rdx, %rax
 591 01d7 0FB600   		movzbl	(%rax), %eax
 592              		.loc 1 186 19
 593 01da 3C60     		cmpb	$96, %al
 594 01dc 7E32     		jle	.L38
 595              		.loc 1 186 47 discriminator 1
 596 01de 8B45F4   		movl	-12(%rbp), %eax
 597 01e1 4898     		cltq
 598 01e3 488D5001 		leaq	1(%rax), %rdx
 599 01e7 488B45D8 		movq	-40(%rbp), %rax
 600 01eb 4801D0   		addq	%rdx, %rax
 601 01ee 0FB600   		movzbl	(%rax), %eax
 602              		.loc 1 186 40 discriminator 1
GAS LISTING /tmp/cciludvW.s 			page 16


 603 01f1 3C66     		cmpb	$102, %al
 604 01f3 7F1B     		jg	.L38
 187:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****             low = (uint8_t)(buf[i + 1] - 'a') + 10;
 605              		.loc 1 187 32
 606 01f5 8B45F4   		movl	-12(%rbp), %eax
 607 01f8 4898     		cltq
 608 01fa 488D5001 		leaq	1(%rax), %rdx
 609 01fe 488B45D8 		movq	-40(%rbp), %rax
 610 0202 4801D0   		addq	%rdx, %rax
 611 0205 0FB600   		movzbl	(%rax), %eax
 612              		.loc 1 187 17
 613 0208 83E857   		subl	$87, %eax
 614 020b 8845EE   		movb	%al, -18(%rbp)
 615 020e EB09     		jmp	.L36
 616              	.L38:
 188:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****         } else {
 189:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****             ret = -1;
 617              		.loc 1 189 17
 618 0210 C745F0FF 		movl	$-1, -16(%rbp)
 618      FFFFFF
 190:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****             break;
 619              		.loc 1 190 13
 620 0217 EB3E     		jmp	.L34
 621              	.L36:
 191:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****         }
 192:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c **** 
 193:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****         bufout[i / 2] = (char)((high << 4) | (low & 0x0F));
 622              		.loc 1 193 38 discriminator 2
 623 0219 0FB645EF 		movzbl	-17(%rbp), %eax
 624 021d C1E004   		sall	$4, %eax
 625              		.loc 1 193 25 discriminator 2
 626 0220 89C6     		movl	%eax, %esi
 627              		.loc 1 193 51 discriminator 2
 628 0222 0FB645EE 		movzbl	-18(%rbp), %eax
 629 0226 83E00F   		andl	$15, %eax
 630 0229 89C1     		movl	%eax, %ecx
 631              		.loc 1 193 18 discriminator 2
 632 022b 8B45F4   		movl	-12(%rbp), %eax
 633 022e 89C2     		movl	%eax, %edx
 634 0230 C1EA1F   		shrl	$31, %edx
 635 0233 01D0     		addl	%edx, %eax
 636 0235 D1F8     		sarl	%eax
 637 0237 4863D0   		movslq	%eax, %rdx
 638              		.loc 1 193 15 discriminator 2
 639 023a 488B45C8 		movq	-56(%rbp), %rax
 640 023e 4801D0   		addq	%rdx, %rax
 641              		.loc 1 193 25 discriminator 2
 642 0241 09CE     		orl	%ecx, %esi
 643 0243 89F2     		movl	%esi, %edx
 644              		.loc 1 193 23 discriminator 2
 645 0245 8810     		movb	%dl, (%rax)
 170:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****         if (((buf[i]) >= '0') && (buf[i] <= '9')) {
 646              		.loc 1 170 28 discriminator 2
 647 0247 8345F402 		addl	$2, -12(%rbp)
 648              	.L29:
 170:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****         if (((buf[i]) >= '0') && (buf[i] <= '9')) {
 649              		.loc 1 170 5 discriminator 1
GAS LISTING /tmp/cciludvW.s 			page 17


 650 024b 8B45F4   		movl	-12(%rbp), %eax
 651 024e 3B45D4   		cmpl	-44(%rbp), %eax
 652 0251 0F8C0CFE 		jl	.L39
 652      FFFF
 653              	.L34:
 194:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****     }
 195:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****     return ret;
 654              		.loc 1 195 12
 655 0257 8B45F0   		movl	-16(%rbp), %eax
 656              	.L28:
 196:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c **** }
 657              		.loc 1 196 1
 658 025a 488B7DF8 		movq	-8(%rbp), %rdi
 659 025e 6448333C 		xorq	%fs:40, %rdi
 659      25280000 
 659      00
 660 0267 7405     		je	.L40
 661 0269 E8000000 		call	__stack_chk_fail@PLT
 661      00
 662              	.L40:
 663 026e C9       		leave
 664              	.LCFI11:
 665              		.cfi_def_cfa 7, 8
 666 026f C3       		ret
 667              		.cfi_endproc
 668              	.LFE3:
 670              		.section	.text.byte2hexstr,"ax",@progbits
 671              		.globl	byte2hexstr
 673              	byte2hexstr:
 674              	.LFB4:
 197:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c **** 
 198:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c **** // make a byte to 2 ascii hex
 199:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c **** int byte2hexstr(uint8_t *bufin, int len, char *bufout)
 200:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c **** {
 675              		.loc 1 200 1
 676              		.cfi_startproc
 677 0000 F30F1EFA 		endbr64
 678 0004 55       		pushq	%rbp
 679              	.LCFI12:
 680              		.cfi_def_cfa_offset 16
 681              		.cfi_offset 6, -16
 682 0005 4889E5   		movq	%rsp, %rbp
 683              	.LCFI13:
 684              		.cfi_def_cfa_register 6
 685 0008 4883EC30 		subq	$48, %rsp
 686 000c 48897DE8 		movq	%rdi, -24(%rbp)
 687 0010 8975E4   		movl	%esi, -28(%rbp)
 688 0013 488955D8 		movq	%rdx, -40(%rbp)
 689              		.loc 1 200 1
 690 0017 64488B04 		movq	%fs:40, %rax
 690      25280000 
 690      00
 691 0020 488945F8 		movq	%rax, -8(%rbp)
 692 0024 31C0     		xorl	%eax, %eax
 201:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****     int i = 0;
 693              		.loc 1 201 9
 694 0026 C745F400 		movl	$0, -12(%rbp)
GAS LISTING /tmp/cciludvW.s 			page 18


 694      000000
 202:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****     uint8_t tmp_l = 0x0;
 695              		.loc 1 202 13
 696 002d C645F200 		movb	$0, -14(%rbp)
 203:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****     uint8_t tmp_h = 0;
 697              		.loc 1 203 13
 698 0031 C645F300 		movb	$0, -13(%rbp)
 204:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****     if ((NULL == bufin) || (len <= 0) || (NULL == bufout)) {
 699              		.loc 1 204 8
 700 0035 48837DE8 		cmpq	$0, -24(%rbp)
 700      00
 701 003a 740D     		je	.L42
 702              		.loc 1 204 25 discriminator 1
 703 003c 837DE400 		cmpl	$0, -28(%rbp)
 704 0040 7E07     		jle	.L42
 705              		.loc 1 204 39 discriminator 2
 706 0042 48837DD8 		cmpq	$0, -40(%rbp)
 706      00
 707 0047 750A     		jne	.L43
 708              	.L42:
 205:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****         return -1;
 709              		.loc 1 205 16
 710 0049 B8FFFFFF 		movl	$-1, %eax
 710      FF
 711 004e E9B80000 		jmp	.L44
 711      00
 712              	.L43:
 206:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****     }
 207:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****     for (i = 0; i < len; i++) {
 713              		.loc 1 207 12
 714 0053 C745F400 		movl	$0, -12(%rbp)
 714      000000
 715              		.loc 1 207 5
 716 005a E9890000 		jmp	.L45
 716      00
 717              	.L50:
 208:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****         tmp_h = (bufin[i] >> 4) & 0X0F;
 718              		.loc 1 208 23
 719 005f 8B45F4   		movl	-12(%rbp), %eax
 720 0062 4863D0   		movslq	%eax, %rdx
 721 0065 488B45E8 		movq	-24(%rbp), %rax
 722 0069 4801D0   		addq	%rdx, %rax
 723 006c 0FB600   		movzbl	(%rax), %eax
 724              		.loc 1 208 15
 725 006f C0E804   		shrb	$4, %al
 726 0072 8845F3   		movb	%al, -13(%rbp)
 209:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****         tmp_l = bufin[i] & 0x0F;
 727              		.loc 1 209 22
 728 0075 8B45F4   		movl	-12(%rbp), %eax
 729 0078 4863D0   		movslq	%eax, %rdx
 730 007b 488B45E8 		movq	-24(%rbp), %rax
 731 007f 4801D0   		addq	%rdx, %rax
 732 0082 0FB600   		movzbl	(%rax), %eax
 733              		.loc 1 209 15
 734 0085 83E00F   		andl	$15, %eax
 735 0088 8845F2   		movb	%al, -14(%rbp)
 210:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****         bufout[2 * i] = (tmp_h > 9) ? (tmp_h - 10 + 'a') : (tmp_h + '0');
GAS LISTING /tmp/cciludvW.s 			page 19


 736              		.loc 1 210 23
 737 008b 807DF309 		cmpb	$9, -13(%rbp)
 738 008f 760B     		jbe	.L46
 739              		.loc 1 210 51 discriminator 1
 740 0091 0FB645F3 		movzbl	-13(%rbp), %eax
 741 0095 83C057   		addl	$87, %eax
 742              		.loc 1 210 23 discriminator 1
 743 0098 89C1     		movl	%eax, %ecx
 744 009a EB09     		jmp	.L47
 745              	.L46:
 746              		.loc 1 210 67 discriminator 2
 747 009c 0FB645F3 		movzbl	-13(%rbp), %eax
 748 00a0 83C030   		addl	$48, %eax
 749              		.loc 1 210 23 discriminator 2
 750 00a3 89C1     		movl	%eax, %ecx
 751              	.L47:
 752              		.loc 1 210 18 discriminator 4
 753 00a5 8B45F4   		movl	-12(%rbp), %eax
 754 00a8 01C0     		addl	%eax, %eax
 755 00aa 4863D0   		movslq	%eax, %rdx
 756              		.loc 1 210 15 discriminator 4
 757 00ad 488B45D8 		movq	-40(%rbp), %rax
 758 00b1 4801D0   		addq	%rdx, %rax
 759              		.loc 1 210 23 discriminator 4
 760 00b4 8808     		movb	%cl, (%rax)
 211:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****         bufout[2 * i + 1] = (tmp_l > 9) ? (tmp_l - 10 + 'a') : (tmp_l + '0');
 761              		.loc 1 211 27 discriminator 4
 762 00b6 807DF209 		cmpb	$9, -14(%rbp)
 763 00ba 760B     		jbe	.L48
 764              		.loc 1 211 55 discriminator 1
 765 00bc 0FB645F2 		movzbl	-14(%rbp), %eax
 766 00c0 83C057   		addl	$87, %eax
 767              		.loc 1 211 27 discriminator 1
 768 00c3 89C1     		movl	%eax, %ecx
 769 00c5 EB09     		jmp	.L49
 770              	.L48:
 771              		.loc 1 211 71 discriminator 2
 772 00c7 0FB645F2 		movzbl	-14(%rbp), %eax
 773 00cb 83C030   		addl	$48, %eax
 774              		.loc 1 211 27 discriminator 2
 775 00ce 89C1     		movl	%eax, %ecx
 776              	.L49:
 777              		.loc 1 211 18 discriminator 4
 778 00d0 8B45F4   		movl	-12(%rbp), %eax
 779 00d3 01C0     		addl	%eax, %eax
 780 00d5 4898     		cltq
 781              		.loc 1 211 15 discriminator 4
 782 00d7 488D5001 		leaq	1(%rax), %rdx
 783 00db 488B45D8 		movq	-40(%rbp), %rax
 784 00df 4801D0   		addq	%rdx, %rax
 785              		.loc 1 211 27 discriminator 4
 786 00e2 8808     		movb	%cl, (%rax)
 207:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****         tmp_h = (bufin[i] >> 4) & 0X0F;
 787              		.loc 1 207 27 discriminator 4
 788 00e4 8345F401 		addl	$1, -12(%rbp)
 789              	.L45:
 207:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****         tmp_h = (bufin[i] >> 4) & 0X0F;
GAS LISTING /tmp/cciludvW.s 			page 20


 790              		.loc 1 207 5 discriminator 2
 791 00e8 8B45F4   		movl	-12(%rbp), %eax
 792 00eb 3B45E4   		cmpl	-28(%rbp), %eax
 793 00ee 0F8C6BFF 		jl	.L50
 793      FFFF
 212:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****     }
 213:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****     bufout[2 * len] = '\0';
 794              		.loc 1 213 14
 795 00f4 8B45E4   		movl	-28(%rbp), %eax
 796 00f7 01C0     		addl	%eax, %eax
 797 00f9 4863D0   		movslq	%eax, %rdx
 798              		.loc 1 213 11
 799 00fc 488B45D8 		movq	-40(%rbp), %rax
 800 0100 4801D0   		addq	%rdx, %rax
 801              		.loc 1 213 21
 802 0103 C60000   		movb	$0, (%rax)
 214:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c **** 
 215:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c ****     return 0;
 803              		.loc 1 215 12
 804 0106 B8000000 		movl	$0, %eax
 804      00
 805              	.L44:
 216:/home/xingli/share/LiteOS_Lab/link_misc/link_string.c **** }
 806              		.loc 1 216 1
 807 010b 488B75F8 		movq	-8(%rbp), %rsi
 808 010f 64483334 		xorq	%fs:40, %rsi
 808      25280000 
 808      00
 809 0118 7405     		je	.L51
 810 011a E8000000 		call	__stack_chk_fail@PLT
 810      00
 811              	.L51:
 812 011f C9       		leave
 813              	.LCFI14:
 814              		.cfi_def_cfa 7, 8
 815 0120 C3       		ret
 816              		.cfi_endproc
 817              	.LFE4:
 819              		.text
 820              	.Letext0:
 821              		.file 2 "/usr/include/x86_64-linux-gnu/bits/types.h"
 822              		.file 3 "/usr/include/x86_64-linux-gnu/bits/stdint-uintn.h"
 823              		.file 4 "/usr/lib/gcc/x86_64-linux-gnu/9/include/stddef.h"
 824              		.file 5 "/usr/include/x86_64-linux-gnu/bits/types/struct_FILE.h"
 825              		.file 6 "/usr/include/x86_64-linux-gnu/bits/types/FILE.h"
 826              		.file 7 "/usr/include/stdio.h"
 827              		.file 8 "/usr/include/x86_64-linux-gnu/bits/sys_errlist.h"
 2247              		.section	.note.gnu.property,"a"
 2248              		.align 8
 2249 0000 04000000 		.long	 1f - 0f
 2250 0004 10000000 		.long	 4f - 1f
 2251 0008 05000000 		.long	 5
 2252              	0:
 2253 000c 474E5500 		.string	 "GNU"
 2254              	1:
 2255              		.align 8
 2256 0010 020000C0 		.long	 0xc0000002
GAS LISTING /tmp/cciludvW.s 			page 21


 2257 0014 04000000 		.long	 3f - 2f
 2258              	2:
 2259 0018 03000000 		.long	 0x3
 2260              	3:
 2261 001c 00000000 		.align 8
 2262              	4:
GAS LISTING /tmp/cciludvW.s 			page 22


DEFINED SYMBOLS
                            *ABS*:0000000000000000 link_string.c
     /tmp/cciludvW.s:7      .text.string_to_arg:0000000000000000 string_to_arg
     /tmp/cciludvW.s:153    .text.osal_strdup:0000000000000000 osal_strdup
     /tmp/cciludvW.s:228    .text.osal_strcat:0000000000000000 osal_strcat
     /tmp/cciludvW.s:384    .text.hexstr2byte:0000000000000000 hexstr2byte
     /tmp/cciludvW.s:673    .text.byte2hexstr:0000000000000000 byte2hexstr

UNDEFINED SYMBOLS
_GLOBAL_OFFSET_TABLE_
strlen
__stack_chk_fail
osal_malloc
strncpy
memcpy
