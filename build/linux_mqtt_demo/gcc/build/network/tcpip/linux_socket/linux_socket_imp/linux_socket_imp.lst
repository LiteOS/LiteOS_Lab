GAS LISTING /tmp/ccSkQAcN.s 			page 1


   1              		.file	"linux_socket_imp.c"
   2              		.text
   3              	.Ltext0:
   4              		.section	.rodata
   5              		.align 8
   6              	.LC0:
   7 0000 5B25735D 		.string	"[%s][%u][%s] %s:log:::::::timeout should be mapped:::::modified it 1000 us\n\r\r\n"
   7      5B25755D 
   7      5B25735D 
   7      2025733A 
   7      6C6F673A 
   8              		.section	.text.__linux_setsockopt,"ax",@progbits
  10              	__linux_setsockopt:
  11              	.LFB6:
  12              		.file 1 "/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.
   1:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c **** /*----------------------------------------------------------------------------
   2:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****  * Copyright (c) <2018>, <Huawei Technologies Co., Ltd>
   3:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****  * All rights reserved.
   4:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****  * Redistribution and use in source and binary forms, with or without modification,
   5:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****  * are permitted provided that the following conditions are met:
   6:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****  * 1. Redistributions of source code must retain the above copyright notice, this list of
   7:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****  * conditions and the following disclaimer.
   8:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****  * 2. Redistributions in binary form must reproduce the above copyright notice, this list
   9:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****  * of conditions and the following disclaimer in the documentation and/or other materials
  10:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****  * provided with the distribution.
  11:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****  * 3. Neither the name of the copyright holder nor the names of its contributors may be used
  12:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****  * to endorse or promote products derived from this software without specific prior written
  13:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****  * permission.
  14:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****  * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
  15:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****  * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  16:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****  * THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  17:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****  * PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR
  18:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****  * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  19:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****  * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  20:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****  * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;
  21:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****  * OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
  22:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****  * WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR
  23:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****  * OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF
  24:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****  * ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  25:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****  *---------------------------------------------------------------------------*/
  26:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c **** /*----------------------------------------------------------------------------
  27:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****  * Notice of Export Control Law
  28:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****  * ===============================================
  29:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****  * Huawei LiteOS may be subject to applicable export control laws and regulations, which might
  30:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****  * include those applicable to Huawei LiteOS of U.S. and the country in which you are located.
  31:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****  * Import, export and usage of Huawei LiteOS in any manner by you shall be in compliance with such
  32:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****  * applicable export control laws and regulations.
  33:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****  *---------------------------------------------------------------------------*/
  34:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c **** 
  35:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c **** 
  36:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c **** #include <stdio.h>
  37:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c **** #include <string.h>
  38:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c **** #include <unistd.h>
  39:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c **** 
  40:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c **** #include <sys/types.h>
  41:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c **** #include <sys/socket.h>
  42:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c **** #include <netdb.h>
GAS LISTING /tmp/ccSkQAcN.s 			page 2


  43:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c **** 
  44:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c **** #include <sal_imp.h>   ///< register the lwip to sal
  45:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c **** #include <sys/time.h>
  46:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c **** 
  47:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c **** ///< map the level and option
  48:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c **** static int __linux_setsockopt(int fd, int level, int option, const void *option_value, int option_l
  49:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c **** {
  13              		.loc 1 49 1
  14              		.cfi_startproc
  15 0000 F30F1EFA 		endbr64
  16 0004 55       		pushq	%rbp
  17              	.LCFI0:
  18              		.cfi_def_cfa_offset 16
  19              		.cfi_offset 6, -16
  20 0005 4889E5   		movq	%rsp, %rbp
  21              	.LCFI1:
  22              		.cfi_def_cfa_register 6
  23 0008 53       		pushq	%rbx
  24 0009 4883EC38 		subq	$56, %rsp
  25              		.cfi_offset 3, -24
  26 000d 897DDC   		movl	%edi, -36(%rbp)
  27 0010 8975D8   		movl	%esi, -40(%rbp)
  28 0013 8955D4   		movl	%edx, -44(%rbp)
  29 0016 48894DC8 		movq	%rcx, -56(%rbp)
  30 001a 448945D0 		movl	%r8d, -48(%rbp)
  31              		.loc 1 49 1
  32 001e 64488B04 		movq	%fs:40, %rax
  32      25280000 
  32      00
  33 0027 488945E8 		movq	%rax, -24(%rbp)
  34 002b 31C0     		xorl	%eax, %eax
  50:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****     struct timeval *time_delay;
  51:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c **** 
  52:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****     if(level == 0xffff)
  35              		.loc 1 52 7
  36 002d 817DD8FF 		cmpl	$65535, -40(%rbp)
  36      FF0000
  37 0034 0F852501 		jne	.L2
  37      0000
  53:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****     {
  54:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****         level = SOL_SOCKET;
  38              		.loc 1 54 15
  39 003a C745D801 		movl	$1, -40(%rbp)
  39      000000
  55:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****         if(option == 0x1006)
  40              		.loc 1 55 11
  41 0041 817DD406 		cmpl	$4102, -44(%rbp)
  41      100000
  42 0048 0F858200 		jne	.L3
  42      0000
  56:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****         {
  57:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****             option = SO_RCVTIMEO;
  43              		.loc 1 57 20
  44 004e C745D414 		movl	$20, -44(%rbp)
  44      000000
  58:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c **** 
  59:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****             time_delay = (struct timeval *)option_value;
GAS LISTING /tmp/ccSkQAcN.s 			page 3


  45              		.loc 1 59 24
  46 0055 488B45C8 		movq	-56(%rbp), %rax
  47 0059 488945E0 		movq	%rax, -32(%rbp)
  60:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****             if((time_delay->tv_sec == 0)&&(time_delay->tv_usec == 0))
  48              		.loc 1 60 27
  49 005d 488B45E0 		movq	-32(%rbp), %rax
  50 0061 488B00   		movq	(%rax), %rax
  51              		.loc 1 60 15
  52 0064 4885C0   		testq	%rax, %rax
  53 0067 7567     		jne	.L3
  54              		.loc 1 60 54 discriminator 1
  55 0069 488B45E0 		movq	-32(%rbp), %rax
  56 006d 488B4008 		movq	8(%rax), %rax
  57              		.loc 1 60 41 discriminator 1
  58 0071 4885C0   		testq	%rax, %rax
  59 0074 755A     		jne	.L3
  61:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****             {
  62:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****                 LINK_LOG_DEBUG("%s:log:::::::timeout should be mapped:::::modified it 1000 us\n\r",
  60              		.loc 1 62 17
  61 0076 E8000000 		call	link_log_level_get@PLT
  61      00
  62 007b 83F801   		cmpl	$1, %eax
  63 007e 7744     		ja	.L4
  64              		.loc 1 62 17 is_stmt 0 discriminator 1
  65 0080 E8000000 		call	osal_sys_time@PLT
  65      00
  66 0085 89C3     		movl	%eax, %ebx
  67 0087 BF010000 		movl	$1, %edi
  67      00
  68 008c E8000000 		call	link_log_level_name@PLT
  68      00
  69 0091 4C8D0500 		leaq	__FUNCTION__.4097(%rip), %r8
  69      000000
  70 0098 488D0D00 		leaq	__FUNCTION__.4097(%rip), %rcx
  70      000000
  71 009f 89DA     		movl	%ebx, %edx
  72 00a1 4889C6   		movq	%rax, %rsi
  73 00a4 488D3D00 		leaq	.LC0(%rip), %rdi
  73      000000
  74 00ab B8000000 		movl	$0, %eax
  74      00
  75 00b0 E8000000 		call	printf@PLT
  75      00
  76 00b5 488B0500 		movq	stdout(%rip), %rax
  76      000000
  77 00bc 4889C7   		movq	%rax, %rdi
  78 00bf E8000000 		call	fflush@PLT
  78      00
  79              	.L4:
  63:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****                 time_delay->tv_usec = 1000;
  80              		.loc 1 63 37 is_stmt 1
  81 00c4 488B45E0 		movq	-32(%rbp), %rax
  82 00c8 48C74008 		movq	$1000, 8(%rax)
  82      E8030000 
  83              	.L3:
  64:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****             }
  65:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****         }
GAS LISTING /tmp/ccSkQAcN.s 			page 4


  66:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****         if(option == 0x1005)
  84              		.loc 1 66 11
  85 00d0 817DD405 		cmpl	$4101, -44(%rbp)
  85      100000
  86 00d7 0F858200 		jne	.L2
  86      0000
  67:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****         {
  68:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****             option = SO_SNDTIMEO;
  87              		.loc 1 68 20
  88 00dd C745D415 		movl	$21, -44(%rbp)
  88      000000
  69:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c **** 
  70:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****             time_delay = (struct timeval *)option_value;
  89              		.loc 1 70 24
  90 00e4 488B45C8 		movq	-56(%rbp), %rax
  91 00e8 488945E0 		movq	%rax, -32(%rbp)
  71:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****             if((time_delay->tv_sec == 0)&&(time_delay->tv_usec == 0))
  92              		.loc 1 71 27
  93 00ec 488B45E0 		movq	-32(%rbp), %rax
  94 00f0 488B00   		movq	(%rax), %rax
  95              		.loc 1 71 15
  96 00f3 4885C0   		testq	%rax, %rax
  97 00f6 7567     		jne	.L2
  98              		.loc 1 71 54 discriminator 1
  99 00f8 488B45E0 		movq	-32(%rbp), %rax
 100 00fc 488B4008 		movq	8(%rax), %rax
 101              		.loc 1 71 41 discriminator 1
 102 0100 4885C0   		testq	%rax, %rax
 103 0103 755A     		jne	.L2
  72:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****             {
  73:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****                 LINK_LOG_DEBUG("%s:log:::::::timeout should be mapped:::::modified it 1000 us\n\r",
 104              		.loc 1 73 17
 105 0105 E8000000 		call	link_log_level_get@PLT
 105      00
 106 010a 83F801   		cmpl	$1, %eax
 107 010d 7744     		ja	.L5
 108              		.loc 1 73 17 is_stmt 0 discriminator 1
 109 010f E8000000 		call	osal_sys_time@PLT
 109      00
 110 0114 89C3     		movl	%eax, %ebx
 111 0116 BF010000 		movl	$1, %edi
 111      00
 112 011b E8000000 		call	link_log_level_name@PLT
 112      00
 113 0120 4C8D0500 		leaq	__FUNCTION__.4097(%rip), %r8
 113      000000
 114 0127 488D0D00 		leaq	__FUNCTION__.4097(%rip), %rcx
 114      000000
 115 012e 89DA     		movl	%ebx, %edx
 116 0130 4889C6   		movq	%rax, %rsi
 117 0133 488D3D00 		leaq	.LC0(%rip), %rdi
 117      000000
 118 013a B8000000 		movl	$0, %eax
 118      00
 119 013f E8000000 		call	printf@PLT
 119      00
 120 0144 488B0500 		movq	stdout(%rip), %rax
GAS LISTING /tmp/ccSkQAcN.s 			page 5


 120      000000
 121 014b 4889C7   		movq	%rax, %rdi
 122 014e E8000000 		call	fflush@PLT
 122      00
 123              	.L5:
  74:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****                 time_delay->tv_usec = 1000;
 124              		.loc 1 74 37 is_stmt 1
 125 0153 488B45E0 		movq	-32(%rbp), %rax
 126 0157 48C74008 		movq	$1000, 8(%rax)
 126      E8030000 
 127              	.L2:
  75:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****             }
  76:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****         }
  77:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****     }
  78:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c **** 
  79:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****     return setsockopt(fd, level, option, option_value, option_len);
 128              		.loc 1 79 12
 129 015f 8B7DD0   		movl	-48(%rbp), %edi
 130 0162 488B4DC8 		movq	-56(%rbp), %rcx
 131 0166 8B55D4   		movl	-44(%rbp), %edx
 132 0169 8B75D8   		movl	-40(%rbp), %esi
 133 016c 8B45DC   		movl	-36(%rbp), %eax
 134 016f 4189F8   		movl	%edi, %r8d
 135 0172 89C7     		movl	%eax, %edi
 136 0174 E8000000 		call	setsockopt@PLT
 136      00
  80:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c **** }
 137              		.loc 1 80 1
 138 0179 488B5DE8 		movq	-24(%rbp), %rbx
 139 017d 6448331C 		xorq	%fs:40, %rbx
 139      25280000 
 139      00
 140 0186 7405     		je	.L7
 141 0188 E8000000 		call	__stack_chk_fail@PLT
 141      00
 142              	.L7:
 143 018d 4883C438 		addq	$56, %rsp
 144 0191 5B       		popq	%rbx
 145 0192 5D       		popq	%rbp
 146              	.LCFI2:
 147              		.cfi_def_cfa 7, 8
 148 0193 C3       		ret
 149              		.cfi_endproc
 150              	.LFE6:
 152              		.section	.data.rel.ro.s_tcpip_socket_ops,"aw"
 153              		.align 32
 156              	s_tcpip_socket_ops:
 157 0000 00000000 		.quad	socket
 157      00000000 
 158 0008 00000000 		.quad	bind
 158      00000000 
 159 0010 00000000 		.quad	listen
 159      00000000 
 160 0018 00000000 		.quad	accept
 160      00000000 
 161 0020 00000000 		.quad	connect
 161      00000000 
GAS LISTING /tmp/ccSkQAcN.s 			page 6


 162 0028 00000000 		.quad	getsockname
 162      00000000 
 163 0030 00000000 		.quad	getpeername
 163      00000000 
 164 0038 00000000 		.quad	__linux_setsockopt
 164      00000000 
 165 0040 00000000 		.quad	getsockopt
 165      00000000 
 166 0048 00000000 		.quad	send
 166      00000000 
 167 0050 00000000 		.quad	sendto
 167      00000000 
 168 0058 00000000 		.quad	recv
 168      00000000 
 169 0060 00000000 		.quad	recvfrom
 169      00000000 
 170 0068 00000000 		.quad	shutdown
 170      00000000 
 171 0070 00000000 		.quad	close
 171      00000000 
 172 0078 00000000 		.quad	gethostbyname
 172      00000000 
 173 0080 00000000 		.quad	select
 173      00000000 
 174              		.section	.rodata
 175              	.LC1:
 176 004f 736F636B 		.string	"socket"
 176      657400
 177              		.section	.data.rel.ro.local.s_tcpip_socket,"aw"
 178              		.align 16
 181              	s_tcpip_socket:
 182 0000 00000000 		.quad	.LC1
 182      00000000 
 183 0008 02000000 		.long	2
 184 000c 00000000 		.zero	4
 185 0010 00000000 		.quad	s_tcpip_socket_ops
 185      00000000 
 186              		.section	.rodata
 187 0056 0000     		.align 8
 188              	.LC2:
 189 0058 5B25735D 		.string	"[%s][%u][%s] sal:install socket success\r\n\r\n"
 189      5B25755D 
 189      5B25735D 
 189      2073616C 
 189      3A696E73 
 190 0084 00000000 		.align 8
 191              	.LC3:
 192 0088 5B25735D 		.string	"[%s][%u][%s] sal:install socket failed\r\n\r\n"
 192      5B25755D 
 192      5B25735D 
 192      2073616C 
 192      3A696E73 
 193              		.section	.text.link_tcpip_imp_init,"ax",@progbits
 194              		.globl	link_tcpip_imp_init
 196              	link_tcpip_imp_init:
 197              	.LFB7:
  81:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c **** 
GAS LISTING /tmp/ccSkQAcN.s 			page 7


  82:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c **** 
  83:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c **** static const tag_tcpip_ops s_tcpip_socket_ops =
  84:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c **** {
  85:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****     .socket = (fn_sal_socket)socket,
  86:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****     .bind = (fn_sal_bind)bind,
  87:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****     .listen = (fn_sal_listen)listen,
  88:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****     .connect = (fn_sal_connect)connect,
  89:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****     .accept = (fn_sal_accept)accept,
  90:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****     .send = (fn_sal_send)send,
  91:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****     .sendto = (fn_sal_sendto)sendto,
  92:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****     .recv = (fn_sal_recv)recv,
  93:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****     .recvfrom = (fn_sal_recvfrom)recvfrom,
  94:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****     .setsockopt = (fn_sal_setsockopt)__linux_setsockopt,
  95:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****     .getsockopt = (fn_sal_getsockopt)getsockopt,
  96:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****     .shutdown =(fn_sal_shutdown)shutdown,
  97:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****     .closesocket =(fn_sal_closesocket)close,
  98:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****     .getpeername =(fn_sal_getpeername)getpeername,
  99:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****     .getsockname = (fn_sal_getsockname)getsockname,
 100:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****     .gethostbyname = (fn_sal_gethostbyname)gethostbyname,
 101:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****     .select = (fn_sal_select)select,
 102:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c **** };
 103:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c **** 
 104:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c **** static const tag_tcpip_domain s_tcpip_socket =
 105:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c **** {
 106:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****     .name = "socket",
 107:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****     .domain = AF_INET,
 108:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****     .ops = &s_tcpip_socket_ops,
 109:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c **** };
 110:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c **** 
 111:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c **** 
 112:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c **** int link_tcpip_imp_init(void)
 113:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c **** {
 198              		.loc 1 113 1
 199              		.cfi_startproc
 200 0000 F30F1EFA 		endbr64
 201 0004 55       		pushq	%rbp
 202              	.LCFI3:
 203              		.cfi_def_cfa_offset 16
 204              		.cfi_offset 6, -16
 205 0005 4889E5   		movq	%rsp, %rbp
 206              	.LCFI4:
 207              		.cfi_def_cfa_register 6
 208 0008 53       		pushq	%rbx
 209 0009 4883EC18 		subq	$24, %rsp
 210              		.cfi_offset 3, -24
 211              		.loc 1 113 1
 212 000d 64488B04 		movq	%fs:40, %rax
 212      25280000 
 212      00
 213 0016 488945E8 		movq	%rax, -24(%rbp)
 214 001a 31C0     		xorl	%eax, %eax
 114:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****     int ret = -1;
 215              		.loc 1 114 9
 216 001c C745E4FF 		movl	$-1, -28(%rbp)
 216      FFFFFF
 115:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c **** 
 116:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****     ret = link_sal_install(&s_tcpip_socket);
GAS LISTING /tmp/ccSkQAcN.s 			page 8


 217              		.loc 1 116 11
 218 0023 488D3D00 		leaq	s_tcpip_socket(%rip), %rdi
 218      000000
 219 002a E8000000 		call	link_sal_install@PLT
 219      00
 220 002f 8945E4   		movl	%eax, -28(%rbp)
 117:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c **** 
 118:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****     if(0 == ret)
 221              		.loc 1 118 7
 222 0032 837DE400 		cmpl	$0, -28(%rbp)
 223 0036 754D     		jne	.L9
 119:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****     {
 120:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****         LINK_LOG_DEBUG("sal:install socket success\r\n");
 224              		.loc 1 120 9
 225 0038 E8000000 		call	link_log_level_get@PLT
 225      00
 226 003d 83F801   		cmpl	$1, %eax
 227 0040 0F878600 		ja	.L10
 227      0000
 228              		.loc 1 120 9 is_stmt 0 discriminator 1
 229 0046 E8000000 		call	osal_sys_time@PLT
 229      00
 230 004b 89C3     		movl	%eax, %ebx
 231 004d BF010000 		movl	$1, %edi
 231      00
 232 0052 E8000000 		call	link_log_level_name@PLT
 232      00
 233 0057 488D0D00 		leaq	__FUNCTION__.4104(%rip), %rcx
 233      000000
 234 005e 89DA     		movl	%ebx, %edx
 235 0060 4889C6   		movq	%rax, %rsi
 236 0063 488D3D00 		leaq	.LC2(%rip), %rdi
 236      000000
 237 006a B8000000 		movl	$0, %eax
 237      00
 238 006f E8000000 		call	printf@PLT
 238      00
 239 0074 488B0500 		movq	stdout(%rip), %rax
 239      000000
 240 007b 4889C7   		movq	%rax, %rdi
 241 007e E8000000 		call	fflush@PLT
 241      00
 242 0083 EB47     		jmp	.L10
 243              	.L9:
 121:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****     }
 122:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****     else
 123:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****     {
 124:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****         LINK_LOG_DEBUG("sal:install socket failed\r\n");
 244              		.loc 1 124 9 is_stmt 1
 245 0085 E8000000 		call	link_log_level_get@PLT
 245      00
 246 008a 83F801   		cmpl	$1, %eax
 247 008d 773D     		ja	.L10
 248              		.loc 1 124 9 is_stmt 0 discriminator 1
 249 008f E8000000 		call	osal_sys_time@PLT
 249      00
 250 0094 89C3     		movl	%eax, %ebx
GAS LISTING /tmp/ccSkQAcN.s 			page 9


 251 0096 BF010000 		movl	$1, %edi
 251      00
 252 009b E8000000 		call	link_log_level_name@PLT
 252      00
 253 00a0 488D0D00 		leaq	__FUNCTION__.4104(%rip), %rcx
 253      000000
 254 00a7 89DA     		movl	%ebx, %edx
 255 00a9 4889C6   		movq	%rax, %rsi
 256 00ac 488D3D00 		leaq	.LC3(%rip), %rdi
 256      000000
 257 00b3 B8000000 		movl	$0, %eax
 257      00
 258 00b8 E8000000 		call	printf@PLT
 258      00
 259 00bd 488B0500 		movq	stdout(%rip), %rax
 259      000000
 260 00c4 4889C7   		movq	%rax, %rdi
 261 00c7 E8000000 		call	fflush@PLT
 261      00
 262              	.L10:
 125:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****     }
 126:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c **** 
 127:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c ****     return ret;
 263              		.loc 1 127 12 is_stmt 1
 264 00cc 8B45E4   		movl	-28(%rbp), %eax
 128:/home/xingli/share/1205tiny/network/tcpip/linux_socket/linux_socket_imp/linux_socket_imp.c **** }
 265              		.loc 1 128 1
 266 00cf 488B55E8 		movq	-24(%rbp), %rdx
 267 00d3 64483314 		xorq	%fs:40, %rdx
 267      25280000 
 267      00
 268 00dc 7405     		je	.L12
 269 00de E8000000 		call	__stack_chk_fail@PLT
 269      00
 270              	.L12:
 271 00e3 4883C418 		addq	$24, %rsp
 272 00e7 5B       		popq	%rbx
 273 00e8 5D       		popq	%rbp
 274              	.LCFI5:
 275              		.cfi_def_cfa 7, 8
 276 00e9 C3       		ret
 277              		.cfi_endproc
 278              	.LFE7:
 280              		.section	.rodata.__FUNCTION__.4097,"a"
 281              		.align 16
 284              	__FUNCTION__.4097:
 285 0000 5F5F6C69 		.string	"__linux_setsockopt"
 285      6E75785F 
 285      73657473 
 285      6F636B6F 
 285      707400
 286              		.section	.rodata.__FUNCTION__.4104,"a"
 287              		.align 16
 290              	__FUNCTION__.4104:
 291 0000 6C696E6B 		.string	"link_tcpip_imp_init"
 291      5F746370 
 291      69705F69 
GAS LISTING /tmp/ccSkQAcN.s 			page 10


 291      6D705F69 
 291      6E697400 
 292              		.text
 293              	.Letext0:
 294              		.file 2 "/usr/lib/gcc/x86_64-linux-gnu/9/include/stddef.h"
 295              		.file 3 "/usr/include/x86_64-linux-gnu/bits/types.h"
 296              		.file 4 "/usr/include/x86_64-linux-gnu/bits/types/struct_FILE.h"
 297              		.file 5 "/usr/include/x86_64-linux-gnu/bits/types/FILE.h"
 298              		.file 6 "/usr/include/stdio.h"
 299              		.file 7 "/usr/include/x86_64-linux-gnu/bits/sys_errlist.h"
 300              		.file 8 "/usr/include/unistd.h"
 301              		.file 9 "/usr/include/x86_64-linux-gnu/bits/getopt_core.h"
 302              		.file 10 "/usr/include/x86_64-linux-gnu/bits/types/struct_timeval.h"
 303              		.file 11 "/usr/include/x86_64-linux-gnu/sys/select.h"
 304              		.file 12 "/usr/include/x86_64-linux-gnu/bits/stdint-uintn.h"
 305              		.file 13 "/usr/include/netinet/in.h"
 306              		.file 14 "/home/xingli/share/1205tiny/inc/sal_imp.h"
 307              		.file 15 "/home/xingli/share/1205tiny/inc/link_log.h"
 2503              		.section	.note.gnu.property,"a"
 2504              		.align 8
 2505 0000 04000000 		.long	 1f - 0f
 2506 0004 10000000 		.long	 4f - 1f
 2507 0008 05000000 		.long	 5
 2508              	0:
 2509 000c 474E5500 		.string	 "GNU"
 2510              	1:
 2511              		.align 8
 2512 0010 020000C0 		.long	 0xc0000002
 2513 0014 04000000 		.long	 3f - 2f
 2514              	2:
 2515 0018 03000000 		.long	 0x3
 2516              	3:
 2517 001c 00000000 		.align 8
 2518              	4:
GAS LISTING /tmp/ccSkQAcN.s 			page 11


DEFINED SYMBOLS
                            *ABS*:0000000000000000 linux_socket_imp.c
     /tmp/ccSkQAcN.s:10     .text.__linux_setsockopt:0000000000000000 __linux_setsockopt
     /tmp/ccSkQAcN.s:284    .rodata.__FUNCTION__.4097:0000000000000000 __FUNCTION__.4097
     /tmp/ccSkQAcN.s:156    .data.rel.ro.s_tcpip_socket_ops:0000000000000000 s_tcpip_socket_ops
     /tmp/ccSkQAcN.s:181    .data.rel.ro.local.s_tcpip_socket:0000000000000000 s_tcpip_socket
     /tmp/ccSkQAcN.s:196    .text.link_tcpip_imp_init:0000000000000000 link_tcpip_imp_init
     /tmp/ccSkQAcN.s:290    .rodata.__FUNCTION__.4104:0000000000000000 __FUNCTION__.4104

UNDEFINED SYMBOLS
_GLOBAL_OFFSET_TABLE_
link_log_level_get
osal_sys_time
link_log_level_name
printf
stdout
fflush
setsockopt
__stack_chk_fail
socket
bind
listen
accept
connect
getsockname
getpeername
getsockopt
send
sendto
recv
recvfrom
shutdown
close
gethostbyname
select
link_sal_install
