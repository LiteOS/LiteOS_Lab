GAS LISTING /tmp/ccWBFuAQ.s 			page 1


   1              		.file	"MQTTSerializePublish.c"
   2              		.text
   3              	.Ltext0:
   4              		.section	.text.MQTTSerialize_publishLength,"ax",@progbits
   5              		.globl	MQTTSerialize_publishLength
   7              	MQTTSerialize_publishLength:
   8              	.LFB0:
   9              		.file 1 "/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePubli
   1:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** /*******************************************************************************
   2:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c ****  * Copyright (c) 2014 IBM Corp.
   3:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c ****  *
   4:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c ****  * All rights reserved. This program and the accompanying materials
   5:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c ****  * are made available under the terms of the Eclipse Public License v1.0
   6:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c ****  * and Eclipse Distribution License v1.0 which accompany this distribution.
   7:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c ****  *
   8:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c ****  * The Eclipse Public License is available at
   9:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c ****  *    http://www.eclipse.org/legal/epl-v10.html
  10:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c ****  * and the Eclipse Distribution License is available at
  11:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c ****  *   http://www.eclipse.org/org/documents/edl-v10.php.
  12:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c ****  *
  13:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c ****  * Contributors:
  14:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c ****  *    Ian Craggs - initial API and implementation and/or initial documentation
  15:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c ****  *    Ian Craggs - fix for https://bugs.eclipse.org/bugs/show_bug.cgi?id=453144
  16:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c ****  *******************************************************************************/
  17:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** 
  18:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** #include "MQTTPacket.h"
  19:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** #include "StackTrace.h"
  20:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** 
  21:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** #include <string.h>
  22:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** 
  23:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** 
  24:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** /**
  25:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c ****   * Determines the length of the MQTT publish packet that would be produced using the supplied para
  26:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c ****   * @param qos the MQTT QoS of the publish (packetid is omitted for QoS 0)
  27:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c ****   * @param topicName the topic name to be used in the publish  
  28:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c ****   * @param payloadlen the length of the payload to be sent
  29:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c ****   * @return the length of buffer needed to contain the serialized version of the packet
  30:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c ****   */
  31:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** int MQTTSerialize_publishLength(int qos, MQTTString topicName, int payloadlen)
  32:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** {
  10              		.loc 1 32 1
  11              		.cfi_startproc
  12 0000 F30F1EFA 		endbr64
  13 0004 55       		pushq	%rbp
  14              	.LCFI0:
  15              		.cfi_def_cfa_offset 16
  16              		.cfi_offset 6, -16
  17 0005 4889E5   		movq	%rsp, %rbp
  18              	.LCFI1:
  19              		.cfi_def_cfa_register 6
  20 0008 4883EC30 		subq	$48, %rsp
  21 000c 897DEC   		movl	%edi, -20(%rbp)
  22 000f 8975E8   		movl	%esi, -24(%rbp)
  23 0012 488B4510 		movq	16(%rbp), %rax
  24 0016 488B5518 		movq	24(%rbp), %rdx
  25 001a 488945D0 		movq	%rax, -48(%rbp)
  26 001e 488955D8 		movq	%rdx, -40(%rbp)
GAS LISTING /tmp/ccWBFuAQ.s 			page 2


  27 0022 488B4520 		movq	32(%rbp), %rax
  28 0026 488945E0 		movq	%rax, -32(%rbp)
  29              		.loc 1 32 1
  30 002a 64488B04 		movq	%fs:40, %rax
  30      25280000 
  30      00
  31 0033 488945F8 		movq	%rax, -8(%rbp)
  32 0037 31C0     		xorl	%eax, %eax
  33:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** 	int len = 0;
  33              		.loc 1 33 6
  34 0039 C745F400 		movl	$0, -12(%rbp)
  34      000000
  34:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** 
  35:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** 	len += 2 + MQTTstrlen(topicName) + payloadlen;
  35              		.loc 1 35 13
  36 0040 4883EC08 		subq	$8, %rsp
  37 0044 FF75E0   		pushq	-32(%rbp)
  38 0047 FF75D8   		pushq	-40(%rbp)
  39 004a FF75D0   		pushq	-48(%rbp)
  40 004d E8000000 		call	MQTTstrlen@PLT
  40      00
  41 0052 4883C420 		addq	$32, %rsp
  42              		.loc 1 35 11
  43 0056 8D5002   		leal	2(%rax), %edx
  44              		.loc 1 35 35
  45 0059 8B45E8   		movl	-24(%rbp), %eax
  46 005c 01D0     		addl	%edx, %eax
  47              		.loc 1 35 6
  48 005e 0145F4   		addl	%eax, -12(%rbp)
  36:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** 	if (qos > 0)
  49              		.loc 1 36 5
  50 0061 837DEC00 		cmpl	$0, -20(%rbp)
  51 0065 7E04     		jle	.L2
  37:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** 		len += 2; /* packetid */
  52              		.loc 1 37 7
  53 0067 8345F402 		addl	$2, -12(%rbp)
  54              	.L2:
  38:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** 	return len;
  55              		.loc 1 38 9
  56 006b 8B45F4   		movl	-12(%rbp), %eax
  39:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** }
  57              		.loc 1 39 1
  58 006e 488B4DF8 		movq	-8(%rbp), %rcx
  59 0072 6448330C 		xorq	%fs:40, %rcx
  59      25280000 
  59      00
  60 007b 7405     		je	.L4
  61 007d E8000000 		call	__stack_chk_fail@PLT
  61      00
  62              	.L4:
  63 0082 C9       		leave
  64              	.LCFI2:
  65              		.cfi_def_cfa 7, 8
  66 0083 C3       		ret
  67              		.cfi_endproc
  68              	.LFE0:
  70              		.section	.text.MQTTSerialize_publish,"ax",@progbits
GAS LISTING /tmp/ccWBFuAQ.s 			page 3


  71              		.globl	MQTTSerialize_publish
  73              	MQTTSerialize_publish:
  74              	.LFB1:
  40:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** 
  41:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** 
  42:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** /**
  43:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c ****   * Serializes the supplied publish data into the supplied buffer, ready for sending
  44:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c ****   * @param buf the buffer into which the packet will be serialized
  45:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c ****   * @param buflen the length in bytes of the supplied buffer
  46:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c ****   * @param dup integer - the MQTT dup flag
  47:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c ****   * @param qos integer - the MQTT QoS value
  48:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c ****   * @param retained integer - the MQTT retained flag
  49:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c ****   * @param packetid integer - the MQTT packet identifier
  50:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c ****   * @param topicName MQTTString - the MQTT topic in the publish
  51:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c ****   * @param payload byte buffer - the MQTT publish payload
  52:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c ****   * @param payloadlen integer - the length of the MQTT payload
  53:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c ****   * @return the length of the serialized data.  <= 0 indicates error
  54:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c ****   */
  55:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** int MQTTSerialize_publish(unsigned char* buf, int buflen, unsigned char dup, int qos, unsigned char
  56:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** 		MQTTString topicName, unsigned char* payload, int payloadlen)
  57:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** {
  75              		.loc 1 57 1
  76              		.cfi_startproc
  77 0000 F30F1EFA 		endbr64
  78 0004 55       		pushq	%rbp
  79              	.LCFI3:
  80              		.cfi_def_cfa_offset 16
  81              		.cfi_offset 6, -16
  82 0005 4889E5   		movq	%rsp, %rbp
  83              	.LCFI4:
  84              		.cfi_def_cfa_register 6
  85 0008 4883EC60 		subq	$96, %rsp
  86 000c 48897DD8 		movq	%rdi, -40(%rbp)
  87 0010 8975D4   		movl	%esi, -44(%rbp)
  88 0013 894DCC   		movl	%ecx, -52(%rbp)
  89 0016 4489C1   		movl	%r8d, %ecx
  90 0019 4489C8   		movl	%r9d, %eax
  91 001c 8855D0   		movb	%dl, -48(%rbp)
  92 001f 89CA     		movl	%ecx, %edx
  93 0021 8855C8   		movb	%dl, -56(%rbp)
  94 0024 668945C4 		movw	%ax, -60(%rbp)
  95 0028 488B4510 		movq	16(%rbp), %rax
  96 002c 488B5518 		movq	24(%rbp), %rdx
  97 0030 488945A8 		movq	%rax, -88(%rbp)
  98 0034 488955B0 		movq	%rdx, -80(%rbp)
  99 0038 488B4520 		movq	32(%rbp), %rax
 100 003c 488945B8 		movq	%rax, -72(%rbp)
 101 0040 488B4528 		movq	40(%rbp), %rax
 102 0044 488945A0 		movq	%rax, -96(%rbp)
 103 0048 8B4530   		movl	48(%rbp), %eax
 104 004b 8945C0   		movl	%eax, -64(%rbp)
 105              		.loc 1 57 1
 106 004e 64488B04 		movq	%fs:40, %rax
 106      25280000 
 106      00
 107 0057 488945F8 		movq	%rax, -8(%rbp)
 108 005b 31C0     		xorl	%eax, %eax
GAS LISTING /tmp/ccWBFuAQ.s 			page 4


  58:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** 	unsigned char *ptr = buf;
 109              		.loc 1 58 17
 110 005d 488B45D8 		movq	-40(%rbp), %rax
 111 0061 488945F0 		movq	%rax, -16(%rbp)
  59:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** 	MQTTHeader header = {0};
 112              		.loc 1 59 13
 113 0065 C745E400 		movl	$0, -28(%rbp)
 113      000000
  60:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** 	int rem_len = 0;
 114              		.loc 1 60 6
 115 006c C745EC00 		movl	$0, -20(%rbp)
 115      000000
  61:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** 	int rc = 0;
 116              		.loc 1 61 6
 117 0073 C745E800 		movl	$0, -24(%rbp)
 117      000000
  62:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** 
  63:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** 	FUNC_ENTRY;
  64:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** 	if (MQTTPacket_len(rem_len = MQTTSerialize_publishLength(qos, topicName, payloadlen)) > buflen)
 118              		.loc 1 64 31
 119 007a 8B55C0   		movl	-64(%rbp), %edx
 120 007d 8B45CC   		movl	-52(%rbp), %eax
 121 0080 4883EC08 		subq	$8, %rsp
 122 0084 FF75B8   		pushq	-72(%rbp)
 123 0087 FF75B0   		pushq	-80(%rbp)
 124 008a FF75A8   		pushq	-88(%rbp)
 125 008d 89D6     		movl	%edx, %esi
 126 008f 89C7     		movl	%eax, %edi
 127 0091 E8000000 		call	MQTTSerialize_publishLength
 127      00
 128 0096 4883C420 		addq	$32, %rsp
 129 009a 8945EC   		movl	%eax, -20(%rbp)
 130              		.loc 1 64 6
 131 009d 8B45EC   		movl	-20(%rbp), %eax
 132 00a0 89C7     		movl	%eax, %edi
 133 00a2 E8000000 		call	MQTTPacket_len@PLT
 133      00
 134              		.loc 1 64 5
 135 00a7 3945D4   		cmpl	%eax, -44(%rbp)
 136 00aa 7D0C     		jge	.L6
  65:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** 	{
  66:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** 		rc = MQTTPACKET_BUFFER_TOO_SHORT;
 137              		.loc 1 66 6
 138 00ac C745E8FE 		movl	$-2, -24(%rbp)
 138      FFFFFF
  67:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** 		goto exit;
 139              		.loc 1 67 3
 140 00b3 E9F60000 		jmp	.L7
 140      00
 141              	.L6:
  68:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** 	}
  69:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** 
  70:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** 	header.bits.type = PUBLISH;
 142              		.loc 1 70 19
 143 00b8 0FB645E4 		movzbl	-28(%rbp), %eax
 144 00bc 83E00F   		andl	$15, %eax
 145 00bf 83C830   		orl	$48, %eax
GAS LISTING /tmp/ccWBFuAQ.s 			page 5


 146 00c2 8845E4   		movb	%al, -28(%rbp)
  71:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** 	header.bits.dup = dup;
 147              		.loc 1 71 18
 148 00c5 0FB645D0 		movzbl	-48(%rbp), %eax
 149 00c9 83E001   		andl	$1, %eax
 150 00cc 83E001   		andl	$1, %eax
 151 00cf 8D14C500 		leal	0(,%rax,8), %edx
 151      000000
 152 00d6 0FB645E4 		movzbl	-28(%rbp), %eax
 153 00da 83E0F7   		andl	$-9, %eax
 154 00dd 09D0     		orl	%edx, %eax
 155 00df 8845E4   		movb	%al, -28(%rbp)
  72:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** 	header.bits.qos = qos;
 156              		.loc 1 72 18
 157 00e2 8B45CC   		movl	-52(%rbp), %eax
 158 00e5 83E003   		andl	$3, %eax
 159 00e8 83E003   		andl	$3, %eax
 160 00eb 8D1400   		leal	(%rax,%rax), %edx
 161 00ee 0FB645E4 		movzbl	-28(%rbp), %eax
 162 00f2 83E0F9   		andl	$-7, %eax
 163 00f5 09D0     		orl	%edx, %eax
 164 00f7 8845E4   		movb	%al, -28(%rbp)
  73:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** 	header.bits.retain = retained;
 165              		.loc 1 73 21
 166 00fa 0FB645C8 		movzbl	-56(%rbp), %eax
 167 00fe 83E001   		andl	$1, %eax
 168 0101 83E001   		andl	$1, %eax
 169 0104 89C2     		movl	%eax, %edx
 170 0106 0FB645E4 		movzbl	-28(%rbp), %eax
 171 010a 83E0FE   		andl	$-2, %eax
 172 010d 09D0     		orl	%edx, %eax
 173 010f 8845E4   		movb	%al, -28(%rbp)
  74:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** 	writeChar(&ptr, header.byte); /* write header */
 174              		.loc 1 74 24
 175 0112 0FB645E4 		movzbl	-28(%rbp), %eax
 176              		.loc 1 74 2
 177 0116 0FBED0   		movsbl	%al, %edx
 178 0119 488D45F0 		leaq	-16(%rbp), %rax
 179 011d 89D6     		movl	%edx, %esi
 180 011f 4889C7   		movq	%rax, %rdi
 181 0122 E8000000 		call	writeChar@PLT
 181      00
  75:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** 
  76:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** 	ptr += MQTTPacket_encode(ptr, rem_len); /* write remaining length */;
 182              		.loc 1 76 9
 183 0127 488B45F0 		movq	-16(%rbp), %rax
 184 012b 8B55EC   		movl	-20(%rbp), %edx
 185 012e 89D6     		movl	%edx, %esi
 186 0130 4889C7   		movq	%rax, %rdi
 187 0133 E8000000 		call	MQTTPacket_encode@PLT
 187      00
 188              		.loc 1 76 6
 189 0138 488B55F0 		movq	-16(%rbp), %rdx
 190              		.loc 1 76 9
 191 013c 4898     		cltq
 192              		.loc 1 76 6
 193 013e 4801D0   		addq	%rdx, %rax
GAS LISTING /tmp/ccWBFuAQ.s 			page 6


 194 0141 488945F0 		movq	%rax, -16(%rbp)
  77:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** 
  78:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** 	writeMQTTString(&ptr, topicName);
 195              		.loc 1 78 2
 196 0145 488D45F0 		leaq	-16(%rbp), %rax
 197 0149 4883EC08 		subq	$8, %rsp
 198 014d FF75B8   		pushq	-72(%rbp)
 199 0150 FF75B0   		pushq	-80(%rbp)
 200 0153 FF75A8   		pushq	-88(%rbp)
 201 0156 4889C7   		movq	%rax, %rdi
 202 0159 E8000000 		call	writeMQTTString@PLT
 202      00
 203 015e 4883C420 		addq	$32, %rsp
  79:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** 
  80:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** 	if (qos > 0)
 204              		.loc 1 80 5
 205 0162 837DCC00 		cmpl	$0, -52(%rbp)
 206 0166 7E12     		jle	.L8
  81:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** 		writeInt(&ptr, packetid);
 207              		.loc 1 81 3
 208 0168 0FB755C4 		movzwl	-60(%rbp), %edx
 209 016c 488D45F0 		leaq	-16(%rbp), %rax
 210 0170 89D6     		movl	%edx, %esi
 211 0172 4889C7   		movq	%rax, %rdi
 212 0175 E8000000 		call	writeInt@PLT
 212      00
 213              	.L8:
  82:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** 
  83:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** 	memcpy(ptr, payload, payloadlen);
 214              		.loc 1 83 2
 215 017a 8B45C0   		movl	-64(%rbp), %eax
 216 017d 4863D0   		movslq	%eax, %rdx
 217 0180 488B45F0 		movq	-16(%rbp), %rax
 218 0184 488B4DA0 		movq	-96(%rbp), %rcx
 219 0188 4889CE   		movq	%rcx, %rsi
 220 018b 4889C7   		movq	%rax, %rdi
 221 018e E8000000 		call	memcpy@PLT
 221      00
  84:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** 	ptr += payloadlen;
 222              		.loc 1 84 6
 223 0193 488B55F0 		movq	-16(%rbp), %rdx
 224 0197 8B45C0   		movl	-64(%rbp), %eax
 225 019a 4898     		cltq
 226 019c 4801D0   		addq	%rdx, %rax
 227 019f 488945F0 		movq	%rax, -16(%rbp)
  85:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** 
  86:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** 	rc = ptr - buf;
 228              		.loc 1 86 11
 229 01a3 488B45F0 		movq	-16(%rbp), %rax
 230 01a7 482B45D8 		subq	-40(%rbp), %rax
 231              		.loc 1 86 5
 232 01ab 8945E8   		movl	%eax, -24(%rbp)
 233              	.L7:
  87:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** 
  88:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** exit:
  89:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** 	FUNC_EXIT_RC(rc);
  90:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** 	return rc;
GAS LISTING /tmp/ccWBFuAQ.s 			page 7


 234              		.loc 1 90 9
 235 01ae 8B45E8   		movl	-24(%rbp), %eax
  91:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** }
 236              		.loc 1 91 1
 237 01b1 488B4DF8 		movq	-8(%rbp), %rcx
 238 01b5 6448330C 		xorq	%fs:40, %rcx
 238      25280000 
 238      00
 239 01be 7405     		je	.L10
 240 01c0 E8000000 		call	__stack_chk_fail@PLT
 240      00
 241              	.L10:
 242 01c5 C9       		leave
 243              	.LCFI5:
 244              		.cfi_def_cfa 7, 8
 245 01c6 C3       		ret
 246              		.cfi_endproc
 247              	.LFE1:
 249              		.section	.text.MQTTSerialize_ack,"ax",@progbits
 250              		.globl	MQTTSerialize_ack
 252              	MQTTSerialize_ack:
 253              	.LFB2:
  92:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** 
  93:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** 
  94:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** 
  95:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** /**
  96:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c ****   * Serializes the ack packet into the supplied buffer.
  97:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c ****   * @param buf the buffer into which the packet will be serialized
  98:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c ****   * @param buflen the length in bytes of the supplied buffer
  99:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c ****   * @param type the MQTT packet type
 100:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c ****   * @param dup the MQTT dup flag
 101:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c ****   * @param packetid the MQTT packet identifier
 102:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c ****   * @return serialized length, or error if 0
 103:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c ****   */
 104:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** int MQTTSerialize_ack(unsigned char* buf, int buflen, unsigned char packettype, unsigned char dup, 
 105:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** {
 254              		.loc 1 105 1
 255              		.cfi_startproc
 256 0000 F30F1EFA 		endbr64
 257 0004 55       		pushq	%rbp
 258              	.LCFI6:
 259              		.cfi_def_cfa_offset 16
 260              		.cfi_offset 6, -16
 261 0005 4889E5   		movq	%rsp, %rbp
 262              	.LCFI7:
 263              		.cfi_def_cfa_register 6
 264 0008 4883EC40 		subq	$64, %rsp
 265 000c 48897DD8 		movq	%rdi, -40(%rbp)
 266 0010 8975D4   		movl	%esi, -44(%rbp)
 267 0013 89D6     		movl	%edx, %esi
 268 0015 89CA     		movl	%ecx, %edx
 269 0017 4489C0   		movl	%r8d, %eax
 270 001a 89F1     		movl	%esi, %ecx
 271 001c 884DD0   		movb	%cl, -48(%rbp)
 272 001f 8855CC   		movb	%dl, -52(%rbp)
 273 0022 668945C8 		movw	%ax, -56(%rbp)
 274              		.loc 1 105 1
GAS LISTING /tmp/ccWBFuAQ.s 			page 8


 275 0026 64488B04 		movq	%fs:40, %rax
 275      25280000 
 275      00
 276 002f 488945F8 		movq	%rax, -8(%rbp)
 277 0033 31C0     		xorl	%eax, %eax
 106:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** 	MQTTHeader header = {0};
 278              		.loc 1 106 13
 279 0035 C745E800 		movl	$0, -24(%rbp)
 279      000000
 107:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** 	int rc = 0;
 280              		.loc 1 107 6
 281 003c C745EC00 		movl	$0, -20(%rbp)
 281      000000
 108:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** 	unsigned char *ptr = buf;
 282              		.loc 1 108 17
 283 0043 488B45D8 		movq	-40(%rbp), %rax
 284 0047 488945F0 		movq	%rax, -16(%rbp)
 109:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** 
 110:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** 	FUNC_ENTRY;
 111:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** 	if (buflen < 4)
 285              		.loc 1 111 5
 286 004b 837DD403 		cmpl	$3, -44(%rbp)
 287 004f 7F0C     		jg	.L12
 112:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** 	{
 113:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** 		rc = MQTTPACKET_BUFFER_TOO_SHORT;
 288              		.loc 1 113 6
 289 0051 C745ECFE 		movl	$-2, -20(%rbp)
 289      FFFFFF
 114:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** 		goto exit;
 290              		.loc 1 114 3
 291 0058 E9A10000 		jmp	.L13
 291      00
 292              	.L12:
 115:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** 	}
 116:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** 	header.bits.type = packettype;
 293              		.loc 1 116 19
 294 005d 0FB645D0 		movzbl	-48(%rbp), %eax
 295 0061 83E00F   		andl	$15, %eax
 296 0064 C1E004   		sall	$4, %eax
 297 0067 89C2     		movl	%eax, %edx
 298 0069 0FB645E8 		movzbl	-24(%rbp), %eax
 299 006d 83E00F   		andl	$15, %eax
 300 0070 09D0     		orl	%edx, %eax
 301 0072 8845E8   		movb	%al, -24(%rbp)
 117:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** 	header.bits.dup = dup;
 302              		.loc 1 117 18
 303 0075 0FB645CC 		movzbl	-52(%rbp), %eax
 304 0079 83E001   		andl	$1, %eax
 305 007c 83E001   		andl	$1, %eax
 306 007f 8D14C500 		leal	0(,%rax,8), %edx
 306      000000
 307 0086 0FB645E8 		movzbl	-24(%rbp), %eax
 308 008a 83E0F7   		andl	$-9, %eax
 309 008d 09D0     		orl	%edx, %eax
 310 008f 8845E8   		movb	%al, -24(%rbp)
 118:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** 	header.bits.qos = (packettype == PUBREL) ? 1 : 0;
 311              		.loc 1 118 47
GAS LISTING /tmp/ccWBFuAQ.s 			page 9


 312 0092 807DD006 		cmpb	$6, -48(%rbp)
 313 0096 0F94C0   		sete	%al
 314 0099 83E003   		andl	$3, %eax
 315              		.loc 1 118 18
 316 009c 83E003   		andl	$3, %eax
 317 009f 8D1400   		leal	(%rax,%rax), %edx
 318 00a2 0FB645E8 		movzbl	-24(%rbp), %eax
 319 00a6 83E0F9   		andl	$-7, %eax
 320 00a9 09D0     		orl	%edx, %eax
 321 00ab 8845E8   		movb	%al, -24(%rbp)
 119:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** 	writeChar(&ptr, header.byte); /* write header */
 322              		.loc 1 119 24
 323 00ae 0FB645E8 		movzbl	-24(%rbp), %eax
 324              		.loc 1 119 2
 325 00b2 0FBED0   		movsbl	%al, %edx
 326 00b5 488D45F0 		leaq	-16(%rbp), %rax
 327 00b9 89D6     		movl	%edx, %esi
 328 00bb 4889C7   		movq	%rax, %rdi
 329 00be E8000000 		call	writeChar@PLT
 329      00
 120:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** 
 121:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** 	ptr += MQTTPacket_encode(ptr, 2); /* write remaining length */
 330              		.loc 1 121 9
 331 00c3 488B45F0 		movq	-16(%rbp), %rax
 332 00c7 BE020000 		movl	$2, %esi
 332      00
 333 00cc 4889C7   		movq	%rax, %rdi
 334 00cf E8000000 		call	MQTTPacket_encode@PLT
 334      00
 335              		.loc 1 121 6
 336 00d4 488B55F0 		movq	-16(%rbp), %rdx
 337              		.loc 1 121 9
 338 00d8 4898     		cltq
 339              		.loc 1 121 6
 340 00da 4801D0   		addq	%rdx, %rax
 341 00dd 488945F0 		movq	%rax, -16(%rbp)
 122:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** 	writeInt(&ptr, packetid);
 342              		.loc 1 122 2
 343 00e1 0FB755C8 		movzwl	-56(%rbp), %edx
 344 00e5 488D45F0 		leaq	-16(%rbp), %rax
 345 00e9 89D6     		movl	%edx, %esi
 346 00eb 4889C7   		movq	%rax, %rdi
 347 00ee E8000000 		call	writeInt@PLT
 347      00
 123:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** 	rc = ptr - buf;
 348              		.loc 1 123 11
 349 00f3 488B45F0 		movq	-16(%rbp), %rax
 350 00f7 482B45D8 		subq	-40(%rbp), %rax
 351              		.loc 1 123 5
 352 00fb 8945EC   		movl	%eax, -20(%rbp)
 353              	.L13:
 124:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** exit:
 125:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** 	FUNC_EXIT_RC(rc);
 126:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** 	return rc;
 354              		.loc 1 126 9
 355 00fe 8B45EC   		movl	-20(%rbp), %eax
 127:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** }
GAS LISTING /tmp/ccWBFuAQ.s 			page 10


 356              		.loc 1 127 1
 357 0101 488B4DF8 		movq	-8(%rbp), %rcx
 358 0105 6448330C 		xorq	%fs:40, %rcx
 358      25280000 
 358      00
 359 010e 7405     		je	.L15
 360 0110 E8000000 		call	__stack_chk_fail@PLT
 360      00
 361              	.L15:
 362 0115 C9       		leave
 363              	.LCFI8:
 364              		.cfi_def_cfa 7, 8
 365 0116 C3       		ret
 366              		.cfi_endproc
 367              	.LFE2:
 369              		.section	.text.MQTTSerialize_puback,"ax",@progbits
 370              		.globl	MQTTSerialize_puback
 372              	MQTTSerialize_puback:
 373              	.LFB3:
 128:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** 
 129:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** 
 130:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** /**
 131:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c ****   * Serializes a puback packet into the supplied buffer.
 132:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c ****   * @param buf the buffer into which the packet will be serialized
 133:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c ****   * @param buflen the length in bytes of the supplied buffer
 134:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c ****   * @param packetid integer - the MQTT packet identifier
 135:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c ****   * @return serialized length, or error if 0
 136:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c ****   */
 137:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** int MQTTSerialize_puback(unsigned char* buf, int buflen, unsigned short packetid)
 138:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** {
 374              		.loc 1 138 1
 375              		.cfi_startproc
 376 0000 F30F1EFA 		endbr64
 377 0004 55       		pushq	%rbp
 378              	.LCFI9:
 379              		.cfi_def_cfa_offset 16
 380              		.cfi_offset 6, -16
 381 0005 4889E5   		movq	%rsp, %rbp
 382              	.LCFI10:
 383              		.cfi_def_cfa_register 6
 384 0008 4883EC20 		subq	$32, %rsp
 385 000c 48897DE8 		movq	%rdi, -24(%rbp)
 386 0010 8975E4   		movl	%esi, -28(%rbp)
 387 0013 89D0     		movl	%edx, %eax
 388 0015 668945E0 		movw	%ax, -32(%rbp)
 389              		.loc 1 138 1
 390 0019 64488B04 		movq	%fs:40, %rax
 390      25280000 
 390      00
 391 0022 488945F8 		movq	%rax, -8(%rbp)
 392 0026 31C0     		xorl	%eax, %eax
 139:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** 	return MQTTSerialize_ack(buf, buflen, PUBACK, 0, packetid);
 393              		.loc 1 139 9
 394 0028 0FB755E0 		movzwl	-32(%rbp), %edx
 395 002c 8B75E4   		movl	-28(%rbp), %esi
 396 002f 488B45E8 		movq	-24(%rbp), %rax
 397 0033 4189D0   		movl	%edx, %r8d
GAS LISTING /tmp/ccWBFuAQ.s 			page 11


 398 0036 B9000000 		movl	$0, %ecx
 398      00
 399 003b BA040000 		movl	$4, %edx
 399      00
 400 0040 4889C7   		movq	%rax, %rdi
 401 0043 E8000000 		call	MQTTSerialize_ack
 401      00
 140:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** }
 402              		.loc 1 140 1
 403 0048 488B4DF8 		movq	-8(%rbp), %rcx
 404 004c 6448330C 		xorq	%fs:40, %rcx
 404      25280000 
 404      00
 405 0055 7405     		je	.L18
 406 0057 E8000000 		call	__stack_chk_fail@PLT
 406      00
 407              	.L18:
 408 005c C9       		leave
 409              	.LCFI11:
 410              		.cfi_def_cfa 7, 8
 411 005d C3       		ret
 412              		.cfi_endproc
 413              	.LFE3:
 415              		.section	.text.MQTTSerialize_pubrel,"ax",@progbits
 416              		.globl	MQTTSerialize_pubrel
 418              	MQTTSerialize_pubrel:
 419              	.LFB4:
 141:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** 
 142:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** 
 143:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** /**
 144:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c ****   * Serializes a pubrel packet into the supplied buffer.
 145:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c ****   * @param buf the buffer into which the packet will be serialized
 146:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c ****   * @param buflen the length in bytes of the supplied buffer
 147:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c ****   * @param dup integer - the MQTT dup flag
 148:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c ****   * @param packetid integer - the MQTT packet identifier
 149:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c ****   * @return serialized length, or error if 0
 150:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c ****   */
 151:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** int MQTTSerialize_pubrel(unsigned char* buf, int buflen, unsigned char dup, unsigned short packetid
 152:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** {
 420              		.loc 1 152 1
 421              		.cfi_startproc
 422 0000 F30F1EFA 		endbr64
 423 0004 55       		pushq	%rbp
 424              	.LCFI12:
 425              		.cfi_def_cfa_offset 16
 426              		.cfi_offset 6, -16
 427 0005 4889E5   		movq	%rsp, %rbp
 428              	.LCFI13:
 429              		.cfi_def_cfa_register 6
 430 0008 4883EC30 		subq	$48, %rsp
 431 000c 48897DE8 		movq	%rdi, -24(%rbp)
 432 0010 8975E4   		movl	%esi, -28(%rbp)
 433 0013 89C8     		movl	%ecx, %eax
 434 0015 8855E0   		movb	%dl, -32(%rbp)
 435 0018 668945DC 		movw	%ax, -36(%rbp)
 436              		.loc 1 152 1
 437 001c 64488B04 		movq	%fs:40, %rax
GAS LISTING /tmp/ccWBFuAQ.s 			page 12


 437      25280000 
 437      00
 438 0025 488945F8 		movq	%rax, -8(%rbp)
 439 0029 31C0     		xorl	%eax, %eax
 153:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** 	return MQTTSerialize_ack(buf, buflen, PUBREL, dup, packetid);
 440              		.loc 1 153 9
 441 002b 0FB74DDC 		movzwl	-36(%rbp), %ecx
 442 002f 0FB655E0 		movzbl	-32(%rbp), %edx
 443 0033 8B75E4   		movl	-28(%rbp), %esi
 444 0036 488B45E8 		movq	-24(%rbp), %rax
 445 003a 4189C8   		movl	%ecx, %r8d
 446 003d 89D1     		movl	%edx, %ecx
 447 003f BA060000 		movl	$6, %edx
 447      00
 448 0044 4889C7   		movq	%rax, %rdi
 449 0047 E8000000 		call	MQTTSerialize_ack
 449      00
 154:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** }
 450              		.loc 1 154 1
 451 004c 488B7DF8 		movq	-8(%rbp), %rdi
 452 0050 6448333C 		xorq	%fs:40, %rdi
 452      25280000 
 452      00
 453 0059 7405     		je	.L21
 454 005b E8000000 		call	__stack_chk_fail@PLT
 454      00
 455              	.L21:
 456 0060 C9       		leave
 457              	.LCFI14:
 458              		.cfi_def_cfa 7, 8
 459 0061 C3       		ret
 460              		.cfi_endproc
 461              	.LFE4:
 463              		.section	.text.MQTTSerialize_pubcomp,"ax",@progbits
 464              		.globl	MQTTSerialize_pubcomp
 466              	MQTTSerialize_pubcomp:
 467              	.LFB5:
 155:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** 
 156:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** 
 157:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** /**
 158:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c ****   * Serializes a pubrel packet into the supplied buffer.
 159:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c ****   * @param buf the buffer into which the packet will be serialized
 160:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c ****   * @param buflen the length in bytes of the supplied buffer
 161:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c ****   * @param packetid integer - the MQTT packet identifier
 162:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c ****   * @return serialized length, or error if 0
 163:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c ****   */
 164:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** int MQTTSerialize_pubcomp(unsigned char* buf, int buflen, unsigned short packetid)
 165:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** {
 468              		.loc 1 165 1
 469              		.cfi_startproc
 470 0000 F30F1EFA 		endbr64
 471 0004 55       		pushq	%rbp
 472              	.LCFI15:
 473              		.cfi_def_cfa_offset 16
 474              		.cfi_offset 6, -16
 475 0005 4889E5   		movq	%rsp, %rbp
 476              	.LCFI16:
GAS LISTING /tmp/ccWBFuAQ.s 			page 13


 477              		.cfi_def_cfa_register 6
 478 0008 4883EC20 		subq	$32, %rsp
 479 000c 48897DE8 		movq	%rdi, -24(%rbp)
 480 0010 8975E4   		movl	%esi, -28(%rbp)
 481 0013 89D0     		movl	%edx, %eax
 482 0015 668945E0 		movw	%ax, -32(%rbp)
 483              		.loc 1 165 1
 484 0019 64488B04 		movq	%fs:40, %rax
 484      25280000 
 484      00
 485 0022 488945F8 		movq	%rax, -8(%rbp)
 486 0026 31C0     		xorl	%eax, %eax
 166:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** 	return MQTTSerialize_ack(buf, buflen, PUBCOMP, 0, packetid);
 487              		.loc 1 166 9
 488 0028 0FB755E0 		movzwl	-32(%rbp), %edx
 489 002c 8B75E4   		movl	-28(%rbp), %esi
 490 002f 488B45E8 		movq	-24(%rbp), %rax
 491 0033 4189D0   		movl	%edx, %r8d
 492 0036 B9000000 		movl	$0, %ecx
 492      00
 493 003b BA070000 		movl	$7, %edx
 493      00
 494 0040 4889C7   		movq	%rax, %rdi
 495 0043 E8000000 		call	MQTTSerialize_ack
 495      00
 167:/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTSerializePublish.c **** }
 496              		.loc 1 167 1
 497 0048 488B4DF8 		movq	-8(%rbp), %rcx
 498 004c 6448330C 		xorq	%fs:40, %rcx
 498      25280000 
 498      00
 499 0055 7405     		je	.L24
 500 0057 E8000000 		call	__stack_chk_fail@PLT
 500      00
 501              	.L24:
 502 005c C9       		leave
 503              	.LCFI17:
 504              		.cfi_def_cfa 7, 8
 505 005d C3       		ret
 506              		.cfi_endproc
 507              	.LFE5:
 509              		.text
 510              	.Letext0:
 511              		.file 2 "/home/xingli/share/1205tiny/network/mqtt/paho_mqtt/paho/MQTTPacket/src/MQTTPacket.h"
 512              		.file 3 "/usr/lib/gcc/x86_64-linux-gnu/9/include/stddef.h"
 513              		.file 4 "/usr/include/x86_64-linux-gnu/bits/types.h"
 514              		.file 5 "/usr/include/x86_64-linux-gnu/bits/types/struct_FILE.h"
 515              		.file 6 "/usr/include/x86_64-linux-gnu/bits/types/FILE.h"
 516              		.file 7 "/usr/include/stdio.h"
 517              		.file 8 "/usr/include/x86_64-linux-gnu/bits/sys_errlist.h"
 2443              		.section	.note.gnu.property,"a"
 2444              		.align 8
 2445 0000 04000000 		.long	 1f - 0f
 2446 0004 10000000 		.long	 4f - 1f
 2447 0008 05000000 		.long	 5
 2448              	0:
 2449 000c 474E5500 		.string	 "GNU"
GAS LISTING /tmp/ccWBFuAQ.s 			page 14


 2450              	1:
 2451              		.align 8
 2452 0010 020000C0 		.long	 0xc0000002
 2453 0014 04000000 		.long	 3f - 2f
 2454              	2:
 2455 0018 03000000 		.long	 0x3
 2456              	3:
 2457 001c 00000000 		.align 8
 2458              	4:
GAS LISTING /tmp/ccWBFuAQ.s 			page 15


DEFINED SYMBOLS
                            *ABS*:0000000000000000 MQTTSerializePublish.c
     /tmp/ccWBFuAQ.s:7      .text.MQTTSerialize_publishLength:0000000000000000 MQTTSerialize_publishLength
     /tmp/ccWBFuAQ.s:73     .text.MQTTSerialize_publish:0000000000000000 MQTTSerialize_publish
     /tmp/ccWBFuAQ.s:252    .text.MQTTSerialize_ack:0000000000000000 MQTTSerialize_ack
     /tmp/ccWBFuAQ.s:372    .text.MQTTSerialize_puback:0000000000000000 MQTTSerialize_puback
     /tmp/ccWBFuAQ.s:418    .text.MQTTSerialize_pubrel:0000000000000000 MQTTSerialize_pubrel
     /tmp/ccWBFuAQ.s:466    .text.MQTTSerialize_pubcomp:0000000000000000 MQTTSerialize_pubcomp

UNDEFINED SYMBOLS
_GLOBAL_OFFSET_TABLE_
MQTTstrlen
__stack_chk_fail
MQTTPacket_len
writeChar
MQTTPacket_encode
writeMQTTString
writeInt
memcpy
