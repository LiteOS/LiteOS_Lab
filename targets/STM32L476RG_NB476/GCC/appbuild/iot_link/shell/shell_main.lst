ARM GAS  /tmp/ccKRyzhl.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 6
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"shell_main.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.rodata
  18              		.align	2
  19              	.LC0:
  20 0000 57454C43 		.ascii	"WELCOME TO IOT_LINK SHELL\000"
  20      4F4D4520 
  20      544F2049 
  20      4F545F4C 
  20      494E4B20 
  21              		.section	.data.gs_welcome_info,"aw"
  22              		.align	2
  25              	gs_welcome_info:
  26 0000 00000000 		.word	.LC0
  27              		.section	.text.shell_get_char,"ax",%progbits
  28              		.align	1
  29              		.arch armv7e-m
  30              		.syntax unified
  31              		.thumb
  32              		.thumb_func
  33              		.fpu fpv4-sp-d16
  35              	shell_get_char:
  36              	.LFB3:
  37              		.file 1 "/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c"
   1:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** /*----------------------------------------------------------------------------
   2:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****  * Copyright (c) <2018>, <Huawei Technologies Co., Ltd>
   3:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****  * All rights reserved.
   4:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****  * Redistribution and use in source and binary forms, with or without modification,
   5:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****  * are permitted provided that the following conditions are met:
   6:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****  * 1. Redistributions of source code must retain the above copyright notice, this list of
   7:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****  * conditions and the following disclaimer.
   8:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****  * 2. Redistributions in binary form must reproduce the above copyright notice, this list
   9:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****  * of conditions and the following disclaimer in the documentation and/or other materials
  10:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****  * provided with the distribution.
  11:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****  * 3. Neither the name of the copyright holder nor the names of its contributors may be used
  12:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****  * to endorse or promote products derived from this software without specific prior written
  13:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****  * permission.
  14:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****  * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
  15:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****  * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  16:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****  * THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  17:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****  * PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR
  18:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****  * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  19:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****  * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
ARM GAS  /tmp/ccKRyzhl.s 			page 2


  20:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****  * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;
  21:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****  * OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
  22:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****  * WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR
  23:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****  * OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF
  24:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****  * ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  25:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****  *---------------------------------------------------------------------------*/
  26:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** /*----------------------------------------------------------------------------
  27:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****  * Notice of Export Control Law
  28:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****  * ===============================================
  29:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****  * Huawei LiteOS may be subject to applicable export control laws and regulations, which might
  30:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****  * include those applicable to Huawei LiteOS of U.S. and the country in which you are located.
  31:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****  * Import, export and usage of Huawei LiteOS in any manner by you shall be in compliance with such
  32:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****  * applicable export control laws and regulations.
  33:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****  *---------------------------------------------------------------------------*/
  34:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** /**
  35:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****  *  DATE                AUTHOR      INSTRUCTION
  36:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****  *  2019-05-14 17:22  zhangqianfu  The first version
  37:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****  *
  38:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****  */
  39:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** 
  40:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** /**********************************README***************************************
  41:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** this file implement the shell for the system.the following instruction you must take care!
  42:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** 1,anyway,you should implement the getchar and puchar first,maybe you could do the redirection here
  43:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****   i don't care what the stdin and stdout is,that depends you!
  44:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** 2,you could call the shell_install after the system is up!for we will create task here
  45:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** 3,we will do the echo in the shell server:only for the isprint charactor
  46:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** 4,1B XX 41 move the current cursor up
  47:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** 5,1B XX 42 move the current cursor down
  48:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** 6,1B XX 44 move the current cursor left
  49:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** 7,1B XX 43 move the current cursor right
  50:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** 8,'\B' move the current cursor left
  51:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** 9,1B delete all the input and make the following code transfer
  52:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** 10,support insert dynamicly, which implemented  by lynus, thanks
  53:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** *******************************************************************************/
  54:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** 
  55:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** /**************************************FILE INCLIUDES**************************/
  56:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** 
  57:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** 
  58:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** 
  59:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** 
  60:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** #include <stdint.h>
  61:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** #include <stddef.h>
  62:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** #include <stdio.h>
  63:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** #include <string.h>
  64:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** #include <shell.h>
  65:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** #include <osal.h>
  66:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** 
  67:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** 
  68:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** 
  69:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** 
  70:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** /**************************************FILE DEFINES****************************/
  71:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** //DEFINE VIRTUAL KEYS:VIRTUAL KEYS ARE COMBINED BY:0X1b 0xXX CODE
  72:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** #define CN_VIRTUAL_KEY_NULL         (0x000000)    //NULL
  73:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** #define CN_VIRTUAL_KEY_ARROWU       (0X41001B)    //UP
  74:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** #define CN_VIRTUAL_KEY_ARROWD       (0X42001B)    //DOWN
  75:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** #define CN_VIRTUAL_KEY_ARROWR       (0X43001B)    //RIGHT
  76:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** #define CN_VIRTUAL_KEY_ARROWL       (0X44001B)    //LEFT
ARM GAS  /tmp/ccKRyzhl.s 			page 3


  77:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** //DEFINE SOME SPECIAL KEYS 
  78:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** #define CN_KEY_LF                   (0X00000D)    //ENTER
  79:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** #define CN_KEY_CR                   (0X00000A)    //NEW
  80:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** #define CN_KEY_TAB                  (0X000009)    //TAB
  81:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** #define CN_KEY_BS                   (0X000008)    //BACK
  82:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** #define CN_KEY_ES                   (0X00001B)    //ESPACE
  83:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** //DEFINES FOR THE COMMAND CACHE BUFFER
  84:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** #define CN_CMDLEN_MAX  64  //THE COMMAND MAXLENGTH COULD CACHED
  85:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** #define CN_CMD_CACHE   4   //THE COMMAND CACHED DEPTH
  86:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** //DEFINES FOR THE SHELL SERVER TASK STACK SIZE
  87:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** 
  88:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** #ifndef  CONFIG_SHELL_TASK_STACKSIZE
  89:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** #define  CONFIG_SHELL_TASK_STACKSIZE   0x800
  90:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** #endif
  91:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** 
  92:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** 
  93:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** #ifndef  CONFIG_SHELL_TASK_STACKPRIOR
  94:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** #define  CONFIG_SHELL_TASK_STACKPRIOR  10
  95:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** #endif
  96:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** 
  97:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** 
  98:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** /**************************************FILE DATA STRUCTURE*********************/
  99:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** //data structure used for cache the command
 100:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** struct shell_buffer_t
 101:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** {
 102:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****     char             curcmd[CN_CMDLEN_MAX];               //current command edited
 103:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****     unsigned char    curoffset;                           //position to be edit
 104:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****     char             tab[CN_CMD_CACHE][CN_CMDLEN_MAX];    //command cache table
 105:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****     unsigned char    taboffset;                           //position to be cached in table
 106:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** };
 107:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** 
 108:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** /**************************************FILE VARS*******************************/
 109:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** //define your global variables here
 110:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** static  char *gs_welcome_info= "WELCOME TO IOT_LINK SHELL";
 111:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** /**************************************FILE FUNCTIONS**************************/
 112:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** //functions import
 113:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** extern int shell_cmd_execute(char *param);            //execute the command
 114:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** extern int shell_cmd_init(void);                      //do the command table load
 115:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** extern const struct shell_tab_matches *shell_cmd_index(const char *index);  //find the most like co
 116:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** 
 117:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** 
 118:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** /**************************************FUNCTION IMPLEMENT**********************/
 119:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** /*******************************************************************************
 120:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** function     :function used to get char from the input device
 121:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** parameters   :
 122:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** instruction  :you could reimplement by redirection,make sure it is block mode
 123:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** *******************************************************************************/
 124:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** static int shell_get_char()
 125:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** {
  38              		.loc 1 125 1
  39              		.cfi_startproc
  40              		@ args = 0, pretend = 0, frame = 0
  41              		@ frame_needed = 1, uses_anonymous_args = 0
  42 0000 80B5     		push	{r7, lr}
  43              	.LCFI0:
  44              		.cfi_def_cfa_offset 8
  45              		.cfi_offset 7, -8
ARM GAS  /tmp/ccKRyzhl.s 			page 4


  46              		.cfi_offset 14, -4
  47 0002 00AF     		add	r7, sp, #0
  48              	.LCFI1:
  49              		.cfi_def_cfa_register 7
 126:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****     return getchar();
  50              		.loc 1 126 12
  51 0004 FFF7FEFF 		bl	getchar
  52 0008 0346     		mov	r3, r0
 127:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** }
  53              		.loc 1 127 1
  54 000a 1846     		mov	r0, r3
  55 000c 80BD     		pop	{r7, pc}
  56              		.cfi_endproc
  57              	.LFE3:
  59              		.section	.text.shell_put_char,"ax",%progbits
  60              		.align	1
  61              		.syntax unified
  62              		.thumb
  63              		.thumb_func
  64              		.fpu fpv4-sp-d16
  66              	shell_put_char:
  67              	.LFB4:
 128:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** /*******************************************************************************
 129:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** function     :function used to put char to the output device
 130:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** parameters   :
 131:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** instruction  :you could reimplement by redirection
 132:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** *******************************************************************************/
 133:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** static void shell_put_char(int ch)
 134:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** {
  68              		.loc 1 134 1
  69              		.cfi_startproc
  70              		@ args = 0, pretend = 0, frame = 8
  71              		@ frame_needed = 1, uses_anonymous_args = 0
  72 0000 80B5     		push	{r7, lr}
  73              	.LCFI2:
  74              		.cfi_def_cfa_offset 8
  75              		.cfi_offset 7, -8
  76              		.cfi_offset 14, -4
  77 0002 82B0     		sub	sp, sp, #8
  78              	.LCFI3:
  79              		.cfi_def_cfa_offset 16
  80 0004 00AF     		add	r7, sp, #0
  81              	.LCFI4:
  82              		.cfi_def_cfa_register 7
  83 0006 7860     		str	r0, [r7, #4]
 135:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****     putchar(ch);
  84              		.loc 1 135 5
  85 0008 7868     		ldr	r0, [r7, #4]
  86 000a FFF7FEFF 		bl	putchar
 136:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****     fflush (stdout) ; //if you use the glibc, then the you must use this to make it
  87              		.loc 1 136 13
  88 000e 054B     		ldr	r3, .L4
  89 0010 1B68     		ldr	r3, [r3]
  90 0012 9B68     		ldr	r3, [r3, #8]
  91              		.loc 1 136 5
  92 0014 1846     		mov	r0, r3
  93 0016 FFF7FEFF 		bl	fflush
ARM GAS  /tmp/ccKRyzhl.s 			page 5


 137:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                       //output immediately
 138:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** }
  94              		.loc 1 138 1
  95 001a 00BF     		nop
  96 001c 0837     		adds	r7, r7, #8
  97              	.LCFI5:
  98              		.cfi_def_cfa_offset 8
  99 001e BD46     		mov	sp, r7
 100              	.LCFI6:
 101              		.cfi_def_cfa_register 13
 102              		@ sp needed
 103 0020 80BD     		pop	{r7, pc}
 104              	.L5:
 105 0022 00BF     		.align	2
 106              	.L4:
 107 0024 00000000 		.word	_impure_ptr
 108              		.cfi_endproc
 109              	.LFE4:
 111              		.section	.text.shell_put_string,"ax",%progbits
 112              		.align	1
 113              		.syntax unified
 114              		.thumb
 115              		.thumb_func
 116              		.fpu fpv4-sp-d16
 118              	shell_put_string:
 119              	.LFB5:
 139:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** 
 140:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** /*******************************************************************************
 141:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** function     :function used to put a string
 142:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** parameters   :
 143:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** instruction  :you could reimplement by redirection
 144:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** *******************************************************************************/
 145:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** static void  shell_put_string(const char *str)
 146:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** {
 120              		.loc 1 146 1
 121              		.cfi_startproc
 122              		@ args = 0, pretend = 0, frame = 16
 123              		@ frame_needed = 1, uses_anonymous_args = 0
 124 0000 80B5     		push	{r7, lr}
 125              	.LCFI7:
 126              		.cfi_def_cfa_offset 8
 127              		.cfi_offset 7, -8
 128              		.cfi_offset 14, -4
 129 0002 84B0     		sub	sp, sp, #16
 130              	.LCFI8:
 131              		.cfi_def_cfa_offset 24
 132 0004 00AF     		add	r7, sp, #0
 133              	.LCFI9:
 134              		.cfi_def_cfa_register 7
 135 0006 7860     		str	r0, [r7, #4]
 147:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****     int len;
 148:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****     int i;
 149:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****     len = strlen(str);
 136              		.loc 1 149 11
 137 0008 7868     		ldr	r0, [r7, #4]
 138 000a FFF7FEFF 		bl	strlen
 139 000e 0346     		mov	r3, r0
ARM GAS  /tmp/ccKRyzhl.s 			page 6


 140              		.loc 1 149 9
 141 0010 BB60     		str	r3, [r7, #8]
 150:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****     for(i =0;i<len;i++)
 142              		.loc 1 150 11
 143 0012 0023     		movs	r3, #0
 144 0014 FB60     		str	r3, [r7, #12]
 145              		.loc 1 150 5
 146 0016 0AE0     		b	.L7
 147              	.L8:
 151:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****     {
 152:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****         shell_put_char(*str);
 148              		.loc 1 152 24 discriminator 3
 149 0018 7B68     		ldr	r3, [r7, #4]
 150 001a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 151              		.loc 1 152 9 discriminator 3
 152 001c 1846     		mov	r0, r3
 153 001e FFF7FEFF 		bl	shell_put_char
 153:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****         str++;
 154              		.loc 1 153 12 discriminator 3
 155 0022 7B68     		ldr	r3, [r7, #4]
 156 0024 0133     		adds	r3, r3, #1
 157 0026 7B60     		str	r3, [r7, #4]
 150:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****     for(i =0;i<len;i++)
 158              		.loc 1 150 21 discriminator 3
 159 0028 FB68     		ldr	r3, [r7, #12]
 160 002a 0133     		adds	r3, r3, #1
 161 002c FB60     		str	r3, [r7, #12]
 162              	.L7:
 150:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****     for(i =0;i<len;i++)
 163              		.loc 1 150 5 discriminator 1
 164 002e FA68     		ldr	r2, [r7, #12]
 165 0030 BB68     		ldr	r3, [r7, #8]
 166 0032 9A42     		cmp	r2, r3
 167 0034 F0DB     		blt	.L8
 154:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****     }
 155:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** }
 168              		.loc 1 155 1
 169 0036 00BF     		nop
 170 0038 00BF     		nop
 171 003a 1037     		adds	r7, r7, #16
 172              	.LCFI10:
 173              		.cfi_def_cfa_offset 8
 174 003c BD46     		mov	sp, r7
 175              	.LCFI11:
 176              		.cfi_def_cfa_register 13
 177              		@ sp needed
 178 003e 80BD     		pop	{r7, pc}
 179              		.cfi_endproc
 180              	.LFE5:
 182              		.section	.rodata
 183 001a 0000     		.align	2
 184              	.LC1:
 185 001c 0A0D4C69 		.ascii	"\012\015LiteOS:/>\000"
 185      74654F53 
 185      3A2F3E00 
 186              		.section	.text.shell_put_index,"ax",%progbits
 187              		.align	1
ARM GAS  /tmp/ccKRyzhl.s 			page 7


 188              		.syntax unified
 189              		.thumb
 190              		.thumb_func
 191              		.fpu fpv4-sp-d16
 193              	shell_put_index:
 194              	.LFB6:
 156:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** 
 157:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** /*******************************************************************************
 158:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** function     :function used to print the path index
 159:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** parameters   :
 160:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** instruction  :if you has a getcwd function,you could modify this
 161:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** *******************************************************************************/
 162:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** static void shell_put_index()
 163:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** {
 195              		.loc 1 163 1
 196              		.cfi_startproc
 197              		@ args = 0, pretend = 0, frame = 0
 198              		@ frame_needed = 1, uses_anonymous_args = 0
 199 0000 80B5     		push	{r7, lr}
 200              	.LCFI12:
 201              		.cfi_def_cfa_offset 8
 202              		.cfi_offset 7, -8
 203              		.cfi_offset 14, -4
 204 0002 00AF     		add	r7, sp, #0
 205              	.LCFI13:
 206              		.cfi_def_cfa_register 7
 164:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****     shell_put_string("\n\rLiteOS:/>");
 207              		.loc 1 164 5
 208 0004 0248     		ldr	r0, .L10
 209 0006 FFF7FEFF 		bl	shell_put_string
 165:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** }
 210              		.loc 1 165 1
 211 000a 00BF     		nop
 212 000c 80BD     		pop	{r7, pc}
 213              	.L11:
 214 000e 00BF     		.align	2
 215              	.L10:
 216 0010 1C000000 		.word	.LC1
 217              		.cfi_endproc
 218              	.LFE6:
 220              		.section	.rodata
 221              		.align	2
 222              	.LC2:
 223 0028 08200800 		.ascii	"\010 \010\000"
 224              		.section	.text.shell_put_backspace,"ax",%progbits
 225              		.align	1
 226              		.syntax unified
 227              		.thumb
 228              		.thumb_func
 229              		.fpu fpv4-sp-d16
 231              	shell_put_backspace:
 232              	.LFB7:
 166:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** 
 167:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** /*******************************************************************************
 168:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** function     :function used to delete a string in the user display
 169:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** parameters   :
 170:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** instruction  :
ARM GAS  /tmp/ccKRyzhl.s 			page 8


 171:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** *******************************************************************************/
 172:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** static void shell_put_backspace(int times)
 173:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** {
 233              		.loc 1 173 1
 234              		.cfi_startproc
 235              		@ args = 0, pretend = 0, frame = 16
 236              		@ frame_needed = 1, uses_anonymous_args = 0
 237 0000 80B5     		push	{r7, lr}
 238              	.LCFI14:
 239              		.cfi_def_cfa_offset 8
 240              		.cfi_offset 7, -8
 241              		.cfi_offset 14, -4
 242 0002 84B0     		sub	sp, sp, #16
 243              	.LCFI15:
 244              		.cfi_def_cfa_offset 24
 245 0004 00AF     		add	r7, sp, #0
 246              	.LCFI16:
 247              		.cfi_def_cfa_register 7
 248 0006 7860     		str	r0, [r7, #4]
 174:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****     int i =0;
 249              		.loc 1 174 9
 250 0008 0023     		movs	r3, #0
 251 000a FB60     		str	r3, [r7, #12]
 175:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****     char *str = "\b \b";
 252              		.loc 1 175 11
 253 000c 094B     		ldr	r3, .L15
 254 000e BB60     		str	r3, [r7, #8]
 176:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****     for(i =0;i<times;i++)
 255              		.loc 1 176 11
 256 0010 0023     		movs	r3, #0
 257 0012 FB60     		str	r3, [r7, #12]
 258              		.loc 1 176 5
 259 0014 05E0     		b	.L13
 260              	.L14:
 177:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****     {
 178:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****         shell_put_string(str);
 261              		.loc 1 178 9 discriminator 3
 262 0016 B868     		ldr	r0, [r7, #8]
 263 0018 FFF7FEFF 		bl	shell_put_string
 176:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****     for(i =0;i<times;i++)
 264              		.loc 1 176 23 discriminator 3
 265 001c FB68     		ldr	r3, [r7, #12]
 266 001e 0133     		adds	r3, r3, #1
 267 0020 FB60     		str	r3, [r7, #12]
 268              	.L13:
 176:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****     for(i =0;i<times;i++)
 269              		.loc 1 176 5 discriminator 1
 270 0022 FA68     		ldr	r2, [r7, #12]
 271 0024 7B68     		ldr	r3, [r7, #4]
 272 0026 9A42     		cmp	r2, r3
 273 0028 F5DB     		blt	.L14
 179:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****     }
 180:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** }
 274              		.loc 1 180 1
 275 002a 00BF     		nop
 276 002c 00BF     		nop
 277 002e 1037     		adds	r7, r7, #16
ARM GAS  /tmp/ccKRyzhl.s 			page 9


 278              	.LCFI17:
 279              		.cfi_def_cfa_offset 8
 280 0030 BD46     		mov	sp, r7
 281              	.LCFI18:
 282              		.cfi_def_cfa_register 13
 283              		@ sp needed
 284 0032 80BD     		pop	{r7, pc}
 285              	.L16:
 286              		.align	2
 287              	.L15:
 288 0034 28000000 		.word	.LC2
 289              		.cfi_endproc
 290              	.LFE7:
 292              		.section	.text.shell_put_space,"ax",%progbits
 293              		.align	1
 294              		.syntax unified
 295              		.thumb
 296              		.thumb_func
 297              		.fpu fpv4-sp-d16
 299              	shell_put_space:
 300              	.LFB8:
 181:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** 
 182:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** /*******************************************************************************
 183:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** function     :function used to put a space to display
 184:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** parameters   :
 185:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** instruction  :
 186:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** *******************************************************************************/
 187:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** static void shell_put_space(int times)
 188:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** {
 301              		.loc 1 188 1
 302              		.cfi_startproc
 303              		@ args = 0, pretend = 0, frame = 16
 304              		@ frame_needed = 1, uses_anonymous_args = 0
 305 0000 80B5     		push	{r7, lr}
 306              	.LCFI19:
 307              		.cfi_def_cfa_offset 8
 308              		.cfi_offset 7, -8
 309              		.cfi_offset 14, -4
 310 0002 84B0     		sub	sp, sp, #16
 311              	.LCFI20:
 312              		.cfi_def_cfa_offset 24
 313 0004 00AF     		add	r7, sp, #0
 314              	.LCFI21:
 315              		.cfi_def_cfa_register 7
 316 0006 7860     		str	r0, [r7, #4]
 189:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****     int i =0;
 317              		.loc 1 189 9
 318 0008 0023     		movs	r3, #0
 319 000a FB60     		str	r3, [r7, #12]
 190:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****     for(i =0;i<times;i++)
 320              		.loc 1 190 11
 321 000c 0023     		movs	r3, #0
 322 000e FB60     		str	r3, [r7, #12]
 323              		.loc 1 190 5
 324 0010 05E0     		b	.L18
 325              	.L19:
 191:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****     {
ARM GAS  /tmp/ccKRyzhl.s 			page 10


 192:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****         shell_put_char(' ');
 326              		.loc 1 192 9 discriminator 3
 327 0012 2020     		movs	r0, #32
 328 0014 FFF7FEFF 		bl	shell_put_char
 190:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****     for(i =0;i<times;i++)
 329              		.loc 1 190 23 discriminator 3
 330 0018 FB68     		ldr	r3, [r7, #12]
 331 001a 0133     		adds	r3, r3, #1
 332 001c FB60     		str	r3, [r7, #12]
 333              	.L18:
 190:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****     for(i =0;i<times;i++)
 334              		.loc 1 190 5 discriminator 1
 335 001e FA68     		ldr	r2, [r7, #12]
 336 0020 7B68     		ldr	r3, [r7, #4]
 337 0022 9A42     		cmp	r2, r3
 338 0024 F5DB     		blt	.L19
 193:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****     }
 194:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** }
 339              		.loc 1 194 1
 340 0026 00BF     		nop
 341 0028 00BF     		nop
 342 002a 1037     		adds	r7, r7, #16
 343              	.LCFI22:
 344              		.cfi_def_cfa_offset 8
 345 002c BD46     		mov	sp, r7
 346              	.LCFI23:
 347              		.cfi_def_cfa_register 13
 348              		@ sp needed
 349 002e 80BD     		pop	{r7, pc}
 350              		.cfi_endproc
 351              	.LFE8:
 353              		.section	.text.shell_moves_cursor_right,"ax",%progbits
 354              		.align	1
 355              		.syntax unified
 356              		.thumb
 357              		.thumb_func
 358              		.fpu fpv4-sp-d16
 360              	shell_moves_cursor_right:
 361              	.LFB9:
 195:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** /*******************************************************************************
 196:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** function     :function used to move cursor right
 197:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** parameters   :
 198:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** instruction  :
 199:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** *******************************************************************************/
 200:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** static void  shell_moves_cursor_right(int times,unsigned int vk)
 201:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** {
 362              		.loc 1 201 1
 363              		.cfi_startproc
 364              		@ args = 0, pretend = 0, frame = 16
 365              		@ frame_needed = 1, uses_anonymous_args = 0
 366 0000 80B5     		push	{r7, lr}
 367              	.LCFI24:
 368              		.cfi_def_cfa_offset 8
 369              		.cfi_offset 7, -8
 370              		.cfi_offset 14, -4
 371 0002 84B0     		sub	sp, sp, #16
 372              	.LCFI25:
ARM GAS  /tmp/ccKRyzhl.s 			page 11


 373              		.cfi_def_cfa_offset 24
 374 0004 00AF     		add	r7, sp, #0
 375              	.LCFI26:
 376              		.cfi_def_cfa_register 7
 377 0006 7860     		str	r0, [r7, #4]
 378 0008 3960     		str	r1, [r7]
 202:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****     char ch;
 203:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****     int i =0;
 379              		.loc 1 203 9
 380 000a 0023     		movs	r3, #0
 381 000c FB60     		str	r3, [r7, #12]
 204:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****     for(i =0;i<times;i++)
 382              		.loc 1 204 11
 383 000e 0023     		movs	r3, #0
 384 0010 FB60     		str	r3, [r7, #12]
 385              		.loc 1 204 5
 386 0012 16E0     		b	.L21
 387              	.L22:
 205:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****     {
 206:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****         ch = (char)(vk&0xff);
 388              		.loc 1 206 12 discriminator 3
 389 0014 3B68     		ldr	r3, [r7]
 390 0016 FB72     		strb	r3, [r7, #11]
 207:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****         shell_put_char(ch);
 391              		.loc 1 207 9 discriminator 3
 392 0018 FB7A     		ldrb	r3, [r7, #11]	@ zero_extendqisi2
 393 001a 1846     		mov	r0, r3
 394 001c FFF7FEFF 		bl	shell_put_char
 208:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****         ch = (char)((vk>>8)&0xff);
 395              		.loc 1 208 24 discriminator 3
 396 0020 3B68     		ldr	r3, [r7]
 397 0022 1B0A     		lsrs	r3, r3, #8
 398              		.loc 1 208 12 discriminator 3
 399 0024 FB72     		strb	r3, [r7, #11]
 209:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****         shell_put_char(ch);
 400              		.loc 1 209 9 discriminator 3
 401 0026 FB7A     		ldrb	r3, [r7, #11]	@ zero_extendqisi2
 402 0028 1846     		mov	r0, r3
 403 002a FFF7FEFF 		bl	shell_put_char
 210:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****         ch = (char)((vk>>16)&0xff);
 404              		.loc 1 210 24 discriminator 3
 405 002e 3B68     		ldr	r3, [r7]
 406 0030 1B0C     		lsrs	r3, r3, #16
 407              		.loc 1 210 12 discriminator 3
 408 0032 FB72     		strb	r3, [r7, #11]
 211:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****         shell_put_char(ch);
 409              		.loc 1 211 9 discriminator 3
 410 0034 FB7A     		ldrb	r3, [r7, #11]	@ zero_extendqisi2
 411 0036 1846     		mov	r0, r3
 412 0038 FFF7FEFF 		bl	shell_put_char
 204:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****     {
 413              		.loc 1 204 23 discriminator 3
 414 003c FB68     		ldr	r3, [r7, #12]
 415 003e 0133     		adds	r3, r3, #1
 416 0040 FB60     		str	r3, [r7, #12]
 417              	.L21:
 204:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****     {
ARM GAS  /tmp/ccKRyzhl.s 			page 12


 418              		.loc 1 204 5 discriminator 1
 419 0042 FA68     		ldr	r2, [r7, #12]
 420 0044 7B68     		ldr	r3, [r7, #4]
 421 0046 9A42     		cmp	r2, r3
 422 0048 E4DB     		blt	.L22
 212:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****     }
 213:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** }
 423              		.loc 1 213 1
 424 004a 00BF     		nop
 425 004c 00BF     		nop
 426 004e 1037     		adds	r7, r7, #16
 427              	.LCFI27:
 428              		.cfi_def_cfa_offset 8
 429 0050 BD46     		mov	sp, r7
 430              	.LCFI28:
 431              		.cfi_def_cfa_register 13
 432              		@ sp needed
 433 0052 80BD     		pop	{r7, pc}
 434              		.cfi_endproc
 435              	.LFE9:
 437              		.section	.text.shell_bell,"ax",%progbits
 438              		.align	1
 439              		.syntax unified
 440              		.thumb
 441              		.thumb_func
 442              		.fpu fpv4-sp-d16
 444              	shell_bell:
 445              	.LFB10:
 214:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** /*******************************************************************************
 215:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** function     :function used ring the terminal's bell
 216:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** parameters   :
 217:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** instruction  :
 218:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** *******************************************************************************/
 219:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** static void shell_bell() {
 446              		.loc 1 219 26
 447              		.cfi_startproc
 448              		@ args = 0, pretend = 0, frame = 0
 449              		@ frame_needed = 1, uses_anonymous_args = 0
 450 0000 80B5     		push	{r7, lr}
 451              	.LCFI29:
 452              		.cfi_def_cfa_offset 8
 453              		.cfi_offset 7, -8
 454              		.cfi_offset 14, -4
 455 0002 00AF     		add	r7, sp, #0
 456              	.LCFI30:
 457              		.cfi_def_cfa_register 7
 220:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****     shell_put_char('\a');
 458              		.loc 1 220 5
 459 0004 0720     		movs	r0, #7
 460 0006 FFF7FEFF 		bl	shell_put_char
 221:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** }
 461              		.loc 1 221 1
 462 000a 00BF     		nop
 463 000c 80BD     		pop	{r7, pc}
 464              		.cfi_endproc
 465              	.LFE10:
 467              		.section	.text.shell_moves_cursor_left,"ax",%progbits
ARM GAS  /tmp/ccKRyzhl.s 			page 13


 468              		.align	1
 469              		.syntax unified
 470              		.thumb
 471              		.thumb_func
 472              		.fpu fpv4-sp-d16
 474              	shell_moves_cursor_left:
 475              	.LFB11:
 222:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** /*******************************************************************************
 223:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** function     :function used to move cursor left
 224:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** parameters   :
 225:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** instruction  :
 226:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** *******************************************************************************/
 227:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** static void  shell_moves_cursor_left(int times){
 476              		.loc 1 227 48
 477              		.cfi_startproc
 478              		@ args = 0, pretend = 0, frame = 16
 479              		@ frame_needed = 1, uses_anonymous_args = 0
 480 0000 80B5     		push	{r7, lr}
 481              	.LCFI31:
 482              		.cfi_def_cfa_offset 8
 483              		.cfi_offset 7, -8
 484              		.cfi_offset 14, -4
 485 0002 84B0     		sub	sp, sp, #16
 486              	.LCFI32:
 487              		.cfi_def_cfa_offset 24
 488 0004 00AF     		add	r7, sp, #0
 489              	.LCFI33:
 490              		.cfi_def_cfa_register 7
 491 0006 7860     		str	r0, [r7, #4]
 228:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****     int i =0;
 492              		.loc 1 228 9
 493 0008 0023     		movs	r3, #0
 494 000a FB60     		str	r3, [r7, #12]
 229:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****     for(i =0;i<times;i++){
 495              		.loc 1 229 11
 496 000c 0023     		movs	r3, #0
 497 000e FB60     		str	r3, [r7, #12]
 498              		.loc 1 229 5
 499 0010 05E0     		b	.L25
 500              	.L26:
 230:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****         shell_put_char('\b');
 501              		.loc 1 230 9 discriminator 3
 502 0012 0820     		movs	r0, #8
 503 0014 FFF7FEFF 		bl	shell_put_char
 229:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****     for(i =0;i<times;i++){
 504              		.loc 1 229 23 discriminator 3
 505 0018 FB68     		ldr	r3, [r7, #12]
 506 001a 0133     		adds	r3, r3, #1
 507 001c FB60     		str	r3, [r7, #12]
 508              	.L25:
 229:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****     for(i =0;i<times;i++){
 509              		.loc 1 229 5 discriminator 1
 510 001e FA68     		ldr	r2, [r7, #12]
 511 0020 7B68     		ldr	r3, [r7, #4]
 512 0022 9A42     		cmp	r2, r3
 513 0024 F5DB     		blt	.L26
 231:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****     }
ARM GAS  /tmp/ccKRyzhl.s 			page 14


 232:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** }
 514              		.loc 1 232 1
 515 0026 00BF     		nop
 516 0028 00BF     		nop
 517 002a 1037     		adds	r7, r7, #16
 518              	.LCFI34:
 519              		.cfi_def_cfa_offset 8
 520 002c BD46     		mov	sp, r7
 521              	.LCFI35:
 522              		.cfi_def_cfa_register 13
 523              		@ sp needed
 524 002e 80BD     		pop	{r7, pc}
 525              		.cfi_endproc
 526              	.LFE11:
 528              		.section	.text.shell_cachecmd,"ax",%progbits
 529              		.align	1
 530              		.syntax unified
 531              		.thumb
 532              		.thumb_func
 533              		.fpu fpv4-sp-d16
 535              	shell_cachecmd:
 536              	.LFB12:
 233:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** 
 234:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** 
 235:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** /*******************************************************************************
 236:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** function     :function used cache the current command
 237:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** parameters   :
 238:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** instruction  :check if it has been cached.
 239:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** *******************************************************************************/
 240:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** static void shell_cachecmd(struct shell_buffer_t *tab){
 537              		.loc 1 240 55
 538              		.cfi_startproc
 539              		@ args = 0, pretend = 0, frame = 16
 540              		@ frame_needed = 1, uses_anonymous_args = 0
 541 0000 80B5     		push	{r7, lr}
 542              	.LCFI36:
 543              		.cfi_def_cfa_offset 8
 544              		.cfi_offset 7, -8
 545              		.cfi_offset 14, -4
 546 0002 84B0     		sub	sp, sp, #16
 547              	.LCFI37:
 548              		.cfi_def_cfa_offset 24
 549 0004 00AF     		add	r7, sp, #0
 550              	.LCFI38:
 551              		.cfi_def_cfa_register 7
 552 0006 7860     		str	r0, [r7, #4]
 241:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****     int i = 0;
 553              		.loc 1 241 9
 554 0008 0023     		movs	r3, #0
 555 000a FB60     		str	r3, [r7, #12]
 242:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****     int offset;
 243:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****     for(i = 0;i < CN_CMD_CACHE;i++){
 556              		.loc 1 243 11
 557 000c 0023     		movs	r3, #0
 558 000e FB60     		str	r3, [r7, #12]
 559              		.loc 1 243 5
 560 0010 0FE0     		b	.L28
ARM GAS  /tmp/ccKRyzhl.s 			page 15


 561              	.L31:
 244:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****         if(0 == strcmp(tab->curcmd,tab->tab[i])){
 562              		.loc 1 244 27
 563 0012 7868     		ldr	r0, [r7, #4]
 564              		.loc 1 244 44
 565 0014 FB68     		ldr	r3, [r7, #12]
 566 0016 0133     		adds	r3, r3, #1
 567 0018 9B01     		lsls	r3, r3, #6
 568 001a 7A68     		ldr	r2, [r7, #4]
 569 001c 1344     		add	r3, r3, r2
 570 001e 0133     		adds	r3, r3, #1
 571              		.loc 1 244 17
 572 0020 1946     		mov	r1, r3
 573 0022 FFF7FEFF 		bl	strcmp
 574 0026 0346     		mov	r3, r0
 575              		.loc 1 244 11
 576 0028 002B     		cmp	r3, #0
 577 002a 06D0     		beq	.L34
 243:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****         if(0 == strcmp(tab->curcmd,tab->tab[i])){
 578              		.loc 1 243 33 discriminator 2
 579 002c FB68     		ldr	r3, [r7, #12]
 580 002e 0133     		adds	r3, r3, #1
 581 0030 FB60     		str	r3, [r7, #12]
 582              	.L28:
 243:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****         if(0 == strcmp(tab->curcmd,tab->tab[i])){
 583              		.loc 1 243 5 discriminator 1
 584 0032 FB68     		ldr	r3, [r7, #12]
 585 0034 032B     		cmp	r3, #3
 586 0036 ECDD     		ble	.L31
 587 0038 00E0     		b	.L30
 588              	.L34:
 245:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****             break;
 589              		.loc 1 245 13
 590 003a 00BF     		nop
 591              	.L30:
 246:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****         }
 247:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****     }
 248:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****     if(i == CN_CMD_CACHE){
 592              		.loc 1 248 7
 593 003c FB68     		ldr	r3, [r7, #12]
 594 003e 042B     		cmp	r3, #4
 595 0040 29D1     		bne	.L35
 249:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****         offset=tab->taboffset;
 596              		.loc 1 249 19
 597 0042 7B68     		ldr	r3, [r7, #4]
 598 0044 93F84131 		ldrb	r3, [r3, #321]	@ zero_extendqisi2
 599              		.loc 1 249 15
 600 0048 BB60     		str	r3, [r7, #8]
 250:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****         (void) memset(tab->tab[offset],0,CN_CMDLEN_MAX);
 601              		.loc 1 250 31
 602 004a BB68     		ldr	r3, [r7, #8]
 603 004c 0133     		adds	r3, r3, #1
 604 004e 9B01     		lsls	r3, r3, #6
 605 0050 7A68     		ldr	r2, [r7, #4]
 606 0052 1344     		add	r3, r3, r2
 607 0054 0133     		adds	r3, r3, #1
 608              		.loc 1 250 16
ARM GAS  /tmp/ccKRyzhl.s 			page 16


 609 0056 4022     		movs	r2, #64
 610 0058 0021     		movs	r1, #0
 611 005a 1846     		mov	r0, r3
 612 005c FFF7FEFF 		bl	memset
 251:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****         (void) strncpy(tab->tab[offset],tab->curcmd,CN_CMDLEN_MAX);
 613              		.loc 1 251 32
 614 0060 BB68     		ldr	r3, [r7, #8]
 615 0062 0133     		adds	r3, r3, #1
 616 0064 9B01     		lsls	r3, r3, #6
 617 0066 7A68     		ldr	r2, [r7, #4]
 618 0068 1344     		add	r3, r3, r2
 619 006a 0133     		adds	r3, r3, #1
 620              		.loc 1 251 44
 621 006c 7968     		ldr	r1, [r7, #4]
 622              		.loc 1 251 16
 623 006e 4022     		movs	r2, #64
 624 0070 1846     		mov	r0, r3
 625 0072 FFF7FEFF 		bl	strncpy
 252:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****         offset = (offset +1)%CN_CMD_CACHE;
 626              		.loc 1 252 26
 627 0076 BB68     		ldr	r3, [r7, #8]
 628 0078 0133     		adds	r3, r3, #1
 629              		.loc 1 252 16
 630 007a 5A42     		rsbs	r2, r3, #0
 631 007c 03F00303 		and	r3, r3, #3
 632 0080 02F00302 		and	r2, r2, #3
 633 0084 58BF     		it	pl
 634 0086 5342     		rsbpl	r3, r2, #0
 635 0088 BB60     		str	r3, [r7, #8]
 253:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****         tab->taboffset = offset;
 636              		.loc 1 253 24
 637 008a BB68     		ldr	r3, [r7, #8]
 638 008c DAB2     		uxtb	r2, r3
 639 008e 7B68     		ldr	r3, [r7, #4]
 640 0090 83F84121 		strb	r2, [r3, #321]
 254:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****     }
 255:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****     return;
 641              		.loc 1 255 5
 642 0094 00BF     		nop
 643              	.L35:
 644 0096 00BF     		nop
 256:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** }
 645              		.loc 1 256 1
 646 0098 1037     		adds	r7, r7, #16
 647              	.LCFI39:
 648              		.cfi_def_cfa_offset 8
 649 009a BD46     		mov	sp, r7
 650              	.LCFI40:
 651              		.cfi_def_cfa_register 13
 652              		@ sp needed
 653 009c 80BD     		pop	{r7, pc}
 654              		.cfi_endproc
 655              	.LFE12:
 657              		.section	.text.shell_insert_string,"ax",%progbits
 658              		.align	1
 659              		.syntax unified
 660              		.thumb
ARM GAS  /tmp/ccKRyzhl.s 			page 17


 661              		.thumb_func
 662              		.fpu fpv4-sp-d16
 664              	shell_insert_string:
 665              	.LFB13:
 257:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** 
 258:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** /*******************************************************************************
 259:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** function     :insert string at the cursor's position
 260:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** parameters   :
 261:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** instruction  :check if it has been cached.
 262:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** *******************************************************************************/
 263:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** static void shell_insert_string(struct shell_buffer_t *tab, const char *str) {
 666              		.loc 1 263 78
 667              		.cfi_startproc
 668              		@ args = 0, pretend = 0, frame = 24
 669              		@ frame_needed = 1, uses_anonymous_args = 0
 670 0000 90B5     		push	{r4, r7, lr}
 671              	.LCFI41:
 672              		.cfi_def_cfa_offset 12
 673              		.cfi_offset 4, -12
 674              		.cfi_offset 7, -8
 675              		.cfi_offset 14, -4
 676 0002 87B0     		sub	sp, sp, #28
 677              	.LCFI42:
 678              		.cfi_def_cfa_offset 40
 679 0004 00AF     		add	r7, sp, #0
 680              	.LCFI43:
 681              		.cfi_def_cfa_register 7
 682 0006 7860     		str	r0, [r7, #4]
 683 0008 3960     		str	r1, [r7]
 264:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****     char *cursor;
 265:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****     cursor = tab->curcmd + tab->curoffset;
 684              		.loc 1 265 14
 685 000a 7B68     		ldr	r3, [r7, #4]
 686              		.loc 1 265 31
 687 000c 7A68     		ldr	r2, [r7, #4]
 688 000e 92F84020 		ldrb	r2, [r2, #64]	@ zero_extendqisi2
 689              		.loc 1 265 12
 690 0012 1344     		add	r3, r3, r2
 691 0014 7B61     		str	r3, [r7, #20]
 266:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****     int cursor_len = strlen(cursor);
 692              		.loc 1 266 22
 693 0016 7869     		ldr	r0, [r7, #20]
 694 0018 FFF7FEFF 		bl	strlen
 695 001c 0346     		mov	r3, r0
 696              		.loc 1 266 9
 697 001e FB60     		str	r3, [r7, #12]
 267:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****     int str_len = strlen(str);
 698              		.loc 1 267 19
 699 0020 3868     		ldr	r0, [r7]
 700 0022 FFF7FEFF 		bl	strlen
 701 0026 0346     		mov	r3, r0
 702              		.loc 1 267 9
 703 0028 BB60     		str	r3, [r7, #8]
 268:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****     shell_put_string(str);
 704              		.loc 1 268 5
 705 002a 3868     		ldr	r0, [r7]
 706 002c FFF7FEFF 		bl	shell_put_string
ARM GAS  /tmp/ccKRyzhl.s 			page 18


 269:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****     shell_put_string(cursor);
 707              		.loc 1 269 5
 708 0030 7869     		ldr	r0, [r7, #20]
 709 0032 FFF7FEFF 		bl	shell_put_string
 270:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****     shell_moves_cursor_left(cursor_len);
 710              		.loc 1 270 5
 711 0036 F868     		ldr	r0, [r7, #12]
 712 0038 FFF7FEFF 		bl	shell_moves_cursor_left
 271:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****     
 272:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****     tab->curoffset += str_len;
 713              		.loc 1 272 20
 714 003c 7B68     		ldr	r3, [r7, #4]
 715 003e 93F84020 		ldrb	r2, [r3, #64]	@ zero_extendqisi2
 716 0042 BB68     		ldr	r3, [r7, #8]
 717 0044 DBB2     		uxtb	r3, r3
 718 0046 1344     		add	r3, r3, r2
 719 0048 DAB2     		uxtb	r2, r3
 720 004a 7B68     		ldr	r3, [r7, #4]
 721 004c 83F84020 		strb	r2, [r3, #64]
 273:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****     cursor = tab->curcmd + strlen(tab->curcmd) + str_len;
 722              		.loc 1 273 14
 723 0050 7C68     		ldr	r4, [r7, #4]
 724              		.loc 1 273 38
 725 0052 7B68     		ldr	r3, [r7, #4]
 726              		.loc 1 273 28
 727 0054 1846     		mov	r0, r3
 728 0056 FFF7FEFF 		bl	strlen
 729 005a 0246     		mov	r2, r0
 730              		.loc 1 273 48
 731 005c BB68     		ldr	r3, [r7, #8]
 732 005e 1344     		add	r3, r3, r2
 733              		.loc 1 273 12
 734 0060 2344     		add	r3, r3, r4
 735 0062 7B61     		str	r3, [r7, #20]
 274:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****     *(cursor--) = 0;
 736              		.loc 1 274 13
 737 0064 7B69     		ldr	r3, [r7, #20]
 738 0066 5A1E     		subs	r2, r3, #1
 739 0068 7A61     		str	r2, [r7, #20]
 740              		.loc 1 274 17
 741 006a 0022     		movs	r2, #0
 742 006c 1A70     		strb	r2, [r3]
 743              	.LBB2:
 275:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****     for (int i = 0; i < cursor_len; i++) {
 744              		.loc 1 275 14
 745 006e 0023     		movs	r3, #0
 746 0070 3B61     		str	r3, [r7, #16]
 747              		.loc 1 275 5
 748 0072 0CE0     		b	.L37
 749              	.L38:
 276:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****         *cursor = *(cursor - str_len);
 750              		.loc 1 276 28 discriminator 3
 751 0074 BB68     		ldr	r3, [r7, #8]
 752 0076 5B42     		rsbs	r3, r3, #0
 753 0078 7A69     		ldr	r2, [r7, #20]
 754 007a 1344     		add	r3, r3, r2
 755              		.loc 1 276 19 discriminator 3
ARM GAS  /tmp/ccKRyzhl.s 			page 19


 756 007c 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 757              		.loc 1 276 17 discriminator 3
 758 007e 7B69     		ldr	r3, [r7, #20]
 759 0080 1A70     		strb	r2, [r3]
 277:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****         cursor--;
 760              		.loc 1 277 15 discriminator 3
 761 0082 7B69     		ldr	r3, [r7, #20]
 762 0084 013B     		subs	r3, r3, #1
 763 0086 7B61     		str	r3, [r7, #20]
 275:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****     for (int i = 0; i < cursor_len; i++) {
 764              		.loc 1 275 38 discriminator 3
 765 0088 3B69     		ldr	r3, [r7, #16]
 766 008a 0133     		adds	r3, r3, #1
 767 008c 3B61     		str	r3, [r7, #16]
 768              	.L37:
 275:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****     for (int i = 0; i < cursor_len; i++) {
 769              		.loc 1 275 5 discriminator 1
 770 008e 3A69     		ldr	r2, [r7, #16]
 771 0090 FB68     		ldr	r3, [r7, #12]
 772 0092 9A42     		cmp	r2, r3
 773 0094 EEDB     		blt	.L38
 774              	.LBE2:
 278:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****     }
 279:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****     cursor = cursor - (str_len - 1);
 775              		.loc 1 279 21
 776 0096 BB68     		ldr	r3, [r7, #8]
 777 0098 C3F10103 		rsb	r3, r3, #1
 778              		.loc 1 279 12
 779 009c 7A69     		ldr	r2, [r7, #20]
 780 009e 1344     		add	r3, r3, r2
 781 00a0 7B61     		str	r3, [r7, #20]
 280:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****     (void) strncpy(cursor, str, str_len);
 782              		.loc 1 280 12
 783 00a2 BB68     		ldr	r3, [r7, #8]
 784 00a4 1A46     		mov	r2, r3
 785 00a6 3968     		ldr	r1, [r7]
 786 00a8 7869     		ldr	r0, [r7, #20]
 787 00aa FFF7FEFF 		bl	strncpy
 281:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** }
 788              		.loc 1 281 1
 789 00ae 00BF     		nop
 790 00b0 1C37     		adds	r7, r7, #28
 791              	.LCFI44:
 792              		.cfi_def_cfa_offset 12
 793 00b2 BD46     		mov	sp, r7
 794              	.LCFI45:
 795              		.cfi_def_cfa_register 13
 796              		@ sp needed
 797 00b4 90BD     		pop	{r4, r7, pc}
 798              		.cfi_endproc
 799              	.LFE13:
 801              		.section	.rodata
 802              		.align	2
 803              	.LC3:
 804 002c 5B25735D 		.ascii	"[%s][%u][%s:%d] \012\015\015\012\000"
 804      5B25755D 
 804      5B25733A 
ARM GAS  /tmp/ccKRyzhl.s 			page 20


 804      25645D20 
 804      0A0D0D0A 
 805              		.section	.text.shell_server_entry,"ax",%progbits
 806              		.align	1
 807              		.syntax unified
 808              		.thumb
 809              		.thumb_func
 810              		.fpu fpv4-sp-d16
 812              	shell_server_entry:
 813              	.LFB14:
 282:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** /*******************************************************************************
 283:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** function     :this is the  shell server task entry
 284:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** parameters   :
 285:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** instruction  :we get character from the input device each time,cached it in the 
 286:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****               current command line,if enter key received, then do command execute;
 287:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****               if other virtual key received, then do the specified action.
 288:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** *******************************************************************************/
 289:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** static int shell_server_entry(void *args)
 290:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** {
 814              		.loc 1 290 1
 815              		.cfi_startproc
 816              		@ args = 0, pretend = 0, frame = 376
 817              		@ frame_needed = 1, uses_anonymous_args = 0
 818 0000 90B5     		push	{r4, r7, lr}
 819              	.LCFI46:
 820              		.cfi_def_cfa_offset 12
 821              		.cfi_offset 4, -12
 822              		.cfi_offset 7, -8
 823              		.cfi_offset 14, -4
 824 0002 E1B0     		sub	sp, sp, #388
 825              	.LCFI47:
 826              		.cfi_def_cfa_offset 400
 827 0004 02AF     		add	r7, sp, #8
 828              	.LCFI48:
 829              		.cfi_def_cfa 7, 392
 830 0006 3B1D     		adds	r3, r7, #4
 831 0008 1860     		str	r0, [r3]
 291:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****     int    ch;
 292:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****     int   len;
 293:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****     unsigned char    offset;
 294:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****     unsigned int   vk = CN_VIRTUAL_KEY_NULL;
 832              		.loc 1 294 20
 833 000a 0023     		movs	r3, #0
 834 000c C7F87431 		str	r3, [r7, #372]
 295:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****     unsigned int   vkmask = CN_VIRTUAL_KEY_NULL;
 835              		.loc 1 295 20
 836 0010 0023     		movs	r3, #0
 837 0012 C7F87031 		str	r3, [r7, #368]
 296:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****     struct shell_buffer_t shell_cmd_cache; 
 297:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** 
 298:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****     (void) memset(&shell_cmd_cache,0,sizeof(shell_cmd_cache));  //initialize the buffer
 838              		.loc 1 298 12
 839 0016 07F10C03 		add	r3, r7, #12
 840 001a 4FF4A172 		mov	r2, #322
 841 001e 0021     		movs	r1, #0
 842 0020 1846     		mov	r0, r3
 843 0022 FFF7FEFF 		bl	memset
ARM GAS  /tmp/ccKRyzhl.s 			page 21


 299:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****     shell_put_string(gs_welcome_info);     //put the welcome information
 844              		.loc 1 299 5
 845 0026 E54B     		ldr	r3, .L83
 846 0028 1B68     		ldr	r3, [r3]
 847 002a 1846     		mov	r0, r3
 848 002c FFF7FEFF 		bl	shell_put_string
 300:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****     shell_put_index();                                   //do initialize
 849              		.loc 1 300 5
 850 0030 FFF7FEFF 		bl	shell_put_index
 851              	.L81:
 301:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****     while(1){
 302:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****         ch= shell_get_char();
 852              		.loc 1 302 13
 853 0034 FFF7FEFF 		bl	shell_get_char
 854 0038 0346     		mov	r3, r0
 855              		.loc 1 302 11
 856 003a C7F85031 		str	r3, [r7, #336]
 303:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****         if((ch == CN_VIRTUAL_KEY_NULL)||(EOF == ch)||(ch == 0xFF)){
 857              		.loc 1 303 16
 858 003e D7F85031 		ldr	r3, [r7, #336]
 859              		.loc 1 303 11
 860 0042 002B     		cmp	r3, #0
 861 0044 00F05683 		beq	.L82
 862              		.loc 1 303 46 discriminator 1
 863 0048 D7F85031 		ldr	r3, [r7, #336]
 864              		.loc 1 303 39 discriminator 1
 865 004c B3F1FF3F 		cmp	r3, #-1
 866 0050 00F05083 		beq	.L82
 867              		.loc 1 303 58 discriminator 2
 868 0054 D7F85031 		ldr	r3, [r7, #336]
 869              		.loc 1 303 52 discriminator 2
 870 0058 FF2B     		cmp	r3, #255
 871 005a 00F04B83 		beq	.L82
 304:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****             continue;
 305:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****         }
 306:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****         if((vk&0xFF) != 0)  {
 872              		.loc 1 306 15
 873 005e D7F87431 		ldr	r3, [r7, #372]
 874 0062 DBB2     		uxtb	r3, r3
 875              		.loc 1 306 11
 876 0064 002B     		cmp	r3, #0
 877 0066 22D0     		beq	.L43
 307:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****             if(((vk>>8)&0xff) == CN_VIRTUAL_KEY_NULL)  {
 878              		.loc 1 307 20
 879 0068 D7F87431 		ldr	r3, [r7, #372]
 880 006c 1B0A     		lsrs	r3, r3, #8
 881              		.loc 1 307 24
 882 006e DBB2     		uxtb	r3, r3
 883              		.loc 1 307 15
 884 0070 002B     		cmp	r3, #0
 885 0072 09D1     		bne	.L44
 308:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 vk|=(ch<<8); 
 886              		.loc 1 308 24
 887 0074 D7F85031 		ldr	r3, [r7, #336]
 888 0078 1B02     		lsls	r3, r3, #8
 889 007a 1A46     		mov	r2, r3
 890              		.loc 1 308 19
ARM GAS  /tmp/ccKRyzhl.s 			page 22


 891 007c D7F87431 		ldr	r3, [r7, #372]
 892 0080 1343     		orrs	r3, r3, r2
 893 0082 C7F87431 		str	r3, [r7, #372]
 309:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 continue;    
 894              		.loc 1 309 17
 895 0086 36E3     		b	.L42
 896              	.L44:
 310:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****             }
 311:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****             else  {
 312:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 vk |= (ch <<16);//this is the vk code
 897              		.loc 1 312 27
 898 0088 D7F85031 		ldr	r3, [r7, #336]
 899 008c 1B04     		lsls	r3, r3, #16
 900 008e 1A46     		mov	r2, r3
 901              		.loc 1 312 20
 902 0090 D7F87431 		ldr	r3, [r7, #372]
 903 0094 1343     		orrs	r3, r3, r2
 904 0096 C7F87431 		str	r3, [r7, #372]
 313:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 vkmask |= (ch <<16);
 905              		.loc 1 313 31
 906 009a D7F85031 		ldr	r3, [r7, #336]
 907 009e 1B04     		lsls	r3, r3, #16
 908 00a0 1A46     		mov	r2, r3
 909              		.loc 1 313 24
 910 00a2 D7F87031 		ldr	r3, [r7, #368]
 911 00a6 1343     		orrs	r3, r3, r2
 912 00a8 C7F87031 		str	r3, [r7, #368]
 913 00ac 03E0     		b	.L45
 914              	.L43:
 314:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****             }
 315:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****         }
 316:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****         else{
 317:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****             vkmask  = ch;
 915              		.loc 1 317 21
 916 00ae D7F85031 		ldr	r3, [r7, #336]
 917 00b2 C7F87031 		str	r3, [r7, #368]
 918              	.L45:
 318:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****         }
 319:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****         switch (vkmask)
 919              		.loc 1 319 9
 920 00b6 D7F87031 		ldr	r3, [r7, #368]
 921 00ba C14A     		ldr	r2, .L83+4
 922 00bc 9342     		cmp	r3, r2
 923 00be 5DD0     		beq	.L46
 924 00c0 D7F87031 		ldr	r3, [r7, #368]
 925 00c4 BE4A     		ldr	r2, .L83+4
 926 00c6 9342     		cmp	r3, r2
 927 00c8 00F2EE82 		bhi	.L47
 928 00cc D7F87031 		ldr	r3, [r7, #368]
 929 00d0 BC4A     		ldr	r2, .L83+8
 930 00d2 9342     		cmp	r3, r2
 931 00d4 6FD0     		beq	.L48
 932 00d6 D7F87031 		ldr	r3, [r7, #368]
 933 00da BA4A     		ldr	r2, .L83+8
 934 00dc 9342     		cmp	r3, r2
 935 00de 00F2E382 		bhi	.L47
 936 00e2 D7F87031 		ldr	r3, [r7, #368]
ARM GAS  /tmp/ccKRyzhl.s 			page 23


 937 00e6 B84A     		ldr	r2, .L83+12
 938 00e8 9342     		cmp	r3, r2
 939 00ea 00F0FA80 		beq	.L49
 940 00ee D7F87031 		ldr	r3, [r7, #368]
 941 00f2 B54A     		ldr	r2, .L83+12
 942 00f4 9342     		cmp	r3, r2
 943 00f6 00F2D782 		bhi	.L47
 944 00fa D7F87031 		ldr	r3, [r7, #368]
 945 00fe 1B2B     		cmp	r3, #27
 946 0100 36D8     		bhi	.L50
 947 0102 D7F87031 		ldr	r3, [r7, #368]
 948 0106 082B     		cmp	r3, #8
 949 0108 C0F0CE82 		bcc	.L47
 950 010c D7F87031 		ldr	r3, [r7, #368]
 951 0110 083B     		subs	r3, r3, #8
 952 0112 132B     		cmp	r3, #19
 953 0114 00F2C882 		bhi	.L47
 954 0118 01A2     		adr	r2, .L52
 955 011a 52F823F0 		ldr	pc, [r2, r3, lsl #2]
 956 011e 00BF     		.p2align 2
 957              	.L52:
 958 0120 15060000 		.word	.L56+1
 959 0124 D1030000 		.word	.L55+1
 960 0128 A3050000 		.word	.L54+1
 961 012c A9060000 		.word	.L47+1
 962 0130 A9060000 		.word	.L47+1
 963 0134 31050000 		.word	.L53+1
 964 0138 A9060000 		.word	.L47+1
 965 013c A9060000 		.word	.L47+1
 966 0140 A9060000 		.word	.L47+1
 967 0144 A9060000 		.word	.L47+1
 968 0148 A9060000 		.word	.L47+1
 969 014c A9060000 		.word	.L47+1
 970 0150 A9060000 		.word	.L47+1
 971 0154 A9060000 		.word	.L47+1
 972 0158 A9060000 		.word	.L47+1
 973 015c A9060000 		.word	.L47+1
 974 0160 A9060000 		.word	.L47+1
 975 0164 A9060000 		.word	.L47+1
 976 0168 A9060000 		.word	.L47+1
 977 016c 9B060000 		.word	.L51+1
 978              		.p2align 1
 979              	.L50:
 980 0170 D7F87031 		ldr	r3, [r7, #368]
 981 0174 954A     		ldr	r2, .L83+16
 982 0176 9342     		cmp	r3, r2
 983 0178 47D0     		beq	.L57
 984 017a 95E2     		b	.L47
 985              	.L46:
 320:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****         {
 321:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****             case CN_VIRTUAL_KEY_ARROWL:        //left,make the cursor moved left
 322:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 if(shell_cmd_cache.curoffset > 0){
 986              		.loc 1 322 35
 987 017c 07F10C03 		add	r3, r7, #12
 988 0180 93F84030 		ldrb	r3, [r3, #64]	@ zero_extendqisi2
 989              		.loc 1 322 19
 990 0184 002B     		cmp	r3, #0
ARM GAS  /tmp/ccKRyzhl.s 			page 24


 991 0186 0DD0     		beq	.L58
 323:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                     shell_cmd_cache.curoffset--;
 992              		.loc 1 323 36
 993 0188 07F10C03 		add	r3, r7, #12
 994 018c 93F84030 		ldrb	r3, [r3, #64]	@ zero_extendqisi2
 995              		.loc 1 323 46
 996 0190 013B     		subs	r3, r3, #1
 997 0192 DAB2     		uxtb	r2, r3
 998 0194 07F10C03 		add	r3, r7, #12
 999 0198 83F84020 		strb	r2, [r3, #64]
 324:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                     //push back the left cursor and make the terminal display know what has happene
 325:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                     shell_moves_cursor_left(1);
 1000              		.loc 1 325 21
 1001 019c 0120     		movs	r0, #1
 1002 019e FFF7FEFF 		bl	shell_moves_cursor_left
 1003 01a2 01E0     		b	.L59
 1004              	.L58:
 326:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 }else
 327:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                     shell_bell();
 1005              		.loc 1 327 21
 1006 01a4 FFF7FEFF 		bl	shell_bell
 1007              	.L59:
 328:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 //flush the vk
 329:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 vk = CN_VIRTUAL_KEY_NULL;
 1008              		.loc 1 329 20
 1009 01a8 0023     		movs	r3, #0
 1010 01aa C7F87431 		str	r3, [r7, #372]
 330:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 vkmask = CN_VIRTUAL_KEY_NULL;
 1011              		.loc 1 330 24
 1012 01ae 0023     		movs	r3, #0
 1013 01b0 C7F87031 		str	r3, [r7, #368]
 331:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 break;
 1014              		.loc 1 331 17
 1015 01b4 9FE2     		b	.L42
 1016              	.L48:
 332:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****             case CN_VIRTUAL_KEY_ARROWR:        //right,make the cursor moved right,if the buffer ha
 333:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 len = strlen(shell_cmd_cache.curcmd);
 1017              		.loc 1 333 23
 1018 01b6 07F10C03 		add	r3, r7, #12
 1019 01ba 1846     		mov	r0, r3
 1020 01bc FFF7FEFF 		bl	strlen
 1021 01c0 0346     		mov	r3, r0
 1022              		.loc 1 333 21
 1023 01c2 C7F86831 		str	r3, [r7, #360]
 334:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 if(shell_cmd_cache.curoffset < len){
 1024              		.loc 1 334 35
 1025 01c6 07F10C03 		add	r3, r7, #12
 1026 01ca 93F84030 		ldrb	r3, [r3, #64]	@ zero_extendqisi2
 1027 01ce 1A46     		mov	r2, r3
 1028              		.loc 1 334 19
 1029 01d0 D7F86831 		ldr	r3, [r7, #360]
 1030 01d4 9342     		cmp	r3, r2
 1031 01d6 0FDD     		ble	.L60
 335:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                     shell_cmd_cache.curoffset++;
 1032              		.loc 1 335 36
 1033 01d8 07F10C03 		add	r3, r7, #12
 1034 01dc 93F84030 		ldrb	r3, [r3, #64]	@ zero_extendqisi2
ARM GAS  /tmp/ccKRyzhl.s 			page 25


 1035              		.loc 1 335 46
 1036 01e0 0133     		adds	r3, r3, #1
 1037 01e2 DAB2     		uxtb	r2, r3
 1038 01e4 07F10C03 		add	r3, r7, #12
 1039 01e8 83F84020 		strb	r2, [r3, #64]
 336:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                     //push back the right cursor and make the terminal display know what has happen
 337:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                     shell_moves_cursor_right(1,vk);
 1040              		.loc 1 337 21
 1041 01ec D7F87411 		ldr	r1, [r7, #372]
 1042 01f0 0120     		movs	r0, #1
 1043 01f2 FFF7FEFF 		bl	shell_moves_cursor_right
 1044 01f6 01E0     		b	.L61
 1045              	.L60:
 338:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 } else
 339:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 shell_bell();
 1046              		.loc 1 339 17
 1047 01f8 FFF7FEFF 		bl	shell_bell
 1048              	.L61:
 340:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 //flush the vk
 341:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 vk = CN_VIRTUAL_KEY_NULL;
 1049              		.loc 1 341 20
 1050 01fc 0023     		movs	r3, #0
 1051 01fe C7F87431 		str	r3, [r7, #372]
 342:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 vkmask = CN_VIRTUAL_KEY_NULL;
 1052              		.loc 1 342 24
 1053 0202 0023     		movs	r3, #0
 1054 0204 C7F87031 		str	r3, [r7, #368]
 343:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 break;
 1055              		.loc 1 343 17
 1056 0208 75E2     		b	.L42
 1057              	.L57:
 344:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****             case CN_VIRTUAL_KEY_ARROWU:        //moves to the previous command
 345:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 //first,we should clear what we has get,do the reset current command
 346:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 //first moves to the left,then putsnxt to the next to the right,then back
 347:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 len = strlen(shell_cmd_cache.curcmd);
 1058              		.loc 1 347 23
 1059 020a 07F10C03 		add	r3, r7, #12
 1060 020e 1846     		mov	r0, r3
 1061 0210 FFF7FEFF 		bl	strlen
 1062 0214 0346     		mov	r3, r0
 1063              		.loc 1 347 21
 1064 0216 C7F86831 		str	r3, [r7, #360]
 348:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 if(shell_cmd_cache.curoffset < len){
 1065              		.loc 1 348 35
 1066 021a 07F10C03 		add	r3, r7, #12
 1067 021e 93F84030 		ldrb	r3, [r3, #64]	@ zero_extendqisi2
 1068 0222 1A46     		mov	r2, r3
 1069              		.loc 1 348 19
 1070 0224 D7F86831 		ldr	r3, [r7, #360]
 1071 0228 9342     		cmp	r3, r2
 1072 022a 11DD     		ble	.L62
 349:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                     shell_put_space(len - shell_cmd_cache.curoffset);
 1073              		.loc 1 349 58
 1074 022c 07F10C03 		add	r3, r7, #12
 1075 0230 93F84030 		ldrb	r3, [r3, #64]	@ zero_extendqisi2
 1076 0234 1A46     		mov	r2, r3
 1077              		.loc 1 349 21
ARM GAS  /tmp/ccKRyzhl.s 			page 26


 1078 0236 D7F86831 		ldr	r3, [r7, #360]
 1079 023a 9B1A     		subs	r3, r3, r2
 1080 023c 1846     		mov	r0, r3
 1081 023e FFF7FEFF 		bl	shell_put_space
 350:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                     shell_cmd_cache.curoffset = len;
 1082              		.loc 1 350 47
 1083 0242 D7F86831 		ldr	r3, [r7, #360]
 1084 0246 DAB2     		uxtb	r2, r3
 1085 0248 07F10C03 		add	r3, r7, #12
 1086 024c 83F84020 		strb	r2, [r3, #64]
 1087              	.L62:
 351:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 }
 352:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 shell_put_backspace(len);
 1088              		.loc 1 352 17
 1089 0250 D7F86801 		ldr	r0, [r7, #360]
 1090 0254 FFF7FEFF 		bl	shell_put_backspace
 353:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 (void) memset(shell_cmd_cache.curcmd,0,CN_CMDLEN_MAX);
 1091              		.loc 1 353 24
 1092 0258 07F10C03 		add	r3, r7, #12
 1093 025c 4022     		movs	r2, #64
 1094 025e 0021     		movs	r1, #0
 1095 0260 1846     		mov	r0, r3
 1096 0262 FFF7FEFF 		bl	memset
 354:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 shell_cmd_cache.curoffset = 0;
 1097              		.loc 1 354 43
 1098 0266 07F10C03 		add	r3, r7, #12
 1099 026a 0022     		movs	r2, #0
 1100 026c 83F84020 		strb	r2, [r3, #64]
 355:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 //then copy the previous command to current and echo all the info
 356:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 offset = (shell_cmd_cache.taboffset +CN_CMD_CACHE -1)%CN_CMD_CACHE;
 1101              		.loc 1 356 42
 1102 0270 07F10C03 		add	r3, r7, #12
 1103 0274 93F84131 		ldrb	r3, [r3, #321]	@ zero_extendqisi2
 1104              		.loc 1 356 67
 1105 0278 0333     		adds	r3, r3, #3
 1106              		.loc 1 356 70
 1107 027a 5A42     		rsbs	r2, r3, #0
 1108 027c 03F00303 		and	r3, r3, #3
 1109 0280 02F00302 		and	r2, r2, #3
 1110 0284 58BF     		it	pl
 1111 0286 5342     		rsbpl	r3, r2, #0
 1112              		.loc 1 356 24
 1113 0288 87F86731 		strb	r3, [r7, #359]
 357:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 (void) strncpy(shell_cmd_cache.curcmd,shell_cmd_cache.tab[offset],CN_CMDLEN_MAX);
 1114              		.loc 1 357 74
 1115 028c 97F86731 		ldrb	r3, [r7, #359]	@ zero_extendqisi2
 1116 0290 07F10C02 		add	r2, r7, #12
 1117 0294 0133     		adds	r3, r3, #1
 1118 0296 9B01     		lsls	r3, r3, #6
 1119 0298 1344     		add	r3, r3, r2
 1120 029a 591C     		adds	r1, r3, #1
 1121              		.loc 1 357 24
 1122 029c 07F10C03 		add	r3, r7, #12
 1123 02a0 4022     		movs	r2, #64
 1124 02a2 1846     		mov	r0, r3
 1125 02a4 FFF7FEFF 		bl	strncpy
 358:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 shell_cmd_cache.taboffset = offset;
ARM GAS  /tmp/ccKRyzhl.s 			page 27


 1126              		.loc 1 358 43
 1127 02a8 07F10C03 		add	r3, r7, #12
 1128 02ac 97F86721 		ldrb	r2, [r7, #359]
 1129 02b0 83F84121 		strb	r2, [r3, #321]
 359:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 shell_cmd_cache.curoffset = strlen(shell_cmd_cache.curcmd);
 1130              		.loc 1 359 45
 1131 02b4 07F10C03 		add	r3, r7, #12
 1132 02b8 1846     		mov	r0, r3
 1133 02ba FFF7FEFF 		bl	strlen
 1134 02be 0346     		mov	r3, r0
 1135              		.loc 1 359 43
 1136 02c0 DAB2     		uxtb	r2, r3
 1137 02c2 07F10C03 		add	r3, r7, #12
 1138 02c6 83F84020 		strb	r2, [r3, #64]
 360:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 //OK,now puts all the current character to the terminal
 361:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 shell_put_string(shell_cmd_cache.curcmd);
 1139              		.loc 1 361 17
 1140 02ca 07F10C03 		add	r3, r7, #12
 1141 02ce 1846     		mov	r0, r3
 1142 02d0 FFF7FEFF 		bl	shell_put_string
 362:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 //flush the vk
 363:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 vk = CN_VIRTUAL_KEY_NULL;
 1143              		.loc 1 363 20
 1144 02d4 0023     		movs	r3, #0
 1145 02d6 C7F87431 		str	r3, [r7, #372]
 364:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 vkmask = CN_VIRTUAL_KEY_NULL;
 1146              		.loc 1 364 24
 1147 02da 0023     		movs	r3, #0
 1148 02dc C7F87031 		str	r3, [r7, #368]
 365:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 break;
 1149              		.loc 1 365 17
 1150 02e0 09E2     		b	.L42
 1151              	.L49:
 366:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****             case CN_VIRTUAL_KEY_ARROWD:        //moves to the next command
 367:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 //first,we should clear what we has get,do the reset current command
 368:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 //first moves to the right,then backspace all the input
 369:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 len = strlen(shell_cmd_cache.curcmd);
 1152              		.loc 1 369 23
 1153 02e2 07F10C03 		add	r3, r7, #12
 1154 02e6 1846     		mov	r0, r3
 1155 02e8 FFF7FEFF 		bl	strlen
 1156 02ec 0346     		mov	r3, r0
 1157              		.loc 1 369 21
 1158 02ee C7F86831 		str	r3, [r7, #360]
 370:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 if(shell_cmd_cache.curoffset < len){
 1159              		.loc 1 370 35
 1160 02f2 07F10C03 		add	r3, r7, #12
 1161 02f6 93F84030 		ldrb	r3, [r3, #64]	@ zero_extendqisi2
 1162 02fa 1A46     		mov	r2, r3
 1163              		.loc 1 370 19
 1164 02fc D7F86831 		ldr	r3, [r7, #360]
 1165 0300 9342     		cmp	r3, r2
 1166 0302 11DD     		ble	.L63
 371:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                     shell_put_space(len - shell_cmd_cache.curoffset);
 1167              		.loc 1 371 58
 1168 0304 07F10C03 		add	r3, r7, #12
 1169 0308 93F84030 		ldrb	r3, [r3, #64]	@ zero_extendqisi2
ARM GAS  /tmp/ccKRyzhl.s 			page 28


 1170 030c 1A46     		mov	r2, r3
 1171              		.loc 1 371 21
 1172 030e D7F86831 		ldr	r3, [r7, #360]
 1173 0312 9B1A     		subs	r3, r3, r2
 1174 0314 1846     		mov	r0, r3
 1175 0316 FFF7FEFF 		bl	shell_put_space
 372:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                     shell_cmd_cache.curoffset = len;
 1176              		.loc 1 372 47
 1177 031a D7F86831 		ldr	r3, [r7, #360]
 1178 031e DAB2     		uxtb	r2, r3
 1179 0320 07F10C03 		add	r3, r7, #12
 1180 0324 83F84020 		strb	r2, [r3, #64]
 1181              	.L63:
 373:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 }
 374:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 shell_put_backspace(len);
 1182              		.loc 1 374 17
 1183 0328 D7F86801 		ldr	r0, [r7, #360]
 1184 032c FFF7FEFF 		bl	shell_put_backspace
 375:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 (void) memset(shell_cmd_cache.curcmd,0,CN_CMDLEN_MAX);
 1185              		.loc 1 375 24
 1186 0330 07F10C03 		add	r3, r7, #12
 1187 0334 4022     		movs	r2, #64
 1188 0336 0021     		movs	r1, #0
 1189 0338 1846     		mov	r0, r3
 1190 033a FFF7FEFF 		bl	memset
 376:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 shell_cmd_cache.curoffset = 0;
 1191              		.loc 1 376 43
 1192 033e 07F10C03 		add	r3, r7, #12
 1193 0342 0022     		movs	r2, #0
 1194 0344 83F84020 		strb	r2, [r3, #64]
 377:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 //then copy the next command to current
 378:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 offset = (shell_cmd_cache.taboffset +CN_CMD_CACHE +1)%CN_CMD_CACHE;
 1195              		.loc 1 378 42
 1196 0348 07F10C03 		add	r3, r7, #12
 1197 034c 93F84131 		ldrb	r3, [r3, #321]	@ zero_extendqisi2
 1198              		.loc 1 378 67
 1199 0350 0533     		adds	r3, r3, #5
 1200              		.loc 1 378 70
 1201 0352 5A42     		rsbs	r2, r3, #0
 1202 0354 03F00303 		and	r3, r3, #3
 1203 0358 02F00302 		and	r2, r2, #3
 1204 035c 58BF     		it	pl
 1205 035e 5342     		rsbpl	r3, r2, #0
 1206              		.loc 1 378 24
 1207 0360 87F86731 		strb	r3, [r7, #359]
 379:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 (void) strncpy(shell_cmd_cache.curcmd,shell_cmd_cache.tab[offset],CN_CMDLEN_MAX);
 1208              		.loc 1 379 74
 1209 0364 97F86731 		ldrb	r3, [r7, #359]	@ zero_extendqisi2
 1210 0368 07F10C02 		add	r2, r7, #12
 1211 036c 0133     		adds	r3, r3, #1
 1212 036e 9B01     		lsls	r3, r3, #6
 1213 0370 1344     		add	r3, r3, r2
 1214 0372 591C     		adds	r1, r3, #1
 1215              		.loc 1 379 24
 1216 0374 07F10C03 		add	r3, r7, #12
 1217 0378 4022     		movs	r2, #64
 1218 037a 1846     		mov	r0, r3
ARM GAS  /tmp/ccKRyzhl.s 			page 29


 1219 037c FFF7FEFF 		bl	strncpy
 380:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 shell_cmd_cache.taboffset = offset;
 1220              		.loc 1 380 43
 1221 0380 07F10C03 		add	r3, r7, #12
 1222 0384 97F86721 		ldrb	r2, [r7, #359]
 1223 0388 83F84121 		strb	r2, [r3, #321]
 381:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 shell_cmd_cache.curoffset = strlen(shell_cmd_cache.curcmd);
 1224              		.loc 1 381 45
 1225 038c 07F10C03 		add	r3, r7, #12
 1226 0390 1846     		mov	r0, r3
 1227 0392 FFF7FEFF 		bl	strlen
 1228 0396 0346     		mov	r3, r0
 1229              		.loc 1 381 43
 1230 0398 DAB2     		uxtb	r2, r3
 1231 039a 07F10C03 		add	r3, r7, #12
 1232 039e 83F84020 		strb	r2, [r3, #64]
 382:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 //OK,now puts all the current character to the terminal
 383:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 shell_put_string(shell_cmd_cache.curcmd);
 1233              		.loc 1 383 17
 1234 03a2 07F10C03 		add	r3, r7, #12
 1235 03a6 1846     		mov	r0, r3
 1236 03a8 FFF7FEFF 		bl	shell_put_string
 384:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 //flush the vk
 385:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 vk = CN_VIRTUAL_KEY_NULL;
 1237              		.loc 1 385 20
 1238 03ac 0023     		movs	r3, #0
 1239 03ae C7F87431 		str	r3, [r7, #372]
 386:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 vkmask = CN_VIRTUAL_KEY_NULL;
 1240              		.loc 1 386 24
 1241 03b2 0023     		movs	r3, #0
 1242 03b4 C7F87031 		str	r3, [r7, #368]
 387:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 break;
 1243              		.loc 1 387 17
 1244 03b8 9DE1     		b	.L42
 1245              	.L84:
 1246 03ba 00BF     		.align	2
 1247              	.L83:
 1248 03bc 00000000 		.word	gs_welcome_info
 1249 03c0 1B004400 		.word	4456475
 1250 03c4 1B004300 		.word	4390939
 1251 03c8 1B004200 		.word	4325403
 1252 03cc 1B004100 		.word	4259867
 1253              	.L55:
 388:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****             case CN_KEY_TAB:      //tab,should auto complete the command
 389:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 //should search the command we has installed if some index has get
 390:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 if(shell_cmd_cache.curoffset > 0) {
 1254              		.loc 1 390 35
 1255 03d0 07F10C03 		add	r3, r7, #12
 1256 03d4 93F84030 		ldrb	r3, [r3, #64]	@ zero_extendqisi2
 1257              		.loc 1 390 19
 1258 03d8 002B     		cmp	r3, #0
 1259 03da 00F0A080 		beq	.L64
 1260              	.LBB3:
 391:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                     char cursor = shell_cmd_cache.curcmd[shell_cmd_cache.curoffset];
 1261              		.loc 1 391 73
 1262 03de 07F10C03 		add	r3, r7, #12
 1263 03e2 93F84030 		ldrb	r3, [r3, #64]	@ zero_extendqisi2
ARM GAS  /tmp/ccKRyzhl.s 			page 30


 1264 03e6 1A46     		mov	r2, r3
 1265              		.loc 1 391 26
 1266 03e8 07F10C03 		add	r3, r7, #12
 1267 03ec 9B5C     		ldrb	r3, [r3, r2]
 1268 03ee 87F86631 		strb	r3, [r7, #358]
 392:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                     shell_cmd_cache.curcmd[shell_cmd_cache.curoffset] = 0;
 1269              		.loc 1 392 59
 1270 03f2 07F10C03 		add	r3, r7, #12
 1271 03f6 93F84030 		ldrb	r3, [r3, #64]	@ zero_extendqisi2
 1272 03fa 1A46     		mov	r2, r3
 1273              		.loc 1 392 71
 1274 03fc 07F10C03 		add	r3, r7, #12
 1275 0400 0021     		movs	r1, #0
 1276 0402 9954     		strb	r1, [r3, r2]
 393:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                     const struct shell_tab_matches *matches;
 394:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                     matches = shell_cmd_index((const char*)shell_cmd_cache.curcmd);
 1277              		.loc 1 394 31
 1278 0404 07F10C03 		add	r3, r7, #12
 1279 0408 1846     		mov	r0, r3
 1280 040a FFF7FEFF 		bl	shell_cmd_index
 1281 040e C7F86001 		str	r0, [r7, #352]
 395:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                     shell_cmd_cache.curcmd[shell_cmd_cache.curoffset] = cursor;
 1282              		.loc 1 395 59
 1283 0412 07F10C03 		add	r3, r7, #12
 1284 0416 93F84030 		ldrb	r3, [r3, #64]	@ zero_extendqisi2
 1285 041a 1946     		mov	r1, r3
 1286              		.loc 1 395 71
 1287 041c 07F10C03 		add	r3, r7, #12
 1288 0420 97F86621 		ldrb	r2, [r7, #358]
 1289 0424 5A54     		strb	r2, [r3, r1]
 396:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                     if (matches->len == 1) {
 1290              		.loc 1 396 32
 1291 0426 D7F86031 		ldr	r3, [r7, #352]
 1292 042a B3F84030 		ldrh	r3, [r3, #64]
 1293              		.loc 1 396 24
 1294 042e 012B     		cmp	r3, #1
 1295 0430 0ED1     		bne	.L65
 397:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                         //only one cmd matched, insert the matched cmd at current cursor
 398:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                         shell_insert_string(&shell_cmd_cache, matches->matches[0] + shell_cmd_cache
 1296              		.loc 1 398 79
 1297 0432 D7F86031 		ldr	r3, [r7, #352]
 1298 0436 1B68     		ldr	r3, [r3]
 1299              		.loc 1 398 100
 1300 0438 07F10C02 		add	r2, r7, #12
 1301 043c 92F84020 		ldrb	r2, [r2, #64]	@ zero_extendqisi2
 1302              		.loc 1 398 25
 1303 0440 1A44     		add	r2, r2, r3
 1304 0442 07F10C03 		add	r3, r7, #12
 1305 0446 1146     		mov	r1, r2
 1306 0448 1846     		mov	r0, r3
 1307 044a FFF7FEFF 		bl	shell_insert_string
 1308 044e 68E0     		b	.L66
 1309              	.L65:
 399:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                     } else if (matches->len > 1) {
 1310              		.loc 1 399 39
 1311 0450 D7F86031 		ldr	r3, [r7, #352]
 1312 0454 B3F84030 		ldrh	r3, [r3, #64]
ARM GAS  /tmp/ccKRyzhl.s 			page 31


 1313              		.loc 1 399 31
 1314 0458 012B     		cmp	r3, #1
 1315 045a 5DD9     		bls	.L67
 400:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                         LINK_LOG_DEBUG("\n\r");
 1316              		.loc 1 400 25
 1317 045c FFF7FEFF 		bl	link_log_level_get
 1318 0460 0346     		mov	r3, r0
 1319 0462 012B     		cmp	r3, #1
 1320 0464 0FD8     		bhi	.L68
 1321              		.loc 1 400 25 is_stmt 0 discriminator 1
 1322 0466 0120     		movs	r0, #1
 1323 0468 FFF7FEFF 		bl	link_log_level_name
 1324 046c 0446     		mov	r4, r0
 1325 046e FFF7FEFF 		bl	osal_sys_time
 1326 0472 0246     		mov	r2, r0
 1327 0474 0B46     		mov	r3, r1
 1328 0476 4FF4C873 		mov	r3, #400
 1329 047a 0093     		str	r3, [sp]
 1330 047c 9E4B     		ldr	r3, .L85
 1331 047e 2146     		mov	r1, r4
 1332 0480 9E48     		ldr	r0, .L85+4
 1333 0482 FFF7FEFF 		bl	printf
 1334              	.L68:
 1335              	.LBB4:
 401:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                         for (int i = 0; i < matches->len; i++) {
 1336              		.loc 1 401 34 is_stmt 1
 1337 0486 0023     		movs	r3, #0
 1338 0488 C7F86C31 		str	r3, [r7, #364]
 1339              		.loc 1 401 25
 1340 048c 10E0     		b	.L69
 1341              	.L70:
 402:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                             shell_put_string(matches->matches[i]);
 1342              		.loc 1 402 29 discriminator 3
 1343 048e D7F86031 		ldr	r3, [r7, #352]
 1344 0492 D7F86C21 		ldr	r2, [r7, #364]
 1345 0496 53F82230 		ldr	r3, [r3, r2, lsl #2]
 1346 049a 1846     		mov	r0, r3
 1347 049c FFF7FEFF 		bl	shell_put_string
 403:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                             shell_put_char('\t');
 1348              		.loc 1 403 29 discriminator 3
 1349 04a0 0920     		movs	r0, #9
 1350 04a2 FFF7FEFF 		bl	shell_put_char
 401:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                         for (int i = 0; i < matches->len; i++) {
 1351              		.loc 1 401 60 discriminator 3
 1352 04a6 D7F86C31 		ldr	r3, [r7, #364]
 1353 04aa 0133     		adds	r3, r3, #1
 1354 04ac C7F86C31 		str	r3, [r7, #364]
 1355              	.L69:
 401:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                         for (int i = 0; i < matches->len; i++) {
 1356              		.loc 1 401 52 discriminator 1
 1357 04b0 D7F86031 		ldr	r3, [r7, #352]
 1358 04b4 B3F84030 		ldrh	r3, [r3, #64]
 1359 04b8 1A46     		mov	r2, r3
 401:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                         for (int i = 0; i < matches->len; i++) {
 1360              		.loc 1 401 25 discriminator 1
 1361 04ba D7F86C31 		ldr	r3, [r7, #364]
 1362 04be 9342     		cmp	r3, r2
ARM GAS  /tmp/ccKRyzhl.s 			page 32


 1363 04c0 E5DB     		blt	.L70
 1364              	.LBE4:
 404:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                         }
 405:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                         LINK_LOG_DEBUG("\n\r");
 1365              		.loc 1 405 25
 1366 04c2 FFF7FEFF 		bl	link_log_level_get
 1367 04c6 0346     		mov	r3, r0
 1368 04c8 012B     		cmp	r3, #1
 1369 04ca 0FD8     		bhi	.L71
 1370              		.loc 1 405 25 is_stmt 0 discriminator 1
 1371 04cc 0120     		movs	r0, #1
 1372 04ce FFF7FEFF 		bl	link_log_level_name
 1373 04d2 0446     		mov	r4, r0
 1374 04d4 FFF7FEFF 		bl	osal_sys_time
 1375 04d8 0246     		mov	r2, r0
 1376 04da 0B46     		mov	r3, r1
 1377 04dc 40F29513 		movw	r3, #405
 1378 04e0 0093     		str	r3, [sp]
 1379 04e2 854B     		ldr	r3, .L85
 1380 04e4 2146     		mov	r1, r4
 1381 04e6 8548     		ldr	r0, .L85+4
 1382 04e8 FFF7FEFF 		bl	printf
 1383              	.L71:
 406:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                         shell_put_index();
 1384              		.loc 1 406 25 is_stmt 1
 1385 04ec FFF7FEFF 		bl	shell_put_index
 407:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                         shell_put_string(shell_cmd_cache.curcmd);
 1386              		.loc 1 407 25
 1387 04f0 07F10C03 		add	r3, r7, #12
 1388 04f4 1846     		mov	r0, r3
 1389 04f6 FFF7FEFF 		bl	shell_put_string
 408:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                         shell_moves_cursor_left(strlen(shell_cmd_cache.curcmd) - shell_cmd_cache.cu
 1390              		.loc 1 408 49
 1391 04fa 07F10C03 		add	r3, r7, #12
 1392 04fe 1846     		mov	r0, r3
 1393 0500 FFF7FEFF 		bl	strlen
 1394 0504 0246     		mov	r2, r0
 1395              		.loc 1 408 97
 1396 0506 07F10C03 		add	r3, r7, #12
 1397 050a 93F84030 		ldrb	r3, [r3, #64]	@ zero_extendqisi2
 1398              		.loc 1 408 80
 1399 050e D31A     		subs	r3, r2, r3
 1400              		.loc 1 408 25
 1401 0510 1846     		mov	r0, r3
 1402 0512 FFF7FEFF 		bl	shell_moves_cursor_left
 1403 0516 04E0     		b	.L66
 1404              	.L67:
 409:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                     } else 
 410:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                         shell_bell();
 1405              		.loc 1 410 25
 1406 0518 FFF7FEFF 		bl	shell_bell
 1407 051c 01E0     		b	.L66
 1408              	.L64:
 1409              	.LBE3:
 411:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 } else
 412:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                     shell_bell();
 1410              		.loc 1 412 21
ARM GAS  /tmp/ccKRyzhl.s 			page 33


 1411 051e FFF7FEFF 		bl	shell_bell
 1412              	.L66:
 413:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 //flush the vk
 414:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 vk = CN_VIRTUAL_KEY_NULL;
 1413              		.loc 1 414 20
 1414 0522 0023     		movs	r3, #0
 1415 0524 C7F87431 		str	r3, [r7, #372]
 415:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 vkmask = CN_VIRTUAL_KEY_NULL;
 1416              		.loc 1 415 24
 1417 0528 0023     		movs	r3, #0
 1418 052a C7F87031 		str	r3, [r7, #368]
 416:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 break;
 1419              		.loc 1 416 17
 1420 052e E2E0     		b	.L42
 1421              	.L53:
 417:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****             case CN_KEY_LF:      //execute the command here, and push the command to the history ca
 418:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 if(strlen(shell_cmd_cache.curcmd) != 0){
 1422              		.loc 1 418 42
 1423 0530 07F10C03 		add	r3, r7, #12
 1424              		.loc 1 418 51
 1425 0534 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1426              		.loc 1 418 19
 1427 0536 002B     		cmp	r3, #0
 1428 0538 2AD0     		beq	.L72
 419:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                     LINK_LOG_DEBUG("\n\r");
 1429              		.loc 1 419 21
 1430 053a FFF7FEFF 		bl	link_log_level_get
 1431 053e 0346     		mov	r3, r0
 1432 0540 012B     		cmp	r3, #1
 1433 0542 0FD8     		bhi	.L73
 1434              		.loc 1 419 21 is_stmt 0 discriminator 1
 1435 0544 0120     		movs	r0, #1
 1436 0546 FFF7FEFF 		bl	link_log_level_name
 1437 054a 0446     		mov	r4, r0
 1438 054c FFF7FEFF 		bl	osal_sys_time
 1439 0550 0246     		mov	r2, r0
 1440 0552 0B46     		mov	r3, r1
 1441 0554 40F2A313 		movw	r3, #419
 1442 0558 0093     		str	r3, [sp]
 1443 055a 674B     		ldr	r3, .L85
 1444 055c 2146     		mov	r1, r4
 1445 055e 6748     		ldr	r0, .L85+4
 1446 0560 FFF7FEFF 		bl	printf
 1447              	.L73:
 420:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                     //copy the current to the history cache if the current command is not none
 421:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                     shell_cachecmd(&shell_cmd_cache);//must do before the execute,execute will spli
 1448              		.loc 1 421 21 is_stmt 1
 1449 0564 07F10C03 		add	r3, r7, #12
 1450 0568 1846     		mov	r0, r3
 1451 056a FFF7FEFF 		bl	shell_cachecmd
 422:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                     shell_cmd_execute(shell_cmd_cache.curcmd);  //execute the command
 1452              		.loc 1 422 21
 1453 056e 07F10C03 		add	r3, r7, #12
 1454 0572 1846     		mov	r0, r3
 1455 0574 FFF7FEFF 		bl	shell_cmd_execute
 423:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                     (void) memset(shell_cmd_cache.curcmd,0,CN_CMDLEN_MAX);
 1456              		.loc 1 423 28
ARM GAS  /tmp/ccKRyzhl.s 			page 34


 1457 0578 07F10C03 		add	r3, r7, #12
 1458 057c 4022     		movs	r2, #64
 1459 057e 0021     		movs	r1, #0
 1460 0580 1846     		mov	r0, r3
 1461 0582 FFF7FEFF 		bl	memset
 424:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                     shell_cmd_cache.curoffset = 0;
 1462              		.loc 1 424 47
 1463 0586 07F10C03 		add	r3, r7, #12
 1464 058a 0022     		movs	r2, #0
 1465 058c 83F84020 		strb	r2, [r3, #64]
 1466              	.L72:
 425:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 }
 426:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 shell_put_index();
 1467              		.loc 1 426 17
 1468 0590 FFF7FEFF 		bl	shell_put_index
 427:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 //flush the vk
 428:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 vk = CN_VIRTUAL_KEY_NULL;
 1469              		.loc 1 428 20
 1470 0594 0023     		movs	r3, #0
 1471 0596 C7F87431 		str	r3, [r7, #372]
 429:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 vkmask = CN_VIRTUAL_KEY_NULL;
 1472              		.loc 1 429 24
 1473 059a 0023     		movs	r3, #0
 1474 059c C7F87031 		str	r3, [r7, #368]
 430:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 break;
 1475              		.loc 1 430 17
 1476 05a0 A9E0     		b	.L42
 1477              	.L54:
 431:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****             case CN_KEY_CR:      //execute the command here, and push the command to the history ca
 432:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 if(strlen(shell_cmd_cache.curcmd) != 0){
 1478              		.loc 1 432 42
 1479 05a2 07F10C03 		add	r3, r7, #12
 1480              		.loc 1 432 51
 1481 05a6 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1482              		.loc 1 432 19
 1483 05a8 002B     		cmp	r3, #0
 1484 05aa 2AD0     		beq	.L74
 433:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                     LINK_LOG_DEBUG("\n\r");
 1485              		.loc 1 433 21
 1486 05ac FFF7FEFF 		bl	link_log_level_get
 1487 05b0 0346     		mov	r3, r0
 1488 05b2 012B     		cmp	r3, #1
 1489 05b4 0FD8     		bhi	.L75
 1490              		.loc 1 433 21 is_stmt 0 discriminator 1
 1491 05b6 0120     		movs	r0, #1
 1492 05b8 FFF7FEFF 		bl	link_log_level_name
 1493 05bc 0446     		mov	r4, r0
 1494 05be FFF7FEFF 		bl	osal_sys_time
 1495 05c2 0246     		mov	r2, r0
 1496 05c4 0B46     		mov	r3, r1
 1497 05c6 40F2B113 		movw	r3, #433
 1498 05ca 0093     		str	r3, [sp]
 1499 05cc 4A4B     		ldr	r3, .L85
 1500 05ce 2146     		mov	r1, r4
 1501 05d0 4A48     		ldr	r0, .L85+4
 1502 05d2 FFF7FEFF 		bl	printf
 1503              	.L75:
ARM GAS  /tmp/ccKRyzhl.s 			page 35


 434:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                     //copy the current to the history cache if the current command is not none
 435:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                     shell_cachecmd(&shell_cmd_cache);//must do before the execute,execute will spli
 1504              		.loc 1 435 21 is_stmt 1
 1505 05d6 07F10C03 		add	r3, r7, #12
 1506 05da 1846     		mov	r0, r3
 1507 05dc FFF7FEFF 		bl	shell_cachecmd
 436:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                     shell_cmd_execute(shell_cmd_cache.curcmd);  //execute the command
 1508              		.loc 1 436 21
 1509 05e0 07F10C03 		add	r3, r7, #12
 1510 05e4 1846     		mov	r0, r3
 1511 05e6 FFF7FEFF 		bl	shell_cmd_execute
 437:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                     (void) memset(shell_cmd_cache.curcmd,0,CN_CMDLEN_MAX);
 1512              		.loc 1 437 28
 1513 05ea 07F10C03 		add	r3, r7, #12
 1514 05ee 4022     		movs	r2, #64
 1515 05f0 0021     		movs	r1, #0
 1516 05f2 1846     		mov	r0, r3
 1517 05f4 FFF7FEFF 		bl	memset
 438:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                     shell_cmd_cache.curoffset = 0;
 1518              		.loc 1 438 47
 1519 05f8 07F10C03 		add	r3, r7, #12
 1520 05fc 0022     		movs	r2, #0
 1521 05fe 83F84020 		strb	r2, [r3, #64]
 1522              	.L74:
 439:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 }
 440:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 shell_put_index();
 1523              		.loc 1 440 17
 1524 0602 FFF7FEFF 		bl	shell_put_index
 441:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 //flush the vk
 442:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 vk = CN_VIRTUAL_KEY_NULL;
 1525              		.loc 1 442 20
 1526 0606 0023     		movs	r3, #0
 1527 0608 C7F87431 		str	r3, [r7, #372]
 443:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 vkmask = CN_VIRTUAL_KEY_NULL;
 1528              		.loc 1 443 24
 1529 060c 0023     		movs	r3, #0
 1530 060e C7F87031 		str	r3, [r7, #368]
 444:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 break;
 1531              		.loc 1 444 17
 1532 0612 70E0     		b	.L42
 1533              	.L56:
 445:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****             case CN_KEY_BS:      //should delete the current character,move all the following chara
 446:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 if(shell_cmd_cache.curoffset >0){
 1534              		.loc 1 446 35
 1535 0614 07F10C03 		add	r3, r7, #12
 1536 0618 93F84030 		ldrb	r3, [r3, #64]	@ zero_extendqisi2
 1537              		.loc 1 446 19
 1538 061c 002B     		cmp	r3, #0
 1539 061e 33D0     		beq	.L76
 1540              	.LBB5:
 447:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                     char *substr = shell_cmd_cache.curcmd + shell_cmd_cache.curoffset;
 1541              		.loc 1 447 76
 1542 0620 07F10C03 		add	r3, r7, #12
 1543 0624 93F84030 		ldrb	r3, [r3, #64]	@ zero_extendqisi2
 1544 0628 1A46     		mov	r2, r3
 1545              		.loc 1 447 27
 1546 062a 07F10C03 		add	r3, r7, #12
ARM GAS  /tmp/ccKRyzhl.s 			page 36


 1547 062e 1344     		add	r3, r3, r2
 1548 0630 C7F85C31 		str	r3, [r7, #348]
 448:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                     int len = strlen(substr);
 1549              		.loc 1 448 31
 1550 0634 D7F85C01 		ldr	r0, [r7, #348]
 1551 0638 FFF7FEFF 		bl	strlen
 1552 063c 0346     		mov	r3, r0
 1553              		.loc 1 448 25
 1554 063e C7F85831 		str	r3, [r7, #344]
 449:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                     shell_put_char('\b');
 1555              		.loc 1 449 21
 1556 0642 0820     		movs	r0, #8
 1557 0644 FFF7FEFF 		bl	shell_put_char
 450:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                     shell_put_string(substr);
 1558              		.loc 1 450 21
 1559 0648 D7F85C01 		ldr	r0, [r7, #348]
 1560 064c FFF7FEFF 		bl	shell_put_string
 451:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                     shell_put_char(' ');
 1561              		.loc 1 451 21
 1562 0650 2020     		movs	r0, #32
 1563 0652 FFF7FEFF 		bl	shell_put_char
 452:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                     shell_moves_cursor_left(len + 1);
 1564              		.loc 1 452 21
 1565 0656 D7F85831 		ldr	r3, [r7, #344]
 1566 065a 0133     		adds	r3, r3, #1
 1567 065c 1846     		mov	r0, r3
 1568 065e FFF7FEFF 		bl	shell_moves_cursor_left
 453:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                     
 454:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                     (void) strcpy(substr - 1, substr);
 1569              		.loc 1 454 28
 1570 0662 D7F85C31 		ldr	r3, [r7, #348]
 1571 0666 013B     		subs	r3, r3, #1
 1572 0668 D7F85C11 		ldr	r1, [r7, #348]
 1573 066c 1846     		mov	r0, r3
 1574 066e FFF7FEFF 		bl	strcpy
 455:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                     shell_cmd_cache.curoffset--;
 1575              		.loc 1 455 36
 1576 0672 07F10C03 		add	r3, r7, #12
 1577 0676 93F84030 		ldrb	r3, [r3, #64]	@ zero_extendqisi2
 1578              		.loc 1 455 46
 1579 067a 013B     		subs	r3, r3, #1
 1580 067c DAB2     		uxtb	r2, r3
 1581 067e 07F10C03 		add	r3, r7, #12
 1582 0682 83F84020 		strb	r2, [r3, #64]
 1583              	.LBE5:
 1584 0686 01E0     		b	.L77
 1585              	.L76:
 456:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 } else
 457:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                     shell_bell();
 1586              		.loc 1 457 21
 1587 0688 FFF7FEFF 		bl	shell_bell
 1588              	.L77:
 458:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 //flush the vk
 459:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 vk = CN_VIRTUAL_KEY_NULL;
 1589              		.loc 1 459 20
 1590 068c 0023     		movs	r3, #0
 1591 068e C7F87431 		str	r3, [r7, #372]
ARM GAS  /tmp/ccKRyzhl.s 			page 37


 460:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 vkmask = CN_VIRTUAL_KEY_NULL;
 1592              		.loc 1 460 24
 1593 0692 0023     		movs	r3, #0
 1594 0694 C7F87031 		str	r3, [r7, #368]
 461:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 break;
 1595              		.loc 1 461 17
 1596 0698 2DE0     		b	.L42
 1597              	.L51:
 462:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****             case CN_KEY_ES:      //esc key,delete all the input here
 463:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 vk= CN_KEY_ES;
 1598              		.loc 1 463 19
 1599 069a 1B23     		movs	r3, #27
 1600 069c C7F87431 		str	r3, [r7, #372]
 464:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 vkmask = CN_KEY_ES;
 1601              		.loc 1 464 24
 1602 06a0 1B23     		movs	r3, #27
 1603 06a2 C7F87031 		str	r3, [r7, #368]
 465:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 break;
 1604              		.loc 1 465 17
 1605 06a6 26E0     		b	.L42
 1606              	.L47:
 466:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****             default: //other control character will be ignored
 467:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 //push the character to the buffer until its full and the '\n' comes
 468:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 if(shell_cmd_cache.curoffset <(CN_CMDLEN_MAX-1)){
 1607              		.loc 1 468 35
 1608 06a8 07F10C03 		add	r3, r7, #12
 1609 06ac 93F84030 		ldrb	r3, [r3, #64]	@ zero_extendqisi2
 1610              		.loc 1 468 19
 1611 06b0 3E2B     		cmp	r3, #62
 1612 06b2 16D8     		bhi	.L78
 1613              	.LBB6:
 469:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                     char *p = (char *)&ch;
 1614              		.loc 1 469 27
 1615 06b4 07F5A873 		add	r3, r7, #336
 1616 06b8 C7F85431 		str	r3, [r7, #340]
 470:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                     if (*p == 0)
 1617              		.loc 1 470 25
 1618 06bc D7F85431 		ldr	r3, [r7, #340]
 1619 06c0 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1620              		.loc 1 470 24
 1621 06c2 002B     		cmp	r3, #0
 1622 06c4 05D1     		bne	.L79
 471:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                         // this architecture is big-endian
 472:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                         *p = (char)ch;    
 1623              		.loc 1 472 30
 1624 06c6 D7F85031 		ldr	r3, [r7, #336]
 1625 06ca DAB2     		uxtb	r2, r3
 1626              		.loc 1 472 28
 1627 06cc D7F85431 		ldr	r3, [r7, #340]
 1628 06d0 1A70     		strb	r2, [r3]
 1629              	.L79:
 473:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                     shell_insert_string(&shell_cmd_cache, p);
 1630              		.loc 1 473 21
 1631 06d2 07F10C03 		add	r3, r7, #12
 1632 06d6 D7F85411 		ldr	r1, [r7, #340]
 1633 06da 1846     		mov	r0, r3
 1634 06dc FFF7FEFF 		bl	shell_insert_string
ARM GAS  /tmp/ccKRyzhl.s 			page 38


 1635              	.LBE6:
 1636 06e0 01E0     		b	.L80
 1637              	.L78:
 474:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 } else
 475:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                     shell_bell();
 1638              		.loc 1 475 21
 1639 06e2 FFF7FEFF 		bl	shell_bell
 1640              	.L80:
 476:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 //flush the vk
 477:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 vk = CN_VIRTUAL_KEY_NULL;
 1641              		.loc 1 477 20
 1642 06e6 0023     		movs	r3, #0
 1643 06e8 C7F87431 		str	r3, [r7, #372]
 478:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 vkmask = CN_VIRTUAL_KEY_NULL;
 1644              		.loc 1 478 24
 1645 06ec 0023     		movs	r3, #0
 1646 06ee C7F87031 		str	r3, [r7, #368]
 479:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 break;
 1647              		.loc 1 479 17
 1648 06f2 00E0     		b	.L42
 1649              	.L82:
 304:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****         }
 1650              		.loc 1 304 13
 1651 06f4 00BF     		nop
 1652              	.L42:
 302:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****         if((ch == CN_VIRTUAL_KEY_NULL)||(EOF == ch)||(ch == 0xFF)){
 1653              		.loc 1 302 11
 1654 06f6 9DE4     		b	.L81
 1655              	.L86:
 1656              		.align	2
 1657              	.L85:
 1658 06f8 00000000 		.word	__FUNCTION__.7035
 1659 06fc 2C000000 		.word	.LC3
 1660              		.cfi_endproc
 1661              	.LFE14:
 1663              		.section	.rodata
 1664 0041 000000   		.align	2
 1665              	.LC4:
 1666 0044 7368656C 		.ascii	"shell_server\000"
 1666      6C5F7365 
 1666      72766572 
 1666      00
 1667              		.section	.text.shell_init,"ax",%progbits
 1668              		.align	1
 1669              		.global	shell_init
 1670              		.syntax unified
 1671              		.thumb
 1672              		.thumb_func
 1673              		.fpu fpv4-sp-d16
 1675              	shell_init:
 1676              	.LFB15:
 480:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****         }
 481:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****     }
 482:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** 
 483:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****     return -1;
 484:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** }
 485:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** 
ARM GAS  /tmp/ccKRyzhl.s 			page 39


 486:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** /*******************************************************************************
 487:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** function     :this is the  shell module initialize function
 488:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** parameters   :
 489:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** instruction  :if you want use shell,you should do two things
 490:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****               1,make CFG_SHELL_ENABLE true in target_config.h
 491:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****               2,call shell_init in your process:make sure after the system has
 492:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                 been initialized
 493:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** *******************************************************************************/
 494:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** void shell_init()
 495:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** {
 1677              		.loc 1 495 1
 1678              		.cfi_startproc
 1679              		@ args = 0, pretend = 0, frame = 0
 1680              		@ frame_needed = 1, uses_anonymous_args = 0
 1681 0000 80B5     		push	{r7, lr}
 1682              	.LCFI49:
 1683              		.cfi_def_cfa_offset 8
 1684              		.cfi_offset 7, -8
 1685              		.cfi_offset 14, -4
 1686 0002 82B0     		sub	sp, sp, #8
 1687              	.LCFI50:
 1688              		.cfi_def_cfa_offset 16
 1689 0004 02AF     		add	r7, sp, #8
 1690              	.LCFI51:
 1691              		.cfi_def_cfa 7, 8
 496:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****     shell_cmd_init();
 1692              		.loc 1 496 5
 1693 0006 FFF7FEFF 		bl	shell_cmd_init
 497:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** 
 498:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****     osal_task_create("shell_server",shell_server_entry,NULL,\
 1694              		.loc 1 498 5
 1695 000a 0A23     		movs	r3, #10
 1696 000c 0193     		str	r3, [sp, #4]
 1697 000e 0023     		movs	r3, #0
 1698 0010 0093     		str	r3, [sp]
 1699 0012 4FF41063 		mov	r3, #2304
 1700 0016 0022     		movs	r2, #0
 1701 0018 0349     		ldr	r1, .L88
 1702 001a 0448     		ldr	r0, .L88+4
 1703 001c FFF7FEFF 		bl	osal_task_create
 499:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c ****                       CONFIG_SHELL_TASK_STACKSIZE+CN_CMD_CACHE*CN_CMDLEN_MAX,NULL,CONFIG_SHELL_TASK
 500:/home/fanxinhao/Work/LiteOS_Lab/iot_link/shell/shell_main.c **** }
 1704              		.loc 1 500 1
 1705 0020 00BF     		nop
 1706 0022 BD46     		mov	sp, r7
 1707              	.LCFI52:
 1708              		.cfi_def_cfa_register 13
 1709              		@ sp needed
 1710 0024 80BD     		pop	{r7, pc}
 1711              	.L89:
 1712 0026 00BF     		.align	2
 1713              	.L88:
 1714 0028 00000000 		.word	shell_server_entry
 1715 002c 44000000 		.word	.LC4
 1716              		.cfi_endproc
 1717              	.LFE15:
 1719              		.section	.rodata.__FUNCTION__.7035,"a"
ARM GAS  /tmp/ccKRyzhl.s 			page 40


 1720              		.align	2
 1723              	__FUNCTION__.7035:
 1724 0000 7368656C 		.ascii	"shell_server_entry\000"
 1724      6C5F7365 
 1724      72766572 
 1724      5F656E74 
 1724      727900
 1725              		.text
 1726              	.Letext0:
 1727              		.file 2 "/home/fanxinhao/toolchain/gcc-arm-none-eabi-9-2019-q4-major/arm-none-eabi/include/sys/loc
 1728              		.file 3 "/home/fanxinhao/toolchain/gcc-arm-none-eabi-9-2019-q4-major/arm-none-eabi/include/sys/_ty
 1729              		.file 4 "/home/fanxinhao/toolchain/gcc-arm-none-eabi-9-2019-q4-major/lib/gcc/arm-none-eabi/9.2.1/i
 1730              		.file 5 "/home/fanxinhao/toolchain/gcc-arm-none-eabi-9-2019-q4-major/arm-none-eabi/include/sys/ree
 1731              		.file 6 "/home/fanxinhao/Work/LiteOS_Lab/iot_link/inc/shell.h"
 1732              		.file 7 "/home/fanxinhao/Work/LiteOS_Lab/iot_link/inc/link_log.h"
ARM GAS  /tmp/ccKRyzhl.s 			page 41


DEFINED SYMBOLS
                            *ABS*:0000000000000000 shell_main.c
     /tmp/ccKRyzhl.s:18     .rodata:0000000000000000 $d
     /tmp/ccKRyzhl.s:22     .data.gs_welcome_info:0000000000000000 $d
     /tmp/ccKRyzhl.s:25     .data.gs_welcome_info:0000000000000000 gs_welcome_info
     /tmp/ccKRyzhl.s:28     .text.shell_get_char:0000000000000000 $t
     /tmp/ccKRyzhl.s:35     .text.shell_get_char:0000000000000000 shell_get_char
     /tmp/ccKRyzhl.s:60     .text.shell_put_char:0000000000000000 $t
     /tmp/ccKRyzhl.s:66     .text.shell_put_char:0000000000000000 shell_put_char
     /tmp/ccKRyzhl.s:107    .text.shell_put_char:0000000000000024 $d
     /tmp/ccKRyzhl.s:112    .text.shell_put_string:0000000000000000 $t
     /tmp/ccKRyzhl.s:118    .text.shell_put_string:0000000000000000 shell_put_string
     /tmp/ccKRyzhl.s:187    .text.shell_put_index:0000000000000000 $t
     /tmp/ccKRyzhl.s:193    .text.shell_put_index:0000000000000000 shell_put_index
     /tmp/ccKRyzhl.s:216    .text.shell_put_index:0000000000000010 $d
     /tmp/ccKRyzhl.s:225    .text.shell_put_backspace:0000000000000000 $t
     /tmp/ccKRyzhl.s:231    .text.shell_put_backspace:0000000000000000 shell_put_backspace
     /tmp/ccKRyzhl.s:288    .text.shell_put_backspace:0000000000000034 $d
     /tmp/ccKRyzhl.s:293    .text.shell_put_space:0000000000000000 $t
     /tmp/ccKRyzhl.s:299    .text.shell_put_space:0000000000000000 shell_put_space
     /tmp/ccKRyzhl.s:354    .text.shell_moves_cursor_right:0000000000000000 $t
     /tmp/ccKRyzhl.s:360    .text.shell_moves_cursor_right:0000000000000000 shell_moves_cursor_right
     /tmp/ccKRyzhl.s:438    .text.shell_bell:0000000000000000 $t
     /tmp/ccKRyzhl.s:444    .text.shell_bell:0000000000000000 shell_bell
     /tmp/ccKRyzhl.s:468    .text.shell_moves_cursor_left:0000000000000000 $t
     /tmp/ccKRyzhl.s:474    .text.shell_moves_cursor_left:0000000000000000 shell_moves_cursor_left
     /tmp/ccKRyzhl.s:529    .text.shell_cachecmd:0000000000000000 $t
     /tmp/ccKRyzhl.s:535    .text.shell_cachecmd:0000000000000000 shell_cachecmd
     /tmp/ccKRyzhl.s:658    .text.shell_insert_string:0000000000000000 $t
     /tmp/ccKRyzhl.s:664    .text.shell_insert_string:0000000000000000 shell_insert_string
     /tmp/ccKRyzhl.s:806    .text.shell_server_entry:0000000000000000 $t
     /tmp/ccKRyzhl.s:812    .text.shell_server_entry:0000000000000000 shell_server_entry
     /tmp/ccKRyzhl.s:958    .text.shell_server_entry:0000000000000120 $d
     /tmp/ccKRyzhl.s:978    .text.shell_server_entry:0000000000000170 $t
     /tmp/ccKRyzhl.s:1248   .text.shell_server_entry:00000000000003bc $d
     /tmp/ccKRyzhl.s:1255   .text.shell_server_entry:00000000000003d0 $t
     /tmp/ccKRyzhl.s:1658   .text.shell_server_entry:00000000000006f8 $d
     /tmp/ccKRyzhl.s:1723   .rodata.__FUNCTION__.7035:0000000000000000 __FUNCTION__.7035
     /tmp/ccKRyzhl.s:1668   .text.shell_init:0000000000000000 $t
     /tmp/ccKRyzhl.s:1675   .text.shell_init:0000000000000000 shell_init
     /tmp/ccKRyzhl.s:1714   .text.shell_init:0000000000000028 $d
     /tmp/ccKRyzhl.s:1720   .rodata.__FUNCTION__.7035:0000000000000000 $d

UNDEFINED SYMBOLS
getchar
putchar
fflush
_impure_ptr
strlen
strcmp
memset
strncpy
shell_cmd_index
link_log_level_get
link_log_level_name
osal_sys_time
printf
ARM GAS  /tmp/ccKRyzhl.s 			page 42


shell_cmd_execute
strcpy
shell_cmd_init
osal_task_create
